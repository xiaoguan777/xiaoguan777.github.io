<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title>AJAX学习（五）</title>
    <url>/AJAX/AJAX%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%94%EF%BC%89/</url>
    <content><![CDATA[<h3 id="AJAX学习（五）"><a href="#AJAX学习（五）" class="headerlink" title="AJAX学习（五）"></a>AJAX学习（五）</h3><span id="more"></span>

<h5 id="自动补全代码"><a href="#自动补全代码" class="headerlink" title="自动补全代码"></a>自动补全代码</h5><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>自动补全<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">      <span class="selector-class">.userInput</span>&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">300px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">height</span>: <span class="number">25px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">font-size</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">padding-left</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css"></span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">      <span class="selector-class">.showDiv</span>&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">width</span>: <span class="number">309px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border</span>: <span class="number">1px</span> solid lightgray;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: cornflowerblue;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">display</span>: none;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">      <span class="selector-class">.showDiv</span> <span class="selector-tag">p</span>&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">padding-left</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin-top</span>: <span class="number">2px</span>;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">margin-bottom</span>: <span class="number">2px</span>;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">      <span class="selector-class">.showDiv</span> <span class="selector-tag">p</span><span class="selector-pseudo">:hover</span>&#123;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">border</span>: <span class="number">1px</span> palegoldenrod solid;</span></span><br><span class="line"><span class="language-css">        <span class="attribute">background-color</span>: aliceblue;</span></span><br><span class="line"><span class="language-css">      &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">window</span>.<span class="property">onload</span>=<span class="function">()=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;keyWords&quot;</span>).<span class="property">onkeyup</span>=<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">value</span> == <span class="string">&quot;&quot;</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;showDiv&quot;</span>).<span class="property">style</span>.<span class="property">display</span>=<span class="string">&quot;none&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;<span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">var</span> xmlHttpRequest = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span></span><br><span class="line"><span class="language-javascript">                    xmlHttpRequest.<span class="property">onreadystatechange</span>=<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span> (xmlHttpRequest.<span class="property">readyState</span> == <span class="number">4</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">if</span> (xmlHttpRequest.<span class="property">status</span> &gt;= <span class="number">200</span>&amp;&amp;xmlHttpRequest.<span class="property">status</span>&lt;=<span class="number">300</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="keyword">var</span> json = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(xmlHttpRequest.<span class="property">responseText</span>);</span></span><br><span class="line"><span class="language-javascript">                                <span class="keyword">var</span> html=<span class="string">&quot;&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">                                <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;json.<span class="property">length</span>;i++)&#123;</span></span><br><span class="line"><span class="language-javascript">                                    html+=<span class="string">&quot;&lt;p onclick=&#x27;setinput(\&quot;&quot;</span>+json[i].<span class="property">content</span>+<span class="string">&quot;\&quot;)&#x27;&gt;&quot;</span>+json[i].<span class="property">content</span>+<span class="string">&quot;&lt;/p&gt;&quot;</span></span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">                                &#125;</span></span><br><span class="line"><span class="language-javascript">                                <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;showDiv&quot;</span>).<span class="property">innerHTML</span>=html;</span></span><br><span class="line"><span class="language-javascript">                                <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;showDiv&quot;</span>).<span class="property">style</span>.<span class="property">display</span>=<span class="string">&quot;block&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">                            &#125;<span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">status</span>)</span></span><br><span class="line"><span class="language-javascript">                            &#125;</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                    xmlHttpRequest.<span class="title function_">open</span>(<span class="string">&quot;GET&quot;</span>,<span class="string">&quot;/autocomplete/query?_=&quot;</span>+<span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>()+<span class="string">&quot;&amp;keywords=&quot;</span>+<span class="variable language_">this</span>.<span class="property">value</span>,<span class="literal">true</span>);</span></span><br><span class="line"><span class="language-javascript">                    xmlHttpRequest.<span class="title function_">send</span>();</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">setinput</span>(<span class="params">content</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;keyWords&quot;</span>).<span class="property">value</span>=content;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;showDiv&quot;</span>).<span class="property">style</span>.<span class="property">display</span>=<span class="string">&quot;none&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">class</span>=<span class="string">&quot;userInput&quot;</span> <span class="attr">id</span>=<span class="string">&quot;keyWords&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">&quot;showDiv&quot;</span> <span class="attr">id</span>=<span class="string">&quot;showDiv&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>北京疫情最新情况<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>北京天气<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">p</span>&gt;</span>北京时间<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">P</span>&gt;</span>北京人<span class="tag">&lt;/<span class="name">P</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/query&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">QueryServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">keywords</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;keywords&quot;</span>);</span><br><span class="line">        Connection conn=<span class="literal">null</span>;</span><br><span class="line">        PreparedStatement ps=<span class="literal">null</span>;</span><br><span class="line">        ResultSet rs=<span class="literal">null</span>;</span><br><span class="line">        <span class="type">StringBuilder</span> <span class="variable">stringBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class="line">            conn= DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://localhost:3306/xiaoguan&quot;</span>,<span class="string">&quot;root&quot;</span>,<span class="string">&quot;68963120g&quot;</span>);</span><br><span class="line">            String sql=<span class="string">&quot;select content from t_ajax where content like ?&quot;</span>;</span><br><span class="line">            ps=conn.prepareStatement(sql);</span><br><span class="line">            ps.setString(<span class="number">1</span>,keywords+<span class="string">&quot;%&quot;</span>);</span><br><span class="line">            rs=ps.executeQuery();</span><br><span class="line">            stringBuilder.append(<span class="string">&quot;[&quot;</span>);</span><br><span class="line">            <span class="keyword">while</span> (rs.next())&#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">content</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;content&quot;</span>);</span><br><span class="line">                stringBuilder.append(<span class="string">&quot;&#123;\&quot;content\&quot;:\&quot;&quot;</span>+content+<span class="string">&quot;\&quot;&#125;,&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (rs!=<span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    rs.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (ps!=<span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    ps.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (conn!=<span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">        response.getWriter().print(stringBuilder.substring(<span class="number">0</span>,stringBuilder.length()-<span class="number">1</span>)+<span class="string">&quot;]&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> t_ajax;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> t_ajax(</span><br><span class="line">  id <span class="type">int</span> <span class="keyword">primary</span> key auto_increment,</span><br><span class="line">  content <span class="type">varchar</span>(<span class="number">255</span>)</span><br><span class="line">);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_ajax (content)</span><br><span class="line"><span class="keyword">values</span> (<span class="string">&#x27;javascript&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_ajax (content)</span><br><span class="line"><span class="keyword">values</span> (<span class="string">&#x27;javaweb&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_ajax (content)</span><br><span class="line"><span class="keyword">values</span> (<span class="string">&#x27;java&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_ajax (content)</span><br><span class="line"><span class="keyword">values</span> (<span class="string">&#x27;java123&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_ajax (content)</span><br><span class="line"><span class="keyword">values</span> (<span class="string">&#x27;mysql&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_ajax (content)</span><br><span class="line"><span class="keyword">values</span> (<span class="string">&#x27;myweb&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_ajax (content)</span><br><span class="line"><span class="keyword">values</span> (<span class="string">&#x27;myapplication&#x27;</span>);</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> t_ajax (content)</span><br><span class="line"><span class="keyword">values</span> (<span class="string">&#x27;jdk&#x27;</span>);</span><br><span class="line"><span class="keyword">commit</span> ;</span><br><span class="line"><span class="keyword">select</span> <span class="operator">*</span> <span class="keyword">from</span> t_ajax;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>计算机学习</category>
        <category>AJAX</category>
      </categories>
      <tags>
        <tag>AJAX</tag>
      </tags>
  </entry>
  <entry>
    <title>AJAX学习（一）</title>
    <url>/AJAX/AJAX%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<h3 id="AJAX学习（一）"><a href="#AJAX学习（一）" class="headerlink" title="AJAX学习（一）"></a>AJAX学习（一）</h3><span id="more"></span>

<ul>
<li>XMLHttpRequest对象的readyState属性对应的状态值<ul>
<li>0请求未初始化</li>
<li>1服务器连接已经建立</li>
<li>2请求已收到</li>
<li>3正在处理请求</li>
<li>4请求已完成且响应已就绪</li>
</ul>
</li>
</ul>
<h3 id="相关代码"><a href="#相关代码" class="headerlink" title="相关代码"></a>相关代码</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;ch&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>get请求<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;helloajax&quot;</span>).<span class="property">onclick</span>=<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">//创建ajax的核心对象XMLHttpRequest</span></span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">var</span> xhr=<span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">//注册回调函数</span></span></span><br><span class="line"><span class="language-javascript">          xhr.<span class="property">onreadystatechange</span>=<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">readyState</span> == <span class="number">4</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">status</span>==<span class="number">404</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">alert</span>(<span class="string">&quot;你访问的资源不存在&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">              &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">status</span>==<span class="number">500</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">alert</span>(<span class="string">&quot;服务器内部发生错误，请联系管理员&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">              &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">status</span>==<span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="comment">//获取响应信息</span></span></span><br><span class="line"><span class="language-javascript">                  <span class="variable language_">console</span>.<span class="title function_">log</span>(<span class="variable language_">this</span>.<span class="property">responseText</span>);</span></span><br><span class="line"><span class="language-javascript">                  <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;mydiv&quot;</span>).<span class="property">innerHTML</span>=<span class="variable language_">this</span>.<span class="property">responseText</span>;</span></span><br><span class="line"><span class="language-javascript">              &#125;<span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">alert</span>(<span class="string">&quot;出现了其他错误&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">              &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">              <span class="comment">//响应结束了</span></span></span><br><span class="line"><span class="language-javascript">              <span class="comment">//status返回http响应状态码</span></span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">//open(method,url,async,user,psw)</span></span></span><br><span class="line"><span class="language-javascript">          <span class="comment">//method请求方式</span></span></span><br><span class="line"><span class="language-javascript">          <span class="comment">//url请求的路径</span></span></span><br><span class="line"><span class="language-javascript">          <span class="comment">//async 用true表示此ajax是一个异步请求，false表示此ajax是一个同步请求</span></span></span><br><span class="line"><span class="language-javascript">          <span class="comment">//user用户名</span></span></span><br><span class="line"><span class="language-javascript">          <span class="comment">//psw密码（要服务器上的一些资源可能要密码和用户名）</span></span></span><br><span class="line"><span class="language-javascript">          <span class="comment">//开启通道</span></span></span><br><span class="line"><span class="language-javascript">          xhr.<span class="title function_">open</span>(<span class="string">&quot;get&quot;</span>,<span class="string">&quot;/old/ajaxrequest1&quot;</span>,<span class="literal">true</span>);<span class="comment">//只是通道打开，还没有发送请求</span></span></span><br><span class="line"><span class="language-javascript">          <span class="comment">//发送请求</span></span></span><br><span class="line"><span class="language-javascript">          xhr.<span class="title function_">send</span>();</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;hello ajax&quot;</span> <span class="attr">id</span>=<span class="string">&quot;helloajax&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;mydiv&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.request;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/request&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OldRequestServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        resp.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        out.print(<span class="string">&quot;&lt;h1&gt;欢迎AJAX&lt;h1&gt;&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.request;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/ajaxrequest1&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ajax1Servlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">        PrintWriter out=response.getWriter();</span><br><span class="line">        out.print(<span class="string">&quot;你好！AJAX!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;ch&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>演示传统请求，及传统请求的缺点<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/old/request&quot;</span>&gt;</span>传统请求超链接<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/old/request&quot;</span> <span class="attr">method</span>=<span class="string">&quot;get&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;传统请求（form表单）&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;通过js发送请求&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;sendRequest()&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">sendRequest</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">window</span>.<span class="property">location</span>.<span class="property">href</span>=<span class="string">&quot;/old/request&quot;</span></span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>计算机学习</category>
        <category>AJAX</category>
      </categories>
      <tags>
        <tag>AJAX</tag>
      </tags>
  </entry>
  <entry>
    <title>AJAX学习（三）</title>
    <url>/AJAX/AJAX%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%89%EF%BC%89/</url>
    <content><![CDATA[<h3 id="AJAX学习（三）"><a href="#AJAX学习（三）" class="headerlink" title="AJAX学习（三）"></a>AJAX学习（三）</h3><span id="more"></span>

<h5 id="相关学习代码"><a href="#相关学习代码" class="headerlink" title="相关学习代码"></a>相关学习代码</h5><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>发送ajax请求,显示学生列表<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;btm&quot;</span>).<span class="property">onclick</span>=<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> xmlHttpRequest = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span></span><br><span class="line"><span class="language-javascript">                xmlHttpRequest.<span class="property">onreadystatechange</span>=<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">readyState</span>==<span class="number">4</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">status</span>==<span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">//document.getElementById(&quot;info&quot;).innerHTML=xmlHttpRequest.responseText;</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">var</span> stuList = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">this</span>.<span class="property">responseText</span>);</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">var</span> html=<span class="string">&quot;&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;stuList.<span class="property">length</span>;i++)&#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="keyword">var</span> stu=stuList[i];</span></span><br><span class="line"><span class="language-javascript">                                html+=<span class="string">&quot;&lt;tr&gt;&quot;</span></span></span><br><span class="line"><span class="language-javascript">                                html+=<span class="string">&quot; &lt;td&gt;&quot;</span>+(i+<span class="number">1</span>)+<span class="string">&quot;&lt;/td&gt;&quot;</span></span></span><br><span class="line"><span class="language-javascript">                                html+=<span class="string">&quot;&lt;td&gt;&quot;</span>+stu.<span class="property">name</span>+<span class="string">&quot;&lt;/td&gt;&quot;</span></span></span><br><span class="line"><span class="language-javascript">                                 html+=<span class="string">&quot;&lt;td&gt;&quot;</span>+stu.<span class="property">age</span>+<span class="string">&quot;&lt;/td&gt;&quot;</span></span></span><br><span class="line"><span class="language-javascript">                                html+=<span class="string">&quot;&lt;td&gt;&quot;</span>+stu.<span class="property">addr</span>+<span class="string">&quot;&lt;/td&gt;&quot;</span></span></span><br><span class="line"><span class="language-javascript">                                html+=<span class="string">&quot;&lt;/tr&gt;&quot;</span></span></span><br><span class="line"><span class="language-javascript">                            &#125;</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;info&quot;</span>).<span class="property">innerHTML</span>=html;</span></span><br><span class="line"><span class="language-javascript">                        &#125;<span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">status</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                xmlHttpRequest.<span class="title function_">open</span>(<span class="string">&quot;GET&quot;</span>,<span class="string">&quot;/old/ajax5&quot;</span>,<span class="literal">true</span>);</span></span><br><span class="line"><span class="language-javascript">                xmlHttpRequest.<span class="title function_">send</span>();</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;显示学员列表&quot;</span> <span class="attr">id</span>=<span class="string">&quot;btm&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">width</span>=<span class="string">&quot;50%&quot;</span> <span class="attr">border</span>=<span class="string">&quot;1px&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">th</span>&gt;</span>序号<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">th</span>&gt;</span>登录名<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">th</span>&gt;</span>登录密码<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">th</span>&gt;</span>真实姓名<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tbody</span> <span class="attr">id</span>=<span class="string">&quot;info&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;tr&gt;</span></span><br><span class="line"><span class="comment">      &lt;td&gt;1&lt;/td&gt;</span></span><br><span class="line"><span class="comment">      &lt;td&gt;admin&lt;/td&gt;</span></span><br><span class="line"><span class="comment">      &lt;td&gt;123456&lt;/td&gt;</span></span><br><span class="line"><span class="comment">      &lt;td&gt;admin&lt;/td&gt;</span></span><br><span class="line"><span class="comment">    &lt;/tr&gt;--&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>ajax7<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;bnt1&quot;</span>).<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> xmlHttpRequest = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span></span><br><span class="line"><span class="language-javascript">        xmlHttpRequest.<span class="property">onreadystatechange</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">readyState</span> == <span class="number">4</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">status</span> == <span class="number">200</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;div1&quot;</span>).<span class="property">innerHTML</span> = <span class="variable language_">this</span>.<span class="property">responseText</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">status</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        xmlHttpRequest.<span class="title function_">open</span>(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;/old/ajax7?t=&quot;</span> + <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>(), <span class="literal">false</span>);</span></span><br><span class="line"><span class="language-javascript">        xmlHttpRequest.<span class="title function_">send</span>();</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;bnt2&quot;</span>).<span class="property">onclick</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">var</span> xmlHttpRequest = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span></span><br><span class="line"><span class="language-javascript">        xmlHttpRequest.<span class="property">onreadystatechange</span> = <span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">readyState</span> == <span class="number">4</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">status</span> == <span class="number">200</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;div2&quot;</span>).<span class="property">innerHTML</span> = <span class="variable language_">this</span>.<span class="property">responseText</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">status</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">          xmlHttpRequest.<span class="title function_">open</span>(<span class="string">&quot;GET&quot;</span>, <span class="string">&quot;/old/ajax8?t=&quot;</span> + <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>(), <span class="literal">true</span>);</span></span><br><span class="line"><span class="language-javascript">          xmlHttpRequest.<span class="title function_">send</span>();</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;bnt1&quot;</span>&gt;</span>ajax请求1<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;bnt2&quot;</span>&gt;</span>ajax请求2<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>手动封装JS库jQuery<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;js/jQuery-1.0.0.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// function jQuery(select)&#123;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//   if (typeof select == &quot;string&quot;) &#123;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//     if(select.charAt(0)==&quot;#&quot;)&#123;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//       elementById = document.getElementById(select.substring(1));</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//       return new jQuery();</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//     &#125;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//   &#125;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//   if (typeof select == &quot;function&quot;) &#123;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//     window.onload=select;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//   &#125;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//   this.html=function (htmlText)&#123;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//     elementById.innerHTML=htmlText;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//   &#125;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//   this.click=function (fun)&#123;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//     elementById.onclick=fun;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//   &#125;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//   this.focus=function (fun)&#123;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//     elementById.onfocus=fun;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//   &#125;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//   this.blur=function (fun)&#123;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//     elementById.onblur=fun;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//   &#125;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//   this.change=function (fun)&#123;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//     elementById.onchange=fun;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//   &#125;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//   this.val=function (v)&#123;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//     if (v == undefined) &#123;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//       return elementById.value;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//     &#125;else &#123;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//       elementById.value=v;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//     &#125;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//   &#125;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// &#125;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// $=jQuery;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// window.onload=function ()&#123;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//   // document.getElementById(&quot;btn&quot;).onclick=function ()&#123;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//   //   document.getElementById(&quot;mydiv&quot;).innerHTML=&quot;&lt;font color=&#x27;red&#x27;&gt;用户名不可用&lt;/font&gt;&quot;;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//   // &#125;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//   // jQuery(&quot;#btn&quot;).onclick=function ()&#123;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//   //   jQuery(&quot;#mydiv&quot;).innerHTML=&quot;&lt;font color=&#x27;red&#x27;&gt;用户名不可用!&lt;/font&gt;&quot;;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//   // &#125;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//   $(&quot;#btn&quot;).onclick=function ()&#123;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//     $(&quot;#mydiv&quot;).innerHTML=&quot;&lt;font color=&#x27;red&#x27;&gt;用户名不可用!&lt;/font&gt;&quot;;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">//   &#125;</span></span></span><br><span class="line"><span class="language-javascript">      <span class="comment">// &#125;</span></span></span><br><span class="line"><span class="language-javascript">      $(<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          $(<span class="string">&quot;#btn&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;#mydiv&quot;</span>).<span class="title function_">html</span>(<span class="string">&quot;&lt;font color=&#x27;red&#x27;&gt;用户名不可用!!#&lt;/font&gt;&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> username = $(<span class="string">&quot;#username&quot;</span>).<span class="title function_">val</span>();</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">alert</span>(username);</span></span><br><span class="line"><span class="language-javascript">            $(<span class="string">&quot;#username&quot;</span>).<span class="title function_">val</span>(<span class="string">&quot;hehe&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">          &#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">用户名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>显示信息<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;mydiv&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>ajax9<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/old/js/jQuery-1.0.0.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;btn&quot;</span>).<span class="property">onclick</span>=<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//   var xmlHttpRequest = new XMLHttpRequest();</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//   xmlHttpRequest.onreadystatechange=function ()&#123;</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//     if (this.readyState == 4) &#123;</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//       if (this.status == 200) &#123;</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//         var jsonObj = JSON.parse(this.responseText);</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//         document.getElementById(&quot;mydiv&quot;).innerHTML=jsonObj.uname;</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//       &#125;else&#123;</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//         alert(this.status);</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//       &#125;</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//     &#125;</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//   &#125;</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//   xmlHttpRequest.open(&quot;POST&quot;,&quot;/old/ajax9&quot;,true);</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//   xmlHttpRequest.setRequestHeader(&quot;Content-Type&quot;,&quot;application/x-www-form-urlencoded&quot;);</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//   var username = document.getElementById(&quot;username&quot;).value;</span></span></span><br><span class="line"><span class="language-javascript">        <span class="comment">//   xmlHttpRequest.send(&quot;username=&quot;+username)</span></span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> username = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;username&quot;</span>).<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript">            $.<span class="title function_">ajax</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">type</span>:<span class="string">&quot;post&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">url</span>:<span class="string">&quot;/old/ajax9&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">data</span>:<span class="string">&quot;username=&quot;</span>+username,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">async</span>:<span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">                <span class="attr">success</span>:<span class="keyword">function</span> (<span class="params">jsonObj</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;mydiv&quot;</span>).<span class="property">innerHTML</span>=jsonObj.<span class="property">uname</span>;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>提交<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line">用户名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;mydiv&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>测试写的jQuery库<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/old/js/jQuery-1.0.0.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      $(<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        $(<span class="string">&quot;#btn1&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          $.<span class="title function_">ajax</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">type</span>:<span class="string">&quot;GET&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">url</span>:<span class="string">&quot;/old/ajax10&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">async</span>:<span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">data</span>:<span class="string">&quot;username=&quot;</span>+$(<span class="string">&quot;#username&quot;</span>).<span class="title function_">val</span>(),</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">success</span>:<span class="keyword">function</span> (<span class="params">jsonObj</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">              $(<span class="string">&quot;#div1&quot;</span>).<span class="title function_">html</span>(jsonObj.<span class="property">uname</span>)</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn1&quot;</span>&gt;</span>发送ajax get请求<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">用户名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;div1&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>省市联动<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/old/js/jQuery-1.0.0.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        $(<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          $.<span class="title function_">ajax</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">type</span>:<span class="string">&quot;GET&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">url</span>:<span class="string">&quot;/old/ajax11&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">data</span>:<span class="string">&quot;t=&quot;</span>+<span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>(),</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">async</span>:<span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">            <span class="attr">success</span>:<span class="keyword">function</span> (<span class="params">jsonObj</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="keyword">var</span> html=<span class="string">&quot;&lt;option value=&#x27;000&#x27;&gt;--请选择省份--&lt;/option&gt;&quot;</span></span></span><br><span class="line"><span class="language-javascript">              <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;jsonObj.<span class="property">length</span>;i++)&#123;</span></span><br><span class="line"><span class="language-javascript">                html+=<span class="string">&quot;&lt;option value=&#x27;&quot;</span>+jsonObj[i].<span class="property">code</span>+<span class="string">&quot;&#x27;&gt;&quot;</span>+jsonObj[i].<span class="property">name</span>+<span class="string">&quot;&lt;/option&gt;&quot;</span></span></span><br><span class="line"><span class="language-javascript">              &#125;</span></span><br><span class="line"><span class="language-javascript">              $(<span class="string">&quot;#province&quot;</span>).<span class="title function_">html</span>(html);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;)</span></span><br><span class="line"><span class="language-javascript">           $(<span class="string">&quot;#province&quot;</span>).<span class="title function_">change</span>(<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">               $.<span class="title function_">ajax</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">                   <span class="attr">type</span>:<span class="string">&quot;GET&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                   <span class="attr">url</span>:<span class="string">&quot;/old/ajax11&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">                   <span class="attr">data</span>:<span class="string">&quot;t=&quot;</span>+<span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>()+<span class="string">&quot;&amp;pcode=&quot;</span>+<span class="variable language_">this</span>.<span class="property">value</span>,</span></span><br><span class="line"><span class="language-javascript">                   <span class="attr">async</span>:<span class="literal">true</span>,</span></span><br><span class="line"><span class="language-javascript">                   <span class="attr">success</span>:<span class="keyword">function</span> (<span class="params">jsonObj</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                       <span class="keyword">var</span> html=<span class="string">&quot;&lt;option value=&#x27;000&#x27;&gt;--请选择市--&lt;/option&gt;&quot;</span></span></span><br><span class="line"><span class="language-javascript">                       <span class="keyword">for</span> (<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;jsonObj.<span class="property">length</span>;i++)&#123;</span></span><br><span class="line"><span class="language-javascript">                           html+=<span class="string">&quot;&lt;option value=&#x27;&quot;</span>+jsonObj[i].<span class="property">code</span>+<span class="string">&quot;&#x27;&gt;&quot;</span>+jsonObj[i].<span class="property">name</span>+<span class="string">&quot;&lt;/option&gt;&quot;</span></span></span><br><span class="line"><span class="language-javascript">                       &#125;</span></span><br><span class="line"><span class="language-javascript">                       $(<span class="string">&quot;#city&quot;</span>).<span class="title function_">html</span>(html);</span></span><br><span class="line"><span class="language-javascript">                   &#125;</span></span><br><span class="line"><span class="language-javascript">               &#125;)</span></span><br><span class="line"><span class="language-javascript">           &#125;)</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;province&quot;</span> &gt;</span></span><br><span class="line"><span class="comment">&lt;!--  &lt;option value=&quot;000&quot;&gt;&amp;#45;&amp;#45;请选择省份&amp;#45;&amp;#45;&lt;/option&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--  &lt;option value=&quot;001&quot;&gt;河北省&lt;/option&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--  &lt;option value=&quot;002&quot;&gt;河南省&lt;/option&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--  &lt;option value=&quot;007&quot;&gt;江苏省&lt;/option&gt;--&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;city&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&#x27;000&#x27;</span>&gt;</span>--请选择市--<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>测试自己编写的jQury库<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;js/jQuery-1.0.0.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      $(<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        $(<span class="string">&quot;#btn&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="title function_">alert</span>(<span class="string">&quot;hello!&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>hello<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.request;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSON;</span><br><span class="line"><span class="keyword">import</span> com.xiaoguan.bean.Information;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/ajax5&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ajax5Servlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        resp.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        String jsonstr=<span class="string">&quot;&quot;</span>;</span><br><span class="line">        Connection conn=<span class="literal">null</span>;</span><br><span class="line">        PreparedStatement ps=<span class="literal">null</span>;</span><br><span class="line">        ResultSet rs=<span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class="line">            conn= DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://localhost:3306/xiaoguan&quot;</span>,<span class="string">&quot;root&quot;</span>,<span class="string">&quot;68963120g&quot;</span>);</span><br><span class="line">            String sql=<span class="string">&quot;select 登录名,登录密码,真实姓名 from login &quot;</span>;</span><br><span class="line">            ps=conn.prepareStatement(sql);</span><br><span class="line">            rs=ps.executeQuery();</span><br><span class="line"><span class="comment">//            json.append(&quot;[&quot;);</span></span><br><span class="line"><span class="comment">//            while (rs.next()) &#123;</span></span><br><span class="line"><span class="comment">//                String 登录名 = rs.getString(&quot;登录名&quot;);</span></span><br><span class="line"><span class="comment">//                String 登录密码 = rs.getString(&quot;登录密码&quot;);</span></span><br><span class="line"><span class="comment">//                String 真实姓名 = rs.getString(&quot;真实姓名&quot;);</span></span><br><span class="line"><span class="comment">//                //&#123;&quot;name&quot;:&quot;    王五       &quot;,&quot;age&quot;:     20    ,&quot;addr&quot;:&quot;      北京大兴区     &quot;&#125;,</span></span><br><span class="line"><span class="comment">//                json.append(&quot;&#123;\&quot;name\&quot;:\&quot;&quot;);</span></span><br><span class="line"><span class="comment">//                json.append(登录名);</span></span><br><span class="line"><span class="comment">//                json.append(&quot;\&quot;,\&quot;age\&quot;:&quot;);</span></span><br><span class="line"><span class="comment">//                json.append(登录密码);</span></span><br><span class="line"><span class="comment">//                json.append(&quot;,\&quot;addr\&quot;:\&quot;&quot;);</span></span><br><span class="line"><span class="comment">//                json.append(真实姓名);</span></span><br><span class="line"><span class="comment">//                json.append(&quot;\&quot;&#125;,&quot;);</span></span><br><span class="line"><span class="comment">//            &#125;</span></span><br><span class="line"><span class="comment">//             jsonstr = json.substring(0, json.length() - 1) + &quot;]&quot;;</span></span><br><span class="line">            List&lt;Information&gt; infoList=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">            <span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">                String 登录名 = rs.getString(<span class="string">&quot;登录名&quot;</span>);</span><br><span class="line">                String 登录密码 = rs.getString(<span class="string">&quot;登录密码&quot;</span>);</span><br><span class="line">                String 真实姓名 = rs.getString(<span class="string">&quot;真实姓名&quot;</span>);</span><br><span class="line">                Information info=<span class="keyword">new</span> <span class="title class_">Information</span>(登录名,登录密码,真实姓名);</span><br><span class="line">                infoList.add(info);</span><br><span class="line">            &#125;</span><br><span class="line">             jsonstr = JSON.toJSONString(infoList);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (rs!=<span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    rs.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (ps!=<span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    ps.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (rs!=<span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    rs.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">/*StringBuilder html=new StringBuilder();</span></span><br><span class="line"><span class="comment">        html.append(&quot;&lt;tr&gt;&quot;);</span></span><br><span class="line"><span class="comment">        html.append(&quot;  &lt;td&gt;1&lt;/td&gt;&quot;);</span></span><br><span class="line"><span class="comment">        html.append(&quot;  &lt;td&gt;admin&lt;/td&gt;&quot;);</span></span><br><span class="line"><span class="comment">        html.append(&quot;  &lt;td&gt;123456&lt;/td&gt;&quot;);</span></span><br><span class="line"><span class="comment">        html.append(&quot;  &lt;td&gt;admin&lt;/td&gt;&quot;);</span></span><br><span class="line"><span class="comment">        html.append(&quot;&lt;/tr&gt;&quot;);</span></span><br><span class="line"><span class="comment">        out.print(html);*/</span></span><br><span class="line">        <span class="comment">//拼接html换成json格式字符串</span></span><br><span class="line">        <span class="comment">//String json=&quot;[&#123;\&quot;name\&quot;:\&quot;王五\&quot;,\&quot;age\&quot;:20,\&quot;addr\&quot;:\&quot;北京大兴区\&quot;&#125;,&#123;\&quot;name\&quot;:\&quot;李四\&quot;,\&quot;age\&quot;:30,\&quot;addr\&quot;:\&quot;北京海淀区\&quot;&#125;]&quot;;</span></span><br><span class="line">        out.print(jsonstr);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.request;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/ajax6&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ajax6Servlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        response.setContentType(<span class="string">&quot;text/xml;charset=UTF-8&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">        <span class="comment">/*</span></span><br><span class="line"><span class="comment">        &lt;students&gt;</span></span><br><span class="line"><span class="comment">            &lt;student&gt;</span></span><br><span class="line"><span class="comment">                &lt;name&gt;张三&lt;/name&gt;</span></span><br><span class="line"><span class="comment">                &lt;age&gt;18&lt;/age&gt;</span></span><br><span class="line"><span class="comment">            &lt;/student&gt;</span></span><br><span class="line"><span class="comment">             &lt;student&gt;</span></span><br><span class="line"><span class="comment">                &lt;name&gt;王五&lt;/name&gt;</span></span><br><span class="line"><span class="comment">                &lt;age&gt;23&lt;/age&gt;</span></span><br><span class="line"><span class="comment">            &lt;/student&gt;</span></span><br><span class="line"><span class="comment">        &lt;students&gt;</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">        StringBuilder xml=<span class="keyword">new</span> <span class="title class_">StringBuilder</span>();</span><br><span class="line">         xml.append(<span class="string">&quot;&lt;students&gt;&quot;</span>);</span><br><span class="line">         xml.append(<span class="string">&quot;   &lt;student&gt;&quot;</span>);</span><br><span class="line">         xml.append(<span class="string">&quot;       &lt;name&gt;张三&lt;/name&gt;&quot;</span>);</span><br><span class="line">         xml.append(<span class="string">&quot;       &lt;age&gt;18&lt;/age&gt;&quot;</span>);</span><br><span class="line">         xml.append(<span class="string">&quot;   &lt;/student&gt;&quot;</span>);</span><br><span class="line">         xml.append(<span class="string">&quot;    &lt;student&gt;&quot;</span>);</span><br><span class="line">         xml.append(<span class="string">&quot;       &lt;name&gt;王五&lt;/name&gt;&quot;</span>);</span><br><span class="line">         xml.append(<span class="string">&quot;       &lt;age&gt;23&lt;/age&gt;&quot;</span>);</span><br><span class="line">         xml.append(<span class="string">&quot;   &lt;/student&gt;&quot;</span>);</span><br><span class="line">         xml.append(<span class="string">&quot;&lt;/students&gt;&quot;</span>);</span><br><span class="line">        out.print(xml);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.request;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/ajax7&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ajax7Servlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Thread.sleep(<span class="number">10</span>*<span class="number">1000</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (InterruptedException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        out.print(<span class="string">&quot;ajax请求1&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.request;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/ajax8&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ajax8Servlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">        out.print(<span class="string">&quot;ajax请求2&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.request;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/ajax9&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ajax9Servlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        request.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">        <span class="type">String</span> <span class="variable">uname</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        String json=<span class="string">&quot;&#123;\&quot;uname\&quot;:\&quot;&quot;</span>+uname+<span class="string">&quot;\&quot;&#125;&quot;</span>;</span><br><span class="line">        out.print(json);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.request;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.Locale;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/ajax10&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ajax10Servlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        request.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        response.getWriter().print(<span class="string">&quot;&#123;\&quot;uname\&quot;:\&quot;&quot;</span>+username.toUpperCase(Locale.ROOT)+<span class="string">&quot;\&quot;&#125;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.request;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.alibaba.fastjson.JSON;</span><br><span class="line"><span class="keyword">import</span> com.xiaoguan.bean.Area;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/ajax11&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">listAreaServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        request.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">pcode</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;pcode&quot;</span>);</span><br><span class="line">        Connection conn=<span class="literal">null</span>;</span><br><span class="line">        PreparedStatement ps=<span class="literal">null</span>;</span><br><span class="line">        ResultSet rs=<span class="literal">null</span>;</span><br><span class="line">        List&lt;Area&gt; areaList=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class="line">            conn= DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://localhost:3306/xiaoguan&quot;</span>,<span class="string">&quot;root&quot;</span>,<span class="string">&quot;68963120g&quot;</span>);</span><br><span class="line">            String sql=<span class="string">&quot;&quot;</span>;</span><br><span class="line">            <span class="keyword">if</span> (pcode==<span class="literal">null</span>) &#123;</span><br><span class="line">              sql=<span class="string">&quot;select code,name from t_area where pcode is null&quot;</span>;</span><br><span class="line">                ps = conn.prepareStatement(sql);</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                sql=<span class="string">&quot;select code,name from t_area where pcode=?&quot;</span>;</span><br><span class="line">                ps = conn.prepareStatement(sql);</span><br><span class="line">                ps.setString(<span class="number">1</span>,pcode);</span><br><span class="line">            &#125;</span><br><span class="line">            rs=ps.executeQuery();</span><br><span class="line">            <span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">code</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;code&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">                <span class="type">Area</span> <span class="variable">area</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Area</span>(code, name);</span><br><span class="line">                areaList.add(area);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (conn!=<span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (ps!=<span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    ps.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (rs!=<span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    rs.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">        String json= JSON.toJSONString(areaList);</span><br><span class="line">        response.getWriter().print(json);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.request;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/request&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">OldRequestServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        resp.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        out.print(<span class="string">&quot;&lt;h1&gt;欢迎AJAX&lt;h1&gt;&quot;</span>);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>计算机学习</category>
        <category>AJAX</category>
      </categories>
      <tags>
        <tag>AJAX</tag>
      </tags>
  </entry>
  <entry>
    <title>Cookie和Session</title>
    <url>/JavaWeb/Cookie%E5%92%8CSession/</url>
    <content><![CDATA[<h3 id="关于用Cookie和Session改进项目代码"><a href="#关于用Cookie和Session改进项目代码" class="headerlink" title="关于用Cookie和Session改进项目代码"></a>关于用Cookie和Session改进项目代码</h3><span id="more"></span>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.Cookie;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="meta">@WebServlet(&quot;/cookie&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CookieServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">Cookie</span> <span class="variable">productId</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;pw&quot;</span>, <span class="string">&quot;math&quot;</span>);</span><br><span class="line">        productId.setMaxAge(<span class="number">60</span>*<span class="number">60</span>);</span><br><span class="line">        productId.setPath(<span class="string">&quot;/cookie&quot;</span>);<span class="comment">//在cookie路径和其中子路径</span></span><br><span class="line">        response.addCookie(productId);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.oa.dept.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.xiaoguan.oa.dept.utils.DBUtil;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&#123;&quot;/login&quot;,&quot;/logout&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">servletPath</span> <span class="operator">=</span> request.getServletPath();</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;/login&quot;</span>.equals(servletPath))&#123;</span><br><span class="line">            doLogin(request,response);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;/logout&quot;</span>.equals(servletPath)) &#123;</span><br><span class="line">            doLogout(request,response);</span><br><span class="line">        &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;用户Servlet操作错误&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">doLogout</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession(<span class="literal">false</span>);</span><br><span class="line">        <span class="keyword">if</span>(session!=<span class="literal">null</span>)&#123;</span><br><span class="line">            session.invalidate();</span><br><span class="line">            response.sendRedirect(request.getContextPath()+<span class="string">&quot;/index.jsp&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doLogin</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">userName</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;userName&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">userPassword</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;userPassword&quot;</span>);</span><br><span class="line">        Connection conn=<span class="literal">null</span>;</span><br><span class="line">        PreparedStatement ps=<span class="literal">null</span>;</span><br><span class="line">        ResultSet rs=<span class="literal">null</span>;</span><br><span class="line">        <span class="type">boolean</span> flag=<span class="literal">false</span>;</span><br><span class="line">        <span class="type">int</span> id=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn= DBUtil.getConnection();</span><br><span class="line">            String sql=<span class="string">&quot;select id from login where 登录名=? and 登录密码=?&quot;</span>;</span><br><span class="line">            ps=conn.prepareStatement(sql);</span><br><span class="line">            ps.setString(<span class="number">1</span>,userName);</span><br><span class="line">            ps.setString(<span class="number">2</span>,userPassword);</span><br><span class="line">            rs=ps.executeQuery();</span><br><span class="line">            <span class="keyword">if</span>(rs.next())&#123;</span><br><span class="line">                flag=<span class="literal">true</span>;</span><br><span class="line">                id=rs.getInt(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            DBUtil.close(conn,ps,rs);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(flag)&#123;</span><br><span class="line">            <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession();</span><br><span class="line">            session.setAttribute(<span class="string">&quot;id&quot;</span>,id);</span><br><span class="line">            session.setAttribute(<span class="string">&quot;userName&quot;</span>,userName);</span><br><span class="line">            <span class="keyword">if</span>(<span class="string">&quot;1&quot;</span>.equals(request.getParameter(<span class="string">&quot;flag&quot;</span>)))</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="type">Cookie</span> <span class="variable">userNameLoginCookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;userName&quot;</span>, userName);</span><br><span class="line">                <span class="type">Cookie</span> <span class="variable">userPasswordLoginCookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;userPassword&quot;</span>, userPassword);</span><br><span class="line">                userNameLoginCookie.setMaxAge(<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span>*<span class="number">10</span>);</span><br><span class="line">                userPasswordLoginCookie.setMaxAge(<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span>*<span class="number">10</span>);</span><br><span class="line">                userNameLoginCookie.setPath(request.getContextPath());</span><br><span class="line">                userPasswordLoginCookie.setPath(request.getContextPath());</span><br><span class="line">                response.addCookie(userNameLoginCookie);</span><br><span class="line">                response.addCookie(userPasswordLoginCookie);</span><br><span class="line">            &#125;</span><br><span class="line">            response.sendRedirect(request.getContextPath()+<span class="string">&quot;/list&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            response.sendRedirect(request.getContextPath()+<span class="string">&quot;/error.jsp&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.oa.dept.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.xiaoguan.oa.dept.utils.DBUtil;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/welcome&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WelcomeServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        Cookie[] cookies = request.getCookies();</span><br><span class="line">        String userPassword=<span class="literal">null</span>;</span><br><span class="line">        String userName=<span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (cookies != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (Cookie cookie : cookies) &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> cookie.getName();</span><br><span class="line">                <span class="keyword">if</span>(<span class="string">&quot;userName&quot;</span>.equals(name))&#123;</span><br><span class="line">                     userName = cookie.getValue();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(<span class="string">&quot;userPassword&quot;</span>.equals(name))&#123;</span><br><span class="line">                     userPassword = cookie.getValue();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(userName!=<span class="literal">null</span>&amp;&amp;userPassword!=<span class="literal">null</span>)&#123;</span><br><span class="line">            Connection conn=<span class="literal">null</span>;</span><br><span class="line">            PreparedStatement ps=<span class="literal">null</span>;</span><br><span class="line">            ResultSet rs=<span class="literal">null</span>;</span><br><span class="line">            <span class="type">boolean</span> flag=<span class="literal">false</span>;</span><br><span class="line">            <span class="type">int</span> id=<span class="number">0</span>;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                conn= DBUtil.getConnection();</span><br><span class="line">                String sql=<span class="string">&quot;select id from login where 登录名=? and 登录密码=?&quot;</span>;</span><br><span class="line">                ps=conn.prepareStatement(sql);</span><br><span class="line">                ps.setString(<span class="number">1</span>,userName);</span><br><span class="line">                ps.setString(<span class="number">2</span>,userPassword);</span><br><span class="line">                rs=ps.executeQuery();</span><br><span class="line">                <span class="keyword">if</span>(rs.next())&#123;</span><br><span class="line">                    flag=<span class="literal">true</span>;</span><br><span class="line">                    id=rs.getInt(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">                DBUtil.close(conn,ps,rs);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(flag) &#123;</span><br><span class="line">                <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession();</span><br><span class="line">                session.setAttribute(<span class="string">&quot;id&quot;</span>, id);</span><br><span class="line">                session.setAttribute(<span class="string">&quot;userName&quot;</span>, userName);</span><br><span class="line">                response.sendRedirect(request.getContextPath() + <span class="string">&quot;/list&quot;</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                response.sendRedirect(request.getContextPath()+<span class="string">&quot;/index.jsp&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            response.sendRedirect(request.getContextPath()+<span class="string">&quot;/index.jsp&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.oa.dept.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.xiaoguan.oa.dept.bean.Dept;</span><br><span class="line"><span class="keyword">import</span> com.xiaoguan.oa.dept.utils.DBUtil;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpSession;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&#123;&quot;/list&quot;,&quot;/detail&quot;,&quot;/delete&quot;,&quot;/add&quot;,&quot;/modify&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeptServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession(<span class="literal">false</span>);</span><br><span class="line">        <span class="keyword">if</span>(session!=<span class="literal">null</span>&amp;&amp;session.getAttribute(<span class="string">&quot;id&quot;</span>)!=<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="type">String</span> <span class="variable">servletPath</span> <span class="operator">=</span> request.getServletPath();</span><br><span class="line">            <span class="keyword">if</span>(<span class="string">&quot;/list&quot;</span>.equals(servletPath))&#123;</span><br><span class="line">                doList(request,response);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;/detail&quot;</span>.equals(servletPath)) &#123;</span><br><span class="line">                doDetail(request,response);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;/delete&quot;</span>.equals(servletPath)) &#123;</span><br><span class="line">                doDel(request,response);</span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;/add&quot;</span>.equals(servletPath)) &#123;</span><br><span class="line">                doAdd(request,response);</span><br><span class="line"></span><br><span class="line">            &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;/modify&quot;</span>.equals(servletPath)) &#123;</span><br><span class="line">                doModify(request,response);</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                System.out.println(<span class="string">&quot;路径有误！&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            response.sendRedirect(request.getContextPath()+<span class="string">&quot;/welcome&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">doModify</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        request.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">deptno</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;deptno&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">dname</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;dname&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">loc</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;loc&quot;</span>);</span><br><span class="line">        Connection conn=<span class="literal">null</span>;</span><br><span class="line">        PreparedStatement ps=<span class="literal">null</span>;</span><br><span class="line">        <span class="type">int</span> count=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn= DBUtil.getConnection();</span><br><span class="line">            String sql=<span class="string">&quot;update dept set dname=?,loc=? where deptno=?&quot;</span>;</span><br><span class="line">            ps=conn.prepareStatement(sql);</span><br><span class="line">            ps.setString(<span class="number">3</span>,deptno);</span><br><span class="line">            ps.setString(<span class="number">1</span>,dname);</span><br><span class="line">            ps.setString(<span class="number">2</span>,loc);</span><br><span class="line">            count=ps.executeUpdate();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            DBUtil.close(conn,ps,<span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(count==<span class="number">1</span>)&#123;</span><br><span class="line">            response.sendRedirect(request.getContextPath()+<span class="string">&quot;/list&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            response.sendRedirect(request.getContextPath()+<span class="string">&quot;/error.jsp&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">doAdd</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        request.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">deptno</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;deptno&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">dname</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;dname&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">loc</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;loc&quot;</span>);</span><br><span class="line">        Connection conn=<span class="literal">null</span>;</span><br><span class="line">        PreparedStatement ps=<span class="literal">null</span>;</span><br><span class="line">        <span class="type">int</span> count=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn= DBUtil.getConnection();</span><br><span class="line">            String sql=<span class="string">&quot;insert into dept(deptno,dname,loc) values(?,?,?)&quot;</span>;</span><br><span class="line">            ps=conn.prepareStatement(sql);</span><br><span class="line">            ps.setString(<span class="number">1</span>,deptno);</span><br><span class="line">            ps.setString(<span class="number">2</span>,dname);</span><br><span class="line">            ps.setString(<span class="number">3</span>,loc);</span><br><span class="line">            count=ps.executeUpdate();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            DBUtil.close(conn,ps,<span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(count==<span class="number">1</span>)&#123;</span><br><span class="line">            response.sendRedirect(request.getContextPath()+<span class="string">&quot;/list&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            response.sendRedirect(request.getContextPath()+<span class="string">&quot;/error.jsp&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">doDel</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">deptno</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;deptno&quot;</span>);</span><br><span class="line">        Connection conn=<span class="literal">null</span>;</span><br><span class="line">        PreparedStatement ps=<span class="literal">null</span>;</span><br><span class="line">        ResultSet rs=<span class="literal">null</span>;</span><br><span class="line">        <span class="type">int</span> count=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn=DBUtil.getConnection();</span><br><span class="line">            String sql=<span class="string">&quot;delete from dept where deptno=?&quot;</span>;</span><br><span class="line">            ps=conn.prepareStatement(sql);</span><br><span class="line">            ps.setString(<span class="number">1</span>,deptno);</span><br><span class="line">            count=ps.executeUpdate();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            DBUtil.close(conn,ps,rs);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(count==<span class="number">1</span>)&#123;</span><br><span class="line">            response.sendRedirect(request.getContextPath()+<span class="string">&quot;/list&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            response.sendRedirect(request.getContextPath()+<span class="string">&quot;/error.jsp&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">doDetail</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">deptno</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;deptno&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">flag</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;f&quot;</span>);</span><br><span class="line">        Connection conn=<span class="literal">null</span>;</span><br><span class="line">        PreparedStatement ps=<span class="literal">null</span>;</span><br><span class="line">        ResultSet rs=<span class="literal">null</span>;</span><br><span class="line">        Dept dept=<span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn=DBUtil.getConnection();</span><br><span class="line">            String sql=<span class="string">&quot;select dname,loc from dept where deptno=?&quot;</span>;</span><br><span class="line">            ps=conn.prepareStatement(sql);</span><br><span class="line">            ps.setString(<span class="number">1</span>,deptno);</span><br><span class="line">            rs=ps.executeQuery();</span><br><span class="line">            <span class="keyword">if</span>(rs.next())&#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">dname</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;dname&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">loc</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;loc&quot;</span>);</span><br><span class="line">                dept=<span class="keyword">new</span> <span class="title class_">Dept</span>(deptno,dname,loc);</span><br><span class="line">                request.setAttribute(<span class="string">&quot;dept&quot;</span>,dept);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            DBUtil.close(conn,ps,rs);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;d&quot;</span>.equals(flag))&#123;</span><br><span class="line">            request.getRequestDispatcher(<span class="string">&quot;/detail.jsp&quot;</span>).forward(request,response);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;m&quot;</span>.equals(flag)) &#123;</span><br><span class="line">            request.getRequestDispatcher(<span class="string">&quot;/edit.jsp&quot;</span>).forward(request,response);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;f传参参数有误！&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">doList</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        List&lt;Dept&gt; depts = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        Connection conn=<span class="literal">null</span>;</span><br><span class="line">        PreparedStatement ps=<span class="literal">null</span>;</span><br><span class="line">        ResultSet rs=<span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn=DBUtil.getConnection();</span><br><span class="line">            String sql=<span class="string">&quot;select deptno,dname,loc from dept&quot;</span>;</span><br><span class="line">            ps= conn.prepareStatement(sql);</span><br><span class="line">            rs=ps.executeQuery();</span><br><span class="line">            <span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">                String deptno=rs.getString(<span class="string">&quot;deptno&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">dname</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;dname&quot;</span>);</span><br><span class="line">                String loc=rs.getString(<span class="string">&quot;loc&quot;</span>);</span><br><span class="line">                Dept dept=<span class="keyword">new</span> <span class="title class_">Dept</span>(deptno,dname,loc);</span><br><span class="line">                depts.add(dept);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            DBUtil.close(conn,ps,rs);</span><br><span class="line">        &#125;</span><br><span class="line">        request.setAttribute(<span class="string">&quot;deptList&quot;</span>,depts);</span><br><span class="line">        request.getRequestDispatcher(<span class="string">&quot;/list.jsp&quot;</span>).forward(request,response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="在XML里设置session存在时间代码"><a href="#在XML里设置session存在时间代码" class="headerlink" title="在XML里设置session存在时间代码"></a>在XML里设置session存在时间代码</h3><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;https://jakarta.ee/xml/ns/jakartaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;https://jakarta.ee/xml/ns/jakartaee https://jakarta.ee/xml/ns/jakartaee/web-app_6_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;6.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--session超时时长为30分钟--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>/welcome<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">session-config</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">session-timeout</span>&gt;</span>30<span class="tag">&lt;/<span class="name">session-timeout</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">session-config</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>计算机学习</category>
        <category>Java</category>
        <category>JavaWeb</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>JavaWeb</tag>
        <tag>Cookie</tag>
        <tag>Session</tag>
        <tag>XML</tag>
      </tags>
  </entry>
  <entry>
    <title>AJAX学习（二）</title>
    <url>/AJAX/AJAX%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
    <content><![CDATA[<h3 id="AJAX学习（二）"><a href="#AJAX学习（二）" class="headerlink" title="AJAX学习（二）"></a>AJAX学习（二）</h3><span id="more"></span>

<h5 id="相关学习代码"><a href="#相关学习代码" class="headerlink" title="相关学习代码"></a>相关学习代码</h5><figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>发送ajax get 请求<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;btm&quot;</span>).<span class="property">onclick</span>=<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">var</span> xmlHttpRequest = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span></span><br><span class="line"><span class="language-javascript">          xmlHttpRequest.<span class="property">onreadystatechange</span>=<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">readyState</span>==<span class="number">4</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">status</span>==<span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;myspan&quot;</span>).<span class="property">innerHTML</span>=<span class="variable language_">this</span>.<span class="property">responseText</span>;</span></span><br><span class="line"><span class="language-javascript">              &#125;<span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">status</span>);</span></span><br><span class="line"><span class="language-javascript">              &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">var</span> currutTime = <span class="keyword">new</span> <span class="title class_">Date</span>().<span class="title function_">getTime</span>();</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">var</span> usercode = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;usercode&quot;</span>).<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">var</span> username = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;username&quot;</span>).<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript">          xmlHttpRequest.<span class="title function_">open</span>(<span class="string">&quot;GET&quot;</span>,<span class="string">&quot;/old/ajax2?t=&quot;</span>+currutTime+<span class="string">&quot;&amp;usercode=&quot;</span>+usercode+<span class="string">&quot;&amp;username=&quot;</span>+username,<span class="literal">true</span>);</span></span><br><span class="line"><span class="language-javascript">          xmlHttpRequest.<span class="title function_">send</span>();</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">usercode<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;usercode&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">username<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btm&quot;</span>&gt;</span>发送ajax get请求<span class="tag">&lt;/<span class="name">button</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;myspan&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.request;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/ajax2&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ajax2Servlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        req.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">usercode</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;usercode&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        resp.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">        PrintWriter out=resp.getWriter();</span><br><span class="line">        <span class="comment">//out.print(&quot;&lt;font color=&#x27;red&#x27;&gt;用户名已存在&lt;/font&gt;&quot;);</span></span><br><span class="line">        out.print(usercode+<span class="string">&quot;,&quot;</span>+username);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>ajax post请求<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;bnt&quot;</span>).<span class="property">onclick</span>=<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">var</span> xmlHttpRequest = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span></span><br><span class="line"><span class="language-javascript">          xmlHttpRequest.<span class="property">onreadystatechange</span>=<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">readyState</span> == <span class="number">4</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="keyword">if</span> (<span class="variable language_">this</span>.<span class="property">status</span> == <span class="number">200</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;mydiv&quot;</span>).<span class="property">innerHTML</span>=<span class="variable language_">this</span>.<span class="property">responseText</span>;</span></span><br><span class="line"><span class="language-javascript">              &#125;<span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">status</span>);</span></span><br><span class="line"><span class="language-javascript">              &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">          xmlHttpRequest.<span class="title function_">open</span>(<span class="string">&quot;POST&quot;</span>,<span class="string">&quot;/old/ajax3&quot;</span>,<span class="literal">true</span>);</span></span><br><span class="line"><span class="language-javascript">          xmlHttpRequest.<span class="title function_">setRequestHeader</span>(<span class="string">&quot;Content-Type&quot;</span>,<span class="string">&quot;application/x-www-form-urlencoded&quot;</span>)<span class="comment">//要放在open后面send之前,表单设计格式</span></span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">var</span> username = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;username&quot;</span>).<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">var</span> password = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;password&quot;</span>).<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript">          xmlHttpRequest.<span class="title function_">send</span>(<span class="string">&quot;username=&quot;</span>+username+<span class="string">&quot;&amp;password=&quot;</span>+password);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">用户名<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">密码<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">id</span>=<span class="string">&quot;password&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;bnt&quot;</span>&gt;</span>发送post请求<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;mydiv&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.request;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/ajax3&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ajax3Servlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        resp.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">        PrintWriter out=resp.getWriter();</span><br><span class="line">        <span class="comment">//out.print(&quot;&lt;font color=&#x27;red&#x27;&gt;用户名已经存在！&lt;/font&gt;&quot;);</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        out.print(username+<span class="string">&quot;,&quot;</span>+password);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>POSt验证用户名是否可用<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;username&quot;</span>).<span class="property">onfocus</span>=<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;tip&quot;</span>).<span class="property">innerHTML</span>=<span class="string">&quot;&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;username&quot;</span>).<span class="property">onblur</span>=<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">var</span> xmlHttpRequest = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span></span><br><span class="line"><span class="language-javascript">          xmlHttpRequest.<span class="property">onreadystatechange</span>=<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">readyState</span>==<span class="number">4</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">              <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">status</span>==<span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;tip&quot;</span>).<span class="property">innerHTML</span>=<span class="variable language_">this</span>.<span class="property">responseText</span>;</span></span><br><span class="line"><span class="language-javascript">              &#125;<span class="keyword">else</span>&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">status</span>)</span></span><br><span class="line"><span class="language-javascript">              &#125;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">          xmlHttpRequest.<span class="title function_">open</span>(<span class="string">&quot;POST&quot;</span>,<span class="string">&quot;/old/ajax4&quot;</span>,<span class="literal">true</span>);</span></span><br><span class="line"><span class="language-javascript">          xmlHttpRequest.<span class="title function_">setRequestHeader</span>(<span class="string">&quot;Content-Type&quot;</span>,<span class="string">&quot;application/x-www-form-urlencoded&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">var</span> username = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;username&quot;</span>).<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript">          xmlHttpRequest.<span class="title function_">send</span>(<span class="string">&quot;username=&quot;</span>+username);</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">用户名<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;tip&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.request;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/ajax4&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ajax4Servlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">        request.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        PrintWriter out=response.getWriter();</span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        Connection conn=<span class="literal">null</span>;</span><br><span class="line">        PreparedStatement ps=<span class="literal">null</span>;</span><br><span class="line">        ResultSet rs=<span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class="line">            conn=DriverManager.getConnection(<span class="string">&quot;jdbc:mysql://localhost:3306/xiaoguan&quot;</span>,<span class="string">&quot;root&quot;</span>,<span class="string">&quot;68963120g&quot;</span>);</span><br><span class="line">            String sql=<span class="string">&quot;select 登录名 from login where 登录名=?&quot;</span>;</span><br><span class="line">            ps=conn.prepareStatement(sql);</span><br><span class="line">            ps.setString(<span class="number">1</span>,username);</span><br><span class="line">            rs=ps.executeQuery();</span><br><span class="line">            <span class="keyword">if</span>(rs.next())&#123;</span><br><span class="line">                out.print(<span class="string">&quot;&lt;font color=green&gt;用户名可用&lt;/font&gt;&quot;</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                out.print(<span class="string">&quot;&lt;font color=red&gt;用户名不可用&lt;/font&gt;&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (rs!=<span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    rs.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (ps!=<span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    ps.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (rs!=<span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    rs.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>发送ajax请求,显示学生列表<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;btm&quot;</span>).<span class="property">onclick</span>=<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> xmlHttpRequest = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span></span><br><span class="line"><span class="language-javascript">                xmlHttpRequest.<span class="property">onreadystatechange</span>=<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">readyState</span>==<span class="number">4</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">status</span>==<span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="comment">//document.getElementById(&quot;info&quot;).innerHTML=xmlHttpRequest.responseText;</span></span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">var</span> stuList = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">this</span>.<span class="property">responseText</span>);</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">var</span> html=<span class="string">&quot;&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">for</span>(<span class="keyword">var</span> i=<span class="number">0</span>;i&lt;stuList.<span class="property">length</span>;i++)&#123;</span></span><br><span class="line"><span class="language-javascript">                                <span class="keyword">var</span> stu=stuList[i];</span></span><br><span class="line"><span class="language-javascript">                                html+=<span class="string">&quot;&lt;tr&gt;&quot;</span></span></span><br><span class="line"><span class="language-javascript">                                html+=<span class="string">&quot; &lt;td&gt;&quot;</span>+(i+<span class="number">1</span>)+<span class="string">&quot;&lt;/td&gt;&quot;</span></span></span><br><span class="line"><span class="language-javascript">                                html+=<span class="string">&quot;&lt;td&gt;&quot;</span>+stu.<span class="property">name</span>+<span class="string">&quot;&lt;/td&gt;&quot;</span></span></span><br><span class="line"><span class="language-javascript">                                html+=<span class="string">&quot;&lt;td&gt;&quot;</span>+stu.<span class="property">age</span>+<span class="string">&quot;&lt;/td&gt;&quot;</span></span></span><br><span class="line"><span class="language-javascript">                                html+=<span class="string">&quot;&lt;td&gt;&quot;</span>+stu.<span class="property">addr</span>+<span class="string">&quot;&lt;/td&gt;&quot;</span></span></span><br><span class="line"><span class="language-javascript">                                html+=<span class="string">&quot;&lt;/tr&gt;&quot;</span></span></span><br><span class="line"><span class="language-javascript">                            &#125;</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;info&quot;</span>).<span class="property">innerHTML</span>=html;</span></span><br><span class="line"><span class="language-javascript">                        &#125;<span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">status</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                xmlHttpRequest.<span class="title function_">open</span>(<span class="string">&quot;GET&quot;</span>,<span class="string">&quot;/old/ajax5&quot;</span>,<span class="literal">true</span>);</span></span><br><span class="line"><span class="language-javascript">                xmlHttpRequest.<span class="title function_">send</span>();</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;显示学员列表&quot;</span> <span class="attr">id</span>=<span class="string">&quot;btm&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span> <span class="attr">width</span>=<span class="string">&quot;50%&quot;</span> <span class="attr">border</span>=<span class="string">&quot;1px&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">th</span>&gt;</span>序号<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">th</span>&gt;</span>姓名<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">th</span>&gt;</span>年龄<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">th</span>&gt;</span>住址<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">tbody</span> <span class="attr">id</span>=<span class="string">&quot;info&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--&lt;tr&gt;</span></span><br><span class="line"><span class="comment">      &lt;td&gt;1&lt;/td&gt;</span></span><br><span class="line"><span class="comment">      &lt;td&gt;admin&lt;/td&gt;</span></span><br><span class="line"><span class="comment">      &lt;td&gt;123456&lt;/td&gt;</span></span><br><span class="line"><span class="comment">      &lt;td&gt;admin&lt;/td&gt;</span></span><br><span class="line"><span class="comment">    &lt;/tr&gt;--&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.request;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/ajax5&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ajax5Servlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        resp.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">        <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> resp.getWriter();</span><br><span class="line">        <span class="comment">/*StringBuilder html=new StringBuilder();</span></span><br><span class="line"><span class="comment">        html.append(&quot;&lt;tr&gt;&quot;);</span></span><br><span class="line"><span class="comment">        html.append(&quot;  &lt;td&gt;1&lt;/td&gt;&quot;);</span></span><br><span class="line"><span class="comment">        html.append(&quot;  &lt;td&gt;admin&lt;/td&gt;&quot;);</span></span><br><span class="line"><span class="comment">        html.append(&quot;  &lt;td&gt;123456&lt;/td&gt;&quot;);</span></span><br><span class="line"><span class="comment">        html.append(&quot;  &lt;td&gt;admin&lt;/td&gt;&quot;);</span></span><br><span class="line"><span class="comment">        html.append(&quot;&lt;/tr&gt;&quot;);</span></span><br><span class="line"><span class="comment">        out.print(html);*/</span></span><br><span class="line">        <span class="comment">//拼接html换成json格式字符串</span></span><br><span class="line">        String json=<span class="string">&quot;[&#123;\&quot;name\&quot;:\&quot;王五\&quot;,\&quot;age\&quot;:20,\&quot;addr\&quot;:\&quot;北京大兴区\&quot;&#125;,&#123;\&quot;name\&quot;:\&quot;李四\&quot;,\&quot;age\&quot;:30,\&quot;addr\&quot;:\&quot;北京海淀区\&quot;&#125;]&quot;</span>;</span><br><span class="line">        out.print(json);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>计算机学习</category>
        <category>AJAX</category>
      </categories>
      <tags>
        <tag>AJAX</tag>
      </tags>
  </entry>
  <entry>
    <title>AJAX学习（四）</title>
    <url>/AJAX/AJAX%E5%AD%A6%E4%B9%A0%EF%BC%88%E5%9B%9B%EF%BC%89/</url>
    <content><![CDATA[<h3 id="AJAX学习（四）"><a href="#AJAX学习（四）" class="headerlink" title="AJAX学习（四）"></a>AJAX学习（四）</h3><span id="more"></span>

<h5 id="相关学习代码"><a href="#相关学习代码" class="headerlink" title="相关学习代码"></a>相关学习代码</h5><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.bWebServlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/hello&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"><span class="comment">//        response.setHeader(&quot;Access-Control-Allow-Origin&quot;,&quot;http://localhost:8080&quot;);</span></span><br><span class="line">        response.setHeader(<span class="string">&quot;Access-Control-Allow-Origin&quot;</span>,<span class="string">&quot;*&quot;</span>);<span class="comment">//允许全部</span></span><br><span class="line">        response.getWriter().print(<span class="string">&quot;hello ajax!!!&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.bWebServlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/jsonp1&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JsonpServlet1</span> <span class="keyword">extends</span> <span class="title class_">HelloServlet</span>&#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"><span class="comment">//        System.out.print(&quot;jsonp完成跨域&quot;);</span></span><br><span class="line"><span class="comment">//        response.getWriter().print(&quot;sayHello()&quot;);</span></span><br><span class="line">        <span class="type">String</span> <span class="variable">fun</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;fun&quot;</span>);</span><br><span class="line">        response.getWriter().print(fun+<span class="string">&quot;(&#123;\&quot;name\&quot;:\&quot;jsonsp1\&quot;&#125;)&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.bWebServlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="meta">@WebServlet(&quot;/jsonp2&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JsonpServlet2</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">fun</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;fun&quot;</span>);</span><br><span class="line">        response.getWriter().print(fun+<span class="string">&quot;(&#123;\&quot;username\&quot;:\&quot;kangkang\&quot;&#125;)&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.bWebServlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="meta">@WebServlet(&quot;/jsonp3&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JsonpServlet3</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">callback</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;fun&quot;</span>);</span><br><span class="line">        response.getWriter().print(callback+<span class="string">&quot;(&#123;\&quot;username\&quot;:\&quot;Lily\&quot;&#125;)&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.bWebServlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/user/reg&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserRegServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        request.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">username</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">password</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">        response.getWriter().print(username+<span class="string">&quot;:&quot;</span>+password);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>b应用的index页面<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">h1</span>&gt;</span>应用b的index页面<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="code"><pre><span class="line"><span class="title function_">alert</span>(<span class="string">&quot;b应用中的js&quot;</span>);</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>测试ajax能否跨域<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">window</span>.<span class="property">onload</span>= <span class="function">() =&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;btn&quot;</span>).<span class="property">onclick</span>= <span class="function">() =&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> xmlHttpRequest = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span></span><br><span class="line"><span class="language-javascript">      xmlHttpRequest.<span class="property">onreadystatechange</span>= <span class="function">()=&gt;</span> &#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">if</span> (xmlHttpRequest.<span class="property">readyState</span> == <span class="number">4</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="keyword">if</span> (xmlHttpRequest.<span class="property">status</span> &gt;= <span class="number">200</span>||xmlHttpRequest.<span class="property">status</span>&lt;<span class="number">300</span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;mydiv&quot;</span>).<span class="property">innerHTML</span>=xmlHttpRequest.<span class="property">responseText</span>;</span></span><br><span class="line"><span class="language-javascript">          &#125;<span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="title function_">alert</span>(xmlHttpRequest.<span class="property">status</span>);</span></span><br><span class="line"><span class="language-javascript">          &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">       xmlHttpRequest.<span class="title function_">open</span>(<span class="string">&quot;GET&quot;</span>,<span class="string">&quot;http://localhost:8081/b/hello&quot;</span>,<span class="literal">true</span>);</span></span><br><span class="line"><span class="language-javascript">       xmlHttpRequest.<span class="title function_">send</span>();</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>发送ajax请求<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;mydiv&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>jsonp实现跨域<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">function</span> <span class="title function_">sayHello</span>(<span class="params">data</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        <span class="title function_">alert</span>(<span class="string">&quot;hello,&quot;</span>+data.<span class="property">name</span>);</span></span><br><span class="line"><span class="language-javascript">      &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;http://localhost:8081/b/jsonp1?fun=sayHello&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;ch&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>jsonp跨域<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;script type=&quot;text/javascript&quot; src=&quot;http://localhost:8081/b/jsonp2?fun=sayHello&quot;&gt;&lt;/script&gt;--&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">  <span class="keyword">function</span> <span class="title function_">sayHello</span>(<span class="params">data</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;mydiv&quot;</span>).<span class="property">innerHTML</span>=data.<span class="property">username</span>;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript">  <span class="variable language_">window</span>.<span class="property">onload</span>=<span class="function">()=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">    <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;mybtn&quot;</span>).<span class="property">onclick</span>=<span class="function">()=&gt;</span>&#123;</span></span><br><span class="line"><span class="language-javascript">      <span class="keyword">var</span> htmlScriptElement = <span class="variable language_">document</span>.<span class="title function_">createElement</span>(<span class="string">&quot;script&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">      htmlScriptElement.<span class="property">type</span>=<span class="string">&quot;text/javascript&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">      htmlScriptElement.<span class="property">src</span>=<span class="string">&quot;http://localhost:8081/b/jsonp2?fun=sayHello&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">      <span class="variable language_">document</span>.<span class="title function_">getElementsByTagName</span>(<span class="string">&quot;body&quot;</span>)[<span class="number">0</span>].<span class="title function_">appendChild</span>(htmlScriptElement);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">  &#125;</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;mybtn&quot;</span>&gt;</span>发送jsonp<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;mydiv&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>jsonp的JQuery封装解决ajax跨域问题<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;/a/js/Jquery.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">    <span class="keyword">function</span> <span class="title function_">sayHello</span>(<span class="params">data</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        $(<span class="string">&quot;#mydiv&quot;</span>).<span class="title function_">html</span>(data.<span class="property">username</span>);</span></span><br><span class="line"><span class="language-javascript">    &#125;</span></span><br><span class="line"><span class="language-javascript">    $(<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">      $(<span class="string">&quot;#btn&quot;</span>).<span class="title function_">click</span>(<span class="keyword">function</span> (<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">        $.<span class="title function_">ajax</span>(&#123;</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">type</span>:<span class="string">&quot;GET&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">url</span>:<span class="string">&quot;http://localhost:8081/b/jsonp3&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">dataType</span>:<span class="string">&quot;jsonp&quot;</span>,<span class="comment">//指定数据类型是jsonp格式</span></span></span><br><span class="line"><span class="language-javascript">          <span class="attr">jsonp</span>:<span class="string">&quot;fun&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="attr">jsonpCallback</span>:<span class="string">&quot;sayHello&quot;</span>,</span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// success:function (data)&#123;</span></span></span><br><span class="line"><span class="language-javascript">          <span class="comment">//   $(&quot;#mydiv&quot;).html(data.username);</span></span></span><br><span class="line"><span class="language-javascript">          <span class="comment">// &#125;</span></span></span><br><span class="line"><span class="language-javascript">        &#125;)</span></span><br><span class="line"><span class="language-javascript">      &#125;)</span></span><br><span class="line"><span class="language-javascript">    &#125;)</span></span><br><span class="line"><span class="language-javascript"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">id</span>=<span class="string">&quot;btn&quot;</span>&gt;</span>jsonp的JQuery封装解决ajax跨域问题<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;mydiv&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;en&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>a应用的index页面<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://localhost:8081/b/index.html&quot;</span>&gt;</span>b的index页面<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;http://localhost:8081/b/user/reg&quot;</span> <span class="attr">method</span>=<span class="string">&quot;POST&quot;</span>&gt;</span></span><br><span class="line">    用户名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    密码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;password&quot;</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;注册&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">button</span> <span class="attr">onclick</span>=<span class="string">&quot;window.location.href=&#x27;http://localhost:8081/b/index.html&#x27;&quot;</span>&gt;</span>b的index页面（跨域访问问题）<span class="tag">&lt;/<span class="name">button</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;http://localhost:8081/b/my.js&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>计算机学习</category>
        <category>AJAX</category>
      </categories>
      <tags>
        <tag>AJAX</tag>
      </tags>
  </entry>
  <entry>
    <title>HttpServlet注解</title>
    <url>/JavaWeb/HttpServlet%E6%B3%A8%E8%A7%A3/</url>
    <content><![CDATA[<h3 id="注解代替xml文件"><a href="#注解代替xml文件" class="headerlink" title="注解代替xml文件"></a>注解代替xml文件</h3><span id="more"></span>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.learn;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebInitParam;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(name=&quot;wstest&quot;,urlPatterns = &#123;&quot;/c&quot;,&quot;/d&quot;&#125;,initParams = &#123;@WebInitParam(name=&quot;1&quot;,value = &quot;1&quot;),@WebInitParam(name=&quot;xiaoguan&quot;,</span></span><br><span class="line"><span class="meta">        value = &quot;520&quot;)&#125;,loadOnStartup = 1)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">AServlet</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;服务器启动&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="comment">//System.out.println(this.getServletName());</span></span><br><span class="line">        <span class="comment">//System.out.println(request.getServletPath());</span></span><br><span class="line">        <span class="comment">//System.out.println(request.getContextPath());</span></span><br><span class="line">        System.out.println(<span class="built_in">this</span>.getInitParameter(<span class="string">&quot;xiaoguan&quot;</span>));</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.learn;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="meta">@WebServlet(&quot;/e&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(req.getServerName());</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>计算机学习</category>
        <category>Java</category>
        <category>JavaWeb</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>JavaWeb</tag>
        <tag>Servlet</tag>
      </tags>
  </entry>
  <entry>
    <title>Filter练习代码</title>
    <url>/JavaWeb/Filter%E7%BB%83%E4%B9%A0%E4%BB%A3%E7%A0%81/</url>
    <content><![CDATA[<h3 id="Filter练习代码"><a href="#Filter练习代码" class="headerlink" title="Filter练习代码"></a>Filter练习代码</h3><span id="more"></span>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="meta">@WebServlet(&quot;/a.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;AServlet执行了&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="meta">@WebServlet(&quot;/b.do&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;BServlet执行了&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.*;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebFilter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="meta">@WebFilter(&#123;&quot;*.do&quot;,&quot;/abc&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Filter</span> <span class="keyword">implements</span> <span class="title class_">jakarta</span>.servlet.Filter &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Filter</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;无参数构造方法执行了&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">        System.out.println(filterConfig.getFilterName());</span><br><span class="line">        System.out.println(<span class="string">&quot;初始化执行了&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest request, ServletResponse response, FilterChain chain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;doFilter开始执行了&quot;</span>);</span><br><span class="line">        chain.doFilter(request,response);</span><br><span class="line">        System.out.println(<span class="string">&quot;doFilter执行结束&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;destory执行了&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;https://jakarta.ee/xml/ns/jakartaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;https://jakarta.ee/xml/ns/jakartaee https://jakarta.ee/xml/ns/jakartaee/web-app_6_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;6.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>Gilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>com.xiaoguan.test.Filter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>Gilter<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/b.do<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>计算机学习</category>
        <category>Java</category>
        <category>JavaWeb</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>JavaWeb</tag>
        <tag>Filter</tag>
      </tags>
  </entry>
  <entry>
    <title>JDBC在JavaWeb中的应用</title>
    <url>/JavaWeb/JDBC%E5%9C%A8JavaWeb%E4%B8%AD%E7%9A%84%E5%BA%94%E7%94%A8/</url>
    <content><![CDATA[<h3 id="JDBC经典代码"><a href="#JDBC经典代码" class="headerlink" title="JDBC经典代码"></a>JDBC经典代码</h3><span id="more"></span>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.javaweb.servlet;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">StudentServlet</span> <span class="keyword">implements</span> <span class="title class_">Servlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(ServletConfig servletConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> ServletConfig <span class="title function_">getServletConfig</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(ServletRequest request, ServletResponse response)</span></span><br><span class="line">            <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html&quot;</span>);</span><br><span class="line">        PrintWriter out=response.getWriter();</span><br><span class="line">        Connection conn=<span class="literal">null</span>;</span><br><span class="line">        PreparedStatement ps=<span class="literal">null</span>;</span><br><span class="line">        ResultSet rs=<span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>);</span><br><span class="line">            String url=<span class="string">&quot;jdbc:mysql://localhost:3306/xiaoguan&quot;</span>;</span><br><span class="line">            String userName=<span class="string">&quot;root&quot;</span>;</span><br><span class="line">            String password=<span class="string">&quot;68963120g&quot;</span>;</span><br><span class="line">            conn= DriverManager.getConnection(url,userName,password);</span><br><span class="line">            String sql=<span class="string">&quot;select id,登录名,登录密码,真实姓名 from t_logintest&quot;</span>;</span><br><span class="line">            ps=conn.prepareStatement(sql);</span><br><span class="line">            rs=ps.executeQuery();</span><br><span class="line">            <span class="keyword">while</span>(rs.next())&#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">id</span> <span class="operator">=</span>rs.getString(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">lgname</span> <span class="operator">=</span>rs.getString(<span class="string">&quot;登录名&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">lgpassword</span> <span class="operator">=</span>rs.getString(<span class="string">&quot;登录密码&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">rlname</span> <span class="operator">=</span>rs.getString(<span class="string">&quot;真实姓名&quot;</span>);</span><br><span class="line">                out.print(id+<span class="string">&quot;,&quot;</span>+lgname+<span class="string">&quot;,&quot;</span>+lgpassword+<span class="string">&quot;,&quot;</span>+rlname+<span class="string">&quot;&lt;br&gt;&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException | SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(rs!=<span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    rs.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (ps != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    ps.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span> (conn != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getServletInfo</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>计算机学习</category>
        <category>Java</category>
        <category>JavaWeb</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>JavaWeb</tag>
        <tag>JDBC</tag>
      </tags>
  </entry>
  <entry>
    <title>HttpServlet练习增删改及相关html页面</title>
    <url>/JavaWeb/HttpServlet%E7%BB%83%E4%B9%A0%E5%A2%9E%E5%88%A0%E6%94%B9%E5%8F%8A%E7%9B%B8%E5%85%B3html%E9%A1%B5%E9%9D%A2/</url>
    <content><![CDATA[<h3 id="HttpServlet练习增删改"><a href="#HttpServlet练习增删改" class="headerlink" title="HttpServlet练习增删改"></a>HttpServlet练习增删改</h3><span id="more"></span>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.oa.index;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.xiaoguan.oa.utils.DBUtil;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ModifyServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest requst, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        requst.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">deptno</span> <span class="operator">=</span> requst.getParameter(<span class="string">&quot;deptno&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">dname</span> <span class="operator">=</span> requst.getParameter(<span class="string">&quot;dname&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">loc</span> <span class="operator">=</span> requst.getParameter(<span class="string">&quot;loc&quot;</span>);</span><br><span class="line">        Connection conn=<span class="literal">null</span>;</span><br><span class="line">        PreparedStatement ps=<span class="literal">null</span>;</span><br><span class="line">        <span class="type">int</span> count=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn= DBUtil.getConnection();</span><br><span class="line">            String sql=<span class="string">&quot;update dept set dname=?,loc=? where deptno=?&quot;</span>;</span><br><span class="line">            ps=conn.prepareStatement(sql);</span><br><span class="line">            ps.setString(<span class="number">3</span>,deptno);</span><br><span class="line">            ps.setString(<span class="number">1</span>,dname);</span><br><span class="line">            ps.setString(<span class="number">2</span>,loc);</span><br><span class="line">            count=ps.executeUpdate();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            DBUtil.close(conn,ps,<span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(count==<span class="number">1</span>)&#123;</span><br><span class="line">            response.sendRedirect(requst.getContextPath()+<span class="string">&quot;/list&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            response.sendRedirect(requst.getContextPath()+<span class="string">&quot;/error.html&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.oa.index;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.xiaoguan.oa.utils.DBUtil;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SaveServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest requst, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        requst.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">deptno</span> <span class="operator">=</span> requst.getParameter(<span class="string">&quot;deptno&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">dname</span> <span class="operator">=</span> requst.getParameter(<span class="string">&quot;dname&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">loc</span> <span class="operator">=</span> requst.getParameter(<span class="string">&quot;loc&quot;</span>);</span><br><span class="line">        Connection conn=<span class="literal">null</span>;</span><br><span class="line">        PreparedStatement ps=<span class="literal">null</span>;</span><br><span class="line">        <span class="type">int</span> count=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn= DBUtil.getConnection();</span><br><span class="line">            String sql=<span class="string">&quot;insert into dept(deptno,dname,loc) values(?,?,?)&quot;</span>;</span><br><span class="line">            ps=conn.prepareStatement(sql);</span><br><span class="line">            ps.setString(<span class="number">1</span>,deptno);</span><br><span class="line">            ps.setString(<span class="number">2</span>,dname);</span><br><span class="line">            ps.setString(<span class="number">3</span>,loc);</span><br><span class="line">            count=ps.executeUpdate();</span><br><span class="line">            System.out.println(count);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            DBUtil.close(conn,ps,<span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(count==<span class="number">1</span>)&#123;</span><br><span class="line">            response.sendRedirect(requst.getContextPath()+<span class="string">&quot;/list&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            response.sendRedirect(requst.getContextPath()+<span class="string">&quot;/error.html&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.oa.index;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.xiaoguan.oa.utils.DBUtil;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.RequestDispatcher;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeleteServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">deptno</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;deptno&quot;</span>);</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">PreparedStatement</span> <span class="variable">ps</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">ResultSet</span> <span class="variable">rs</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = DBUtil.getConnection();</span><br><span class="line">            conn.setAutoCommit(<span class="literal">false</span>);</span><br><span class="line">            <span class="type">String</span> <span class="variable">sql</span> <span class="operator">=</span> <span class="string">&quot;delete from dept where deptno=?&quot;</span>;</span><br><span class="line">            ps = conn.prepareStatement(sql);</span><br><span class="line">            ps.setString(<span class="number">1</span>, deptno);</span><br><span class="line">            count = ps.executeUpdate();</span><br><span class="line">            conn.commit();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">if</span> (conn != <span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    conn.rollback();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException ex) &#123;</span><br><span class="line">                    ex.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            DBUtil.close(conn, ps, rs);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (count == <span class="number">1</span>) &#123;</span><br><span class="line">            response.sendRedirect(request.getContextPath()+<span class="string">&quot;/list&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            response.sendRedirect(request.getContextPath()+<span class="string">&quot;/error.html&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.oa.index;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.xiaoguan.oa.utils.DBUtil;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">EditServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        request.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">contextPath</span> <span class="operator">=</span> <span class="built_in">this</span>.getServletContext().getContextPath();</span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">deptno</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;deptno&quot;</span>);</span><br><span class="line">        PrintWriter out=response.getWriter();</span><br><span class="line">        Connection conn=<span class="literal">null</span>;</span><br><span class="line">        PreparedStatement ps=<span class="literal">null</span>;</span><br><span class="line">        ResultSet rs=<span class="literal">null</span>;</span><br><span class="line">        out.print(<span class="string">&quot;&lt;!DOCTYPE html&gt;&quot;</span>);</span><br><span class="line">        out.print(<span class="string">&quot;&lt;html lang=&#x27;ch&#x27;&gt;&quot;</span>);</span><br><span class="line">        out.print(<span class="string">&quot;  &lt;head&gt;&quot;</span>);</span><br><span class="line">        out.print(<span class="string">&quot;      &lt;meta charset=&#x27;UTF-8&#x27;&gt;&quot;</span>);</span><br><span class="line">        out.print(<span class="string">&quot;      &lt;title&gt;修改部门&lt;/title&gt;&quot;</span>);</span><br><span class="line">        out.print(<span class="string">&quot;  &lt;/head&gt;&quot;</span>);</span><br><span class="line">        out.print(<span class="string">&quot;  &lt;body&gt;&quot;</span>);</span><br><span class="line">        out.print(<span class="string">&quot;      &lt;h1&gt;修改部门&lt;/h1&gt;&quot;</span>);</span><br><span class="line">        out.print(<span class="string">&quot;      &lt;hr&gt;&quot;</span>);</span><br><span class="line">        out.print(<span class="string">&quot;      &lt;form action=&#x27;&quot;</span>+contextPath+<span class="string">&quot;/modify&#x27; method=&#x27;post&#x27;&gt;&quot;</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn= DBUtil.getConnection();</span><br><span class="line">            String sql=<span class="string">&quot;select dname,loc from dept where deptno=?&quot;</span>;</span><br><span class="line">            ps=conn.prepareStatement(sql);</span><br><span class="line">            ps.setString(<span class="number">1</span>,deptno);</span><br><span class="line">            rs=ps.executeQuery();</span><br><span class="line">            <span class="keyword">if</span>(rs.next())&#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">dname</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;dname&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">loc</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;loc&quot;</span>);</span><br><span class="line">                out.print(<span class="string">&quot;          部门编号&lt;input type=&#x27;text&#x27; name=&#x27;deptno&#x27; value=&#x27;&quot;</span>+deptno+<span class="string">&quot;&#x27; readonly/&gt;&lt;br&gt;&quot;</span>);</span><br><span class="line">                out.print(<span class="string">&quot;          部门名称&lt;input type=&#x27;text&#x27; name=&#x27;dname&#x27; value=&#x27;&quot;</span>+dname+<span class="string">&quot;&#x27;/&gt;&lt;br&gt;&quot;</span>);</span><br><span class="line">                out.print(<span class="string">&quot;          部门位置&lt;input type=&#x27;text&#x27; name=&#x27;loc&#x27; value=&#x27;&quot;</span>+loc+<span class="string">&quot;&#x27;/&gt;&lt;br&gt;&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            DBUtil.close(conn,ps,rs);</span><br><span class="line">        &#125;</span><br><span class="line">        out.print(<span class="string">&quot;          &lt;input type=&#x27;submit&#x27; value=&#x27;修改&#x27;&gt;&quot;</span>);</span><br><span class="line">        out.print(<span class="string">&quot;      &lt;/form&gt;&quot;</span>);</span><br><span class="line">        out.print(<span class="string">&quot;  &lt;/body&gt;&quot;</span>);</span><br><span class="line">        out.print(<span class="string">&quot;&lt;/html&gt;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="相关HTML页面"><a href="#相关HTML页面" class="headerlink" title="相关HTML页面"></a>相关HTML页面</h3><figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;ch&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">title</span>&gt;</span>欢迎使用OA系统<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;/test4/list&quot;</span>&gt;</span>查看部门列表<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;ch&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">title</span>&gt;</span>删除失败<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">h1</span>&gt;</span>操作失败<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;javascript:void(0)&quot;</span> <span class="attr">onclick</span>=<span class="string">&quot;document.location.href=&#x27;/oa/list&#x27;&quot;</span>&gt;</span>返回部门列表<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;ch&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">title</span>&gt;</span>修改部门<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">h1</span>&gt;</span>修改部门<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;list.html&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">          部门编号<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;deptno&quot;</span> <span class="attr">value</span>=<span class="string">&quot;10&quot;</span> <span class="attr">readonly</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">          部门名称<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;dname&quot;</span> <span class="attr">value</span>=<span class="string">&quot;销售部&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">          部门位置<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;loc&quot;</span> <span class="attr">value</span>=<span class="string">&quot;北京&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;修改&quot;</span>&gt;</span></span><br><span class="line">      <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;ch&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">title</span>&gt;</span>新增部门<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">h1</span>&gt;</span>新增部门<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">hr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;/test4/save&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">            部门编号<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;deptno&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">            部门名称<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;dname&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">            部门位置<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;loc&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;保存&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>在更改HTML页面时浏览器可能会出现刷新也不更改的情况，这时需要清空浏览器的缓存，如清空谷歌浏览器中的缓存的图片和文件，光只清除cookie不行。</p>
]]></content>
      <categories>
        <category>计算机学习</category>
        <category>Java</category>
        <category>JavaWeb</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>JavaWeb</tag>
        <tag>Servlet</tag>
        <tag>HTML</tag>
      </tags>
  </entry>
  <entry>
    <title>HttpServlet练习查</title>
    <url>/JavaWeb/HttpServlet%E7%BB%83%E4%B9%A0%E6%9F%A5/</url>
    <content><![CDATA[<h3 id="HttpServlet练习查代码"><a href="#HttpServlet练习查代码" class="headerlink" title="HttpServlet练习查代码"></a>HttpServlet练习查代码</h3><span id="more"></span>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.oa.index;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.xiaoguan.oa.utils.DBUtil;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeptListServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        String contextPath=request.getContextPath();</span><br><span class="line">        response.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">        PrintWriter out=response.getWriter();</span><br><span class="line">        out.print(<span class="string">&quot;&lt;!DOCTYPE html&gt;&quot;</span>);</span><br><span class="line">        out.print(<span class="string">&quot;&lt;html lang=&#x27;ch&#x27;&gt;&quot;</span>);</span><br><span class="line">        out.print(<span class="string">&quot;  &lt;head&gt;&quot;</span>);</span><br><span class="line">        out.print(<span class="string">&quot;      &lt;meta charset=&#x27;UTF-8&#x27;&gt;&quot;</span>);</span><br><span class="line">        out.print(<span class="string">&quot;      &lt;title&gt;部门列表&lt;/title&gt;&quot;</span>);</span><br><span class="line">        out.print(<span class="string">&quot;  &lt;/head&gt;&quot;</span>);</span><br><span class="line">        out.print(<span class="string">&quot;  &lt;body&gt;&quot;</span>);</span><br><span class="line">        out.print(<span class="string">&quot;       &lt;h1 align=&#x27;center&#x27;&gt;部门列表&lt;/h1&gt;&quot;</span>);</span><br><span class="line">        out.print(<span class="string">&quot;       &lt;hr&gt;&quot;</span>);</span><br><span class="line">        out.print(<span class="string">&quot;        &lt;table border=&#x27;1px&#x27; align=&#x27;center&#x27; width=&#x27;50%&#x27;&gt;&quot;</span>);</span><br><span class="line">        out.print(<span class="string">&quot;            &lt;tr&gt;&quot;</span>);</span><br><span class="line">        out.print(<span class="string">&quot;                &lt;th&gt;序号&lt;/th&gt;&quot;</span>);</span><br><span class="line">        out.print(<span class="string">&quot;                &lt;th&gt;部门编号&lt;/th&gt;&quot;</span>);</span><br><span class="line">        out.print(<span class="string">&quot;                &lt;th&gt;部门名称&lt;/th&gt;&quot;</span>);</span><br><span class="line">        out.print(<span class="string">&quot;                &lt;th&gt;操作&lt;/th&gt;&quot;</span>);</span><br><span class="line">        out.print(<span class="string">&quot;            &lt;/tr&gt;&quot;</span>);</span><br><span class="line">        Connection conn=<span class="literal">null</span>;</span><br><span class="line">        PreparedStatement ps=<span class="literal">null</span>;</span><br><span class="line">        ResultSet rs=<span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn=DBUtil.getConnection();</span><br><span class="line">            String sql=<span class="string">&quot;select deptno,dname,loc from dept &quot;</span>;</span><br><span class="line">            ps=conn.prepareStatement(sql);</span><br><span class="line">            rs=ps.executeQuery();</span><br><span class="line">            <span class="type">int</span> i=<span class="number">0</span>;</span><br><span class="line">            <span class="keyword">while</span> (rs.next())&#123;</span><br><span class="line">                <span class="type">int</span> deptno=rs.getInt(<span class="string">&quot;deptno&quot;</span>);</span><br><span class="line">                String dname=rs.getString(<span class="string">&quot;dname&quot;</span>);</span><br><span class="line">                String loc=rs.getString(<span class="string">&quot;loc&quot;</span>);</span><br><span class="line">                out.print(<span class="string">&quot;            &lt;tr&gt;&quot;</span>);</span><br><span class="line">                out.print(<span class="string">&quot;                &lt;td&gt;&quot;</span>+(++i)+<span class="string">&quot;&lt;/td&gt;&quot;</span>);</span><br><span class="line">                out.print(<span class="string">&quot;                &lt;td&gt;&quot;</span>+deptno+<span class="string">&quot;&lt;/td&gt;&quot;</span>);</span><br><span class="line">                out.print(<span class="string">&quot;                &lt;td&gt;&quot;</span>+dname+<span class="string">&quot;&lt;/td&gt;&quot;</span>);</span><br><span class="line">                out.print(<span class="string">&quot;                &lt;td&gt;&quot;</span>);</span><br><span class="line">                out.print(<span class="string">&quot;                    &lt;a href=&#x27;&#x27;&gt;删除&lt;/a&gt;&quot;</span>);</span><br><span class="line">                out.print(<span class="string">&quot;                    &lt;a href=&#x27;edit.html&#x27;&gt;修改&lt;/a&gt;&quot;</span>);</span><br><span class="line">                out.print(<span class="string">&quot;                    &lt;a href=&#x27;&quot;</span>+contextPath+<span class="string">&quot;/detail?deptno=&quot;</span>+deptno+<span class="string">&quot;&#x27;&gt;详情&lt;/a&gt;&quot;</span>);</span><br><span class="line">                out.print(<span class="string">&quot;                &lt;/td&gt;&quot;</span>);</span><br><span class="line">                out.print(<span class="string">&quot;            &lt;/tr&gt;&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            DBUtil.close(conn,ps,rs);</span><br><span class="line">        &#125;</span><br><span class="line">        out.print(<span class="string">&quot;        &lt;/table&gt;&quot;</span>);</span><br><span class="line">        out.print(<span class="string">&quot;        &lt;hr&gt;&quot;</span>);</span><br><span class="line">        out.print(<span class="string">&quot;        &lt;a href=&#x27;add.html&#x27;&gt;新增部门&lt;/a&gt;&lt;br&gt;&quot;</span>);</span><br><span class="line">        out.print(<span class="string">&quot;  &lt;/body&gt;&quot;</span>);</span><br><span class="line">        out.print(<span class="string">&quot;&lt;/html&gt;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.oa.index;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.xiaoguan.oa.utils.DBUtil;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DetailServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        resp.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">        PrintWriter out=resp.getWriter();</span><br><span class="line">        <span class="type">String</span> <span class="variable">deptno</span> <span class="operator">=</span> req.getParameter(<span class="string">&quot;deptno&quot;</span>);</span><br><span class="line">        Connection conn=<span class="literal">null</span>;</span><br><span class="line">        PreparedStatement ps=<span class="literal">null</span>;</span><br><span class="line">        ResultSet rs=<span class="literal">null</span>;</span><br><span class="line">        out.print(<span class="string">&quot;&lt;!DOCTYPE html&gt;&quot;</span>);</span><br><span class="line">        out.print(<span class="string">&quot;&lt;html lang=&#x27;ch&#x27;&gt;&quot;</span>);</span><br><span class="line">        out.print(<span class="string">&quot;  &lt;head&gt;&quot;</span>);</span><br><span class="line">        out.print(<span class="string">&quot;      &lt;meta charset=&#x27;UTF-8&#x27;&gt;&quot;</span>);</span><br><span class="line">        out.print(<span class="string">&quot;      &lt;title&gt;部门详情&lt;/title&gt;&quot;</span>);</span><br><span class="line">        out.print(<span class="string">&quot;  &lt;/head&gt;&quot;</span>);</span><br><span class="line">        out.print(<span class="string">&quot;  &lt;body&gt;&quot;</span>);</span><br><span class="line">        out.print(<span class="string">&quot;        &lt;h1&gt;部门详情&lt;/h1&gt;&quot;</span>);</span><br><span class="line">        out.print(<span class="string">&quot;        &lt;hr&gt;&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn= DBUtil.getConnection();</span><br><span class="line">            String sql=<span class="string">&quot;select deptno,dname,loc from dept where deptno=?&quot;</span>;</span><br><span class="line">            ps=conn.prepareStatement(sql);</span><br><span class="line">            ps.setString(<span class="number">1</span>,deptno);</span><br><span class="line">            rs=ps.executeQuery();</span><br><span class="line">            <span class="keyword">if</span>(rs.next())&#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">dname</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;dname&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">loc</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;loc&quot;</span>);</span><br><span class="line">                out.print(<span class="string">&quot;        部门编号&lt;input type=&#x27;text&#x27; value=&#x27;&quot;</span>+deptno+<span class="string">&quot;&#x27; readonly/&gt;&lt;br&gt;&quot;</span>);</span><br><span class="line">                out.print(<span class="string">&quot;        部门名称&lt;input type=&#x27;text&#x27; value=&#x27;&quot;</span>+dname+<span class="string">&quot;&#x27; readonly/&gt;&lt;br&gt;&quot;</span>);</span><br><span class="line">                out.print(<span class="string">&quot;        部门位置&lt;input type=&#x27;text&#x27; value=&#x27;&quot;</span>+loc+<span class="string">&quot;&#x27; readonly/&gt;&lt;br&gt;&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            DBUtil.close(conn,ps,rs);</span><br><span class="line">        &#125;</span><br><span class="line">        out.print(<span class="string">&quot;        &lt;input type=&#x27;button&#x27; value=&#x27;后退&#x27; onclick=&#x27;window.history.back()&#x27;&gt;&quot;</span>);</span><br><span class="line">        out.print(<span class="string">&quot;  &lt;/body&gt;&quot;</span>);</span><br><span class="line">        out.print(<span class="string">&quot;&lt;/html&gt;&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.oa.utils;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DBUtil</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ResourceBundle bundle=ResourceBundle.getBundle(<span class="string">&quot;resources.jdbc&quot;</span>);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String driver=bundle.getString(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String url=bundle.getString(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String username=bundle.getString(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String password=bundle.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(driver);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title function_">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">        <span class="keyword">return</span> DriverManager.getConnection(url,username,password);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">close</span><span class="params">(Connection conn, Statement ps,ResultSet rs)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (rs != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                rs.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(ps!=<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                ps.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (conn != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                conn.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>计算机学习</category>
        <category>Java</category>
        <category>JavaWeb</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>JavaWeb</tag>
        <tag>Servlet</tag>
      </tags>
  </entry>
  <entry>
    <title>JSTL标签库</title>
    <url>/JavaWeb/JSTL%E6%A0%87%E7%AD%BE%E5%BA%93/</url>
    <content><![CDATA[<h3 id="JSTL标签库"><a href="#JSTL标签库" class="headerlink" title="JSTL标签库"></a>JSTL标签库</h3><span id="more"></span>

<p>学习意义：和EL表达式结合使用，目的是让jsp中的Java代码消失</p>
<p>下载相关包地址：<a href="https://jakarta.ee/zh/specifications/tags/2.0/">https://jakarta.ee/zh/specifications/tags/2.0/</a></p>
<p>​							</p>
<p>tomcat版本10之前可以参考<a href="https://www.runoob.com/jsp/jsp-jstl.html">https://www.runoob.com/jsp/jsp-jstl.html</a></p>
<p>​											<a href="https://tomcat.apache.org/taglibs/standard/">https://tomcat.apache.org/taglibs/standard/</a></p>
<p>引入标签库&lt;%@taglib prefix&#x3D;”” uri&#x3D;””%&gt;</p>
<p>常用的标签</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;f:catch&gt;&lt;/f:catch&gt;</span><br><span class="line">&lt;f:choose&gt;&lt;f:when test=&quot;&quot;&gt;&lt;/f:when&gt;&lt;f:otherwise&gt;&lt;/f:otherwise&gt;&lt;/f:choose&gt;</span><br><span class="line">&lt;f:forEach&gt;&lt;/f:forEach&gt;</span><br><span class="line">&lt;f:forTokens items=&quot;&quot; delims=&quot;&quot;&gt;&lt;/f:forTokens&gt;</span><br><span class="line">&lt;f:if test=&quot;&quot;&gt;&lt;/f:if&gt;</span><br></pre></td></tr></table></figure>

<h3 id="改造OA例子"><a href="#改造OA例子" class="headerlink" title="改造OA例子"></a>改造OA例子</h3>]]></content>
      <categories>
        <category>计算机学习</category>
        <category>Java</category>
        <category>JavaWeb</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>JavaWeb</tag>
        <tag>JSTL</tag>
      </tags>
  </entry>
  <entry>
    <title>ServletConfig</title>
    <url>/JavaWeb/ServletConfig/</url>
    <content><![CDATA[<h3 id="ServletConfig代码"><a href="#ServletConfig代码" class="headerlink" title="ServletConfig代码"></a>ServletConfig代码</h3><span id="more"></span>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.learn;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.util.Enumeration;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServlet</span> <span class="keyword">extends</span> <span class="title class_">GenericServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        ServletConfig config=<span class="built_in">this</span>.getServletConfig();</span><br><span class="line">        System.out.println(<span class="string">&quot;GenericServlet!!!&quot;</span>);</span><br><span class="line">        servletResponse.setContentType(<span class="string">&quot;text/html&quot;</span>);</span><br><span class="line">        PrintWriter out=servletResponse.getWriter();</span><br><span class="line">        out.print(<span class="string">&quot;&lt;h4&gt;测试&lt;/h4&gt;&quot;</span>);</span><br><span class="line">        Enumeration&lt;String&gt; initParameterNames = config.getInitParameterNames();</span><br><span class="line">        <span class="keyword">while</span>(initParameterNames.hasMoreElements())&#123;</span><br><span class="line">            String parameterName=initParameterNames.nextElement();</span><br><span class="line">            out.print(parameterName);</span><br><span class="line">            out.print(<span class="string">&quot;&lt;br&gt;&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        String driver=config.getInitParameter(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">        out.print(driver);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>计算机学习</category>
        <category>Java</category>
        <category>JavaWeb</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>JavaWeb</tag>
        <tag>Servlet</tag>
      </tags>
  </entry>
  <entry>
    <title>MVC架构代码简单演示</title>
    <url>/JavaWeb/MVC%E6%9E%B6%E6%9E%84%E4%BB%A3%E7%A0%81%E7%AE%80%E5%8D%95%E6%BC%94%E7%A4%BA/</url>
    <content><![CDATA[<h3 id="代码演示如下"><a href="#代码演示如下" class="headerlink" title="代码演示如下"></a>代码演示如下</h3><span id="more"></span>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.bank.exceptions;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AppException</span> <span class="keyword">extends</span> <span class="title class_">Exception</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">AppException</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">AppException</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.bank.exceptions;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MoneyNotEnough</span> <span class="keyword">extends</span> <span class="title class_">Exception</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MoneyNotEnough</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MoneyNotEnough</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.bank.exceptions;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MoneyNotEnough</span> <span class="keyword">extends</span> <span class="title class_">Exception</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MoneyNotEnough</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>();</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">MoneyNotEnough</span><span class="params">(String message)</span> &#123;</span><br><span class="line">        <span class="built_in">super</span>(message);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.bank.mvc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.xiaoguan.bank.utils.DBUtil;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountDao</span> &#123;<span class="comment">//负责数据处理，Data Access Object数据访问对象,一般情况一张表对应一个DAO</span></span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">AccountDao</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">insert</span><span class="params">(Account act)</span>&#123;</span><br><span class="line">        Connection conn=<span class="literal">null</span>;</span><br><span class="line">        PreparedStatement ps=<span class="literal">null</span>;</span><br><span class="line">        <span class="type">int</span> count=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = DBUtil.getConnection();</span><br><span class="line">            String sql=<span class="string">&quot;insert into t_act(actno,balance) values(?,?)&quot;</span>;</span><br><span class="line">            ps=conn.prepareStatement(sql);</span><br><span class="line">            ps.setString(<span class="number">1</span>,act.getActno());</span><br><span class="line">            ps.setDouble(<span class="number">2</span>,act.getBalance());</span><br><span class="line">            count=ps.executeUpdate();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            DBUtil.close(<span class="literal">null</span>,ps,<span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">deleteById</span><span class="params">(Long id)</span>&#123;</span><br><span class="line">        Connection conn=<span class="literal">null</span>;</span><br><span class="line">        PreparedStatement ps=<span class="literal">null</span>;</span><br><span class="line">        <span class="type">int</span> count=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = DBUtil.getConnection();</span><br><span class="line">            String sql=<span class="string">&quot;delete from t_act where id=?&quot;</span>;</span><br><span class="line">            ps=conn.prepareStatement(sql);</span><br><span class="line">            ps.setLong(<span class="number">1</span>,id);</span><br><span class="line">            count=ps.executeUpdate();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            DBUtil.close(<span class="literal">null</span>,ps,<span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">update</span><span class="params">(Account account)</span>&#123;</span><br><span class="line">        Connection conn=<span class="literal">null</span>;</span><br><span class="line">        PreparedStatement ps=<span class="literal">null</span>;</span><br><span class="line">        <span class="type">int</span> count=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = DBUtil.getConnection();</span><br><span class="line">            String sql=<span class="string">&quot;update t_act set balance=?,actno=? where id=?&quot;</span>;</span><br><span class="line">            ps=conn.prepareStatement(sql);</span><br><span class="line">            ps.setDouble(<span class="number">1</span>,account.getBalance());</span><br><span class="line">            ps.setString(<span class="number">2</span>,account.getActno());</span><br><span class="line">            ps.setLong(<span class="number">3</span>,account.getId());</span><br><span class="line">            count=ps.executeUpdate();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            DBUtil.close(<span class="literal">null</span>,ps,<span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> Account <span class="title function_">selectByActno</span><span class="params">(String actno)</span>&#123;</span><br><span class="line">        Connection conn=<span class="literal">null</span>;</span><br><span class="line">        PreparedStatement ps=<span class="literal">null</span>;</span><br><span class="line">        ResultSet rs=<span class="literal">null</span>;</span><br><span class="line">        Account account=<span class="keyword">new</span> <span class="title class_">Account</span>();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = DBUtil.getConnection();</span><br><span class="line">            String sql=<span class="string">&quot;select id,balance from t_act where actno=?&quot;</span>;</span><br><span class="line">            ps=conn.prepareStatement(sql);</span><br><span class="line">            ps.setString(<span class="number">1</span>,actno);</span><br><span class="line">            rs=ps.executeQuery();</span><br><span class="line">            <span class="keyword">if</span>(rs.next())&#123;</span><br><span class="line">                Long id= rs.getLong(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">                Double balance=rs.getDouble(<span class="string">&quot;balance&quot;</span>);</span><br><span class="line">                account.setActno(actno);</span><br><span class="line">                account.setId(id);</span><br><span class="line">                account.setBalance(balance);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            DBUtil.close(<span class="literal">null</span>,ps,rs);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> account;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> List&lt;Account&gt; <span class="title function_">selectAll</span><span class="params">()</span>&#123;</span><br><span class="line">        Connection conn=<span class="literal">null</span>;</span><br><span class="line">        PreparedStatement ps=<span class="literal">null</span>;</span><br><span class="line">        ResultSet rs=<span class="literal">null</span>;</span><br><span class="line">        List&lt;Account&gt; accounts=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = DBUtil.getConnection();</span><br><span class="line">            String sql=<span class="string">&quot;select id,balance,actno from t_act &quot;</span>;</span><br><span class="line">            ps=conn.prepareStatement(sql);</span><br><span class="line">            rs=ps.executeQuery();</span><br><span class="line">            <span class="keyword">while</span>(rs.next())&#123;</span><br><span class="line">                Long id= rs.getLong(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">                Double balance=rs.getDouble(<span class="string">&quot;balance&quot;</span>);</span><br><span class="line">                String actno=rs.getString(<span class="string">&quot;actno&quot;</span>);</span><br><span class="line">                accounts.add(<span class="keyword">new</span> <span class="title class_">Account</span>(id,actno,balance));</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            DBUtil.close(<span class="literal">null</span>,ps,rs);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> accounts;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.bank.mvc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.xiaoguan.bank.exceptions.AppException;</span><br><span class="line"><span class="keyword">import</span> com.xiaoguan.bank.exceptions.MoneyNotEnough;</span><br><span class="line"><span class="keyword">import</span> com.xiaoguan.bank.utils.DBUtil;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountService</span> &#123;</span><br><span class="line">    Connection conn=<span class="literal">null</span>;</span><br><span class="line">    <span class="keyword">private</span> AccountDao accountDao=<span class="keyword">new</span> <span class="title class_">AccountDao</span>();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">transfer</span><span class="params">(String fromActno,String toActno,<span class="type">double</span> money)</span> <span class="keyword">throws</span> MoneyNotEnough, AppException &#123;    <span class="comment">//完成转账逻辑</span></span><br><span class="line">        <span class="keyword">try</span>&#123;</span><br><span class="line">            conn=DBUtil.getConnection();</span><br><span class="line">            conn.setAutoCommit(<span class="literal">false</span>);</span><br><span class="line">            <span class="type">Account</span> <span class="variable">fromAccount</span> <span class="operator">=</span> accountDao.selectByActno(fromActno);</span><br><span class="line">            <span class="keyword">if</span>(fromAccount.getBalance()&lt;money)&#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">MoneyNotEnough</span>(<span class="string">&quot;对不起，余额不足&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            Account toAccount=accountDao.selectByActno(toActno);</span><br><span class="line">            fromAccount.setBalance(fromAccount.getBalance()-money);</span><br><span class="line">            toAccount.setBalance(toAccount.getBalance()+money);</span><br><span class="line">            <span class="type">int</span> count=accountDao.update(fromAccount);</span><br><span class="line">            count+=accountDao.update(toAccount);</span><br><span class="line">            <span class="keyword">if</span> (count!=<span class="number">2</span>) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">AppException</span>(<span class="string">&quot;转账出错了&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">            conn.commit();</span><br><span class="line">        &#125;<span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">            <span class="keyword">if</span> (conn!=<span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    conn.rollback();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException ex) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">AppException</span>(<span class="string">&quot;转账出错了&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            <span class="keyword">if</span> (conn!=<span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    conn.rollback();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException ex) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">AppException</span>(<span class="string">&quot;转账出错了&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            DBUtil.close(conn,<span class="literal">null</span>,<span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.bank.mvc;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.xiaoguan.bank.exceptions.AppException;</span><br><span class="line"><span class="keyword">import</span> com.xiaoguan.bank.exceptions.MoneyNotEnough;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="meta">@WebServlet(&quot;/transfer&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AccountServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;<span class="comment">//作为Controller</span></span><br><span class="line">    AccountService accountService=<span class="keyword">new</span> <span class="title class_">AccountService</span>();</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">fromActno</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;fromActno&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">toActno</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;toActno&quot;</span>);</span><br><span class="line">        <span class="type">double</span> <span class="variable">money</span> <span class="operator">=</span> Double.parseDouble(request.getParameter(<span class="string">&quot;money&quot;</span>));</span><br><span class="line"></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            accountService.transfer(fromActno,toActno,money);</span><br><span class="line">            response.sendRedirect(request.getContextPath()+<span class="string">&quot;/success.jsp&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (MoneyNotEnough e) &#123;</span><br><span class="line">            response.sendRedirect(request.getContextPath()+<span class="string">&quot;/moneyNotEnough.jsp&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            response.sendRedirect(request.getContextPath()+<span class="string">&quot;/error.jsp&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.bank.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DBUtil</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">DBUtil</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ResourceBundle bundle=ResourceBundle.getBundle(<span class="string">&quot;resources/JDBC&quot;</span>);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String driver=bundle.getString(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String url=bundle.getString(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String username=bundle.getString(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String password=bundle.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(driver);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ThreadLocal&lt;Connection&gt; local=<span class="keyword">new</span> <span class="title class_">ThreadLocal</span>&lt;&gt;();</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title function_">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">        <span class="type">Connection</span> <span class="variable">conn</span> <span class="operator">=</span> local.get();</span><br><span class="line">        <span class="keyword">if</span> (conn == <span class="literal">null</span>) &#123;</span><br><span class="line">            conn=DriverManager.getConnection(url,username,password);</span><br><span class="line">            local.set(conn);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> conn;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">close</span><span class="params">(Connection conn, PreparedStatement ps, ResultSet rs)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (rs != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                rs.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (ps != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                ps.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (conn != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                conn.close();</span><br><span class="line">                local.remove();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>该程序还右许多缺陷，比如并没有考虑并发的情况,自己转自己和多人访问会有错误,还有没有写出各部分相对应的接口来，这些都做了才相对规范。</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">driver</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">jdbc:mysql://localhost:3306/mvc</span></span><br><span class="line"><span class="attr">username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">密码</span></span><br></pre></td></tr></table></figure>

<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: xiaoguan</span><br><span class="line">  Date: <span class="number">2023</span>/<span class="number">5</span>/<span class="number">24</span></span><br><span class="line">  Time: <span class="number">20</span>:<span class="number">28</span></span><br><span class="line">  To change <span class="built_in">this</span> template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;转账失败&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;h1&gt;转账失败&lt;/h1&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: xiaoguan</span><br><span class="line">  Date: <span class="number">2023</span>/<span class="number">5</span>/<span class="number">24</span></span><br><span class="line">  Time: <span class="number">14</span>:<span class="number">22</span></span><br><span class="line">  To change <span class="built_in">this</span> template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">    &lt;base href=<span class="string">&quot;$&#123;pageContext.request.scheme&#125;://$&#123;pageContext.request.serverName&#125;:$&#123;pageContext.request.serverPort&#125;/$&#123;pageContext.request.contextPath&#125;/&quot;</span>&gt;</span><br><span class="line">    &lt;title&gt;银行账户转账&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">      &lt;form action=<span class="string">&quot;transfer&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">          转出账号：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;fromActno&quot;</span> /&gt;&lt;br&gt;</span><br><span class="line">          转入账号：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;toActno&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">          转账金额：&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;money&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">          &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;转账&quot;</span>&gt;</span><br><span class="line">      &lt;/form&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: xiaoguan</span><br><span class="line">  Date: <span class="number">2023</span>/<span class="number">5</span>/<span class="number">24</span></span><br><span class="line">  Time: <span class="number">20</span>:<span class="number">31</span></span><br><span class="line">  To change <span class="built_in">this</span> template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;余额不足&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h1&gt;余额不足，转账失败&lt;/h1&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%--</span><br><span class="line">  Created by IntelliJ IDEA.</span><br><span class="line">  User: xiaoguan</span><br><span class="line">  Date: <span class="number">2023</span>/<span class="number">5</span>/<span class="number">24</span></span><br><span class="line">  Time: <span class="number">20</span>:<span class="number">28</span></span><br><span class="line">  To change <span class="built_in">this</span> template use File | Settings | File Templates.</span><br><span class="line">--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;title&gt;转账成功&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">  &lt;h1&gt;转账成功&lt;/h1&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>计算机学习</category>
        <category>Java</category>
        <category>JavaWeb</category>
      </categories>
      <tags>
        <tag>JavaWeb</tag>
        <tag>MVC</tag>
      </tags>
  </entry>
  <entry>
    <title>Servlet生命周期</title>
    <url>/JavaWeb/Servlet%E7%94%9F%E5%91%BD%E5%91%A8%E6%9C%9F/</url>
    <content><![CDATA[<h3 id="验证生命周期代码"><a href="#验证生命周期代码" class="headerlink" title="验证生命周期代码"></a>验证生命周期代码</h3><span id="more"></span>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.learn;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">AServlet</span> <span class="keyword">implements</span> <span class="title class_">Servlet</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">AServlet</span><span class="params">()</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;AServlet无参数执行了&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(ServletConfig servletConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;A init&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> ServletConfig <span class="title function_">getServletConfig</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;A service&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getServletInfo</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;A destory&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.learn;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">BServlet</span> <span class="keyword">implements</span> <span class="title class_">Servlet</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">BServlet</span><span class="params">()</span> &#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;BServlet执行了&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(ServletConfig servletConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> ServletConfig <span class="title function_">getServletConfig</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getServletInfo</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>Servlet在启动服务时不会new Servlet这个对象,调用时（网页访问时）才会new,后面进入初始化init执行一次，后面service只要刷新就会执行,可无限次执行，最后停止服务器时destory才执行。</p>
]]></content>
      <categories>
        <category>计算机学习</category>
        <category>Java</category>
        <category>JavaWeb</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>JavaWeb</tag>
        <tag>Servlet</tag>
      </tags>
  </entry>
  <entry>
    <title>jsp基础</title>
    <url>/JavaWeb/jsp%E5%9F%BA%E7%A1%80/</url>
    <content><![CDATA[<h3 id="jsp基础语法"><a href="#jsp基础语法" class="headerlink" title="jsp基础语法"></a>jsp基础语法</h3><span id="more"></span>

<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%--这是注释--%&gt;</span><br><span class="line">&lt;%--设置基础属性--%&gt;</span><br><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;% <span class="type">int</span> i=<span class="number">1</span>; %&gt;&lt;%--这里面写java代码,注意方法里面不能有私有属性等声明，静态代码块，方法等违法java语法的规则，代码执行按顺序执行,没有特殊符号的则是html代码--%&gt;</span><br><span class="line">&lt;%！<span class="type">int</span> i=<span class="number">1</span>%&gt;&lt;%--这样代码会被写在service方法外类体中（注意不要不注意写了System.out.print()这种代码，java语法不允许的，可以写方法，静态代码块等，不建议使用，存在线程安全问题--%&gt;</span><br><span class="line">&lt;%--要在java中输出html文件，可以用out.write(),只能在方法内用--%&gt;</span><br><span class="line">&lt;%--九大内置对象：PageContext，HttpSession，ServletContext，ServletConfig，JspWriter，Object page=<span class="built_in">this</span>，Request，Response，Exception在方法内部用--%&gt;</span><br><span class="line">&lt;%= %&gt;&lt;%--out.print();里面的内容--%&gt;</span><br><span class="line">&lt;%<span class="meta">@include</span>%&gt;&lt;%静态指令，在jsp中完成静态包含，很少用--%&gt;</span><br><span class="line">&lt;%<span class="meta">@taglib</span>%%&gt;&lt;%引入标签库指令--%&gt;</span><br><span class="line">&lt;%--指令用法--%&gt;</span><br><span class="line">&lt;%@指令明 属性名=属性值 属性名=属性值...%&gt;</span><br><span class="line">&lt;%--常用属性：session=<span class="string">&quot;true/false&quot;</span>（默认<span class="literal">true</span>）contentType=<span class="string">&quot;test/json&quot;</span>(设置响应类型)pageEncoding=<span class="string">&quot;UTF-8&quot;</span>(设置响应字符集)<span class="keyword">import</span>=<span class="string">&quot;导包&quot;</span>errorpage=<span class="string">&quot;&quot;</span>（当前页面出问题跳转到指定路线，运行时出错有用）isErrorPage=<span class="string">&quot;true&quot;</span>(有了这个就可以调用exception.printStackTrace()打印错误信息输出到后台（exception有<span class="literal">true</span>以后才能调用）)--%&gt;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>计算机学习</category>
        <category>Java</category>
        <category>JavaWeb</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>JavaWeb</tag>
        <tag>jsp</tag>
      </tags>
  </entry>
  <entry>
    <title>XML简单测试</title>
    <url>/JavaWeb/xml%E7%AE%80%E5%8D%95%E6%B5%8B%E8%AF%95/</url>
    <content><![CDATA[<h3 id="XML简单测试代码"><a href="#XML简单测试代码" class="headerlink" title="XML简单测试代码"></a>XML简单测试代码</h3><span id="more"></span>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;https://jakarta.ee/xml/ns/jakartaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;https://jakarta.ee/xml/ns/jakartaee https://jakarta.ee/xml/ns/jakartaee/web-app_6_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;6.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>AServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.xiaoguan.learn.AServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>AServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/a<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>BServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.xiaoguan.learn.BServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>BServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/b<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>计算机学习</category>
        <category>Java</category>
        <category>JavaWeb</category>
      </categories>
      <tags>
        <tag>JavaWeb</tag>
        <tag>XML</tag>
      </tags>
  </entry>
  <entry>
    <title>ServletContext</title>
    <url>/JavaWeb/ServletContext/</url>
    <content><![CDATA[<h3 id="ServletContext代码"><a href="#ServletContext代码" class="headerlink" title="ServletContext代码"></a>ServletContext代码</h3><span id="more"></span>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.learn;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.GenericServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletResponse;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"><span class="keyword">import</span> java.util.Enumeration;</span><br><span class="line"><span class="keyword">import</span> java.util.Objects;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ServletContext</span> <span class="keyword">extends</span> <span class="title class_">GenericServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(ServletRequest req, ServletResponse res)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        res.setContentType(<span class="string">&quot;text/html&quot;</span>);</span><br><span class="line">        PrintWriter out=res.getWriter();</span><br><span class="line">        jakarta.servlet.ServletContext application=<span class="built_in">this</span>.getServletContext();</span><br><span class="line">        Enumeration&lt;String&gt; strs=application.getInitParameterNames();</span><br><span class="line">        <span class="keyword">while</span> (strs.hasMoreElements())&#123;</span><br><span class="line">            String name= strs.nextElement();</span><br><span class="line">            String value=application.getInitParameter(name);</span><br><span class="line">            out.print(name+<span class="string">&quot;,&quot;</span>+value+<span class="string">&quot;&lt;br&gt;&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        String contextPath= application.getContextPath();</span><br><span class="line">        out.print(contextPath+<span class="string">&quot;&lt;br&gt;&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">realPath</span> <span class="operator">=</span> application.getRealPath(<span class="string">&quot;/index.html&quot;</span>);</span><br><span class="line">        out.print(realPath+<span class="string">&quot;&lt;br&gt;&quot;</span>);</span><br><span class="line">        application.log(<span class="string">&quot;大家好！&quot;</span>);</span><br><span class="line">        <span class="type">int</span> age=<span class="number">17</span>;</span><br><span class="line">        <span class="keyword">if</span>(age&lt;<span class="number">18</span>)&#123;</span><br><span class="line">            application.log(<span class="string">&quot;错误&quot;</span>,<span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;go!&quot;</span>));</span><br><span class="line">        &#125;</span><br><span class="line">        application.setAttribute(<span class="string">&quot;test0&quot;</span>,<span class="number">12345</span>);</span><br><span class="line">        application.removeAttribute(<span class="string">&quot;test0&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">test0</span> <span class="operator">=</span> (<span class="type">int</span>) application.getAttribute(<span class="string">&quot;test0&quot;</span>);</span><br><span class="line">        out.print(test0);</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>
]]></content>
      <categories>
        <category>计算机学习</category>
        <category>Java</category>
        <category>JavaWeb</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>JavaWeb</tag>
        <tag>Servlet</tag>
      </tags>
  </entry>
  <entry>
    <title>关于Listener</title>
    <url>/JavaWeb/%E5%85%B3%E4%BA%8EListener/</url>
    <content><![CDATA[<h3 id="Listener练习代码"><a href="#Listener练习代码" class="headerlink" title="Listener练习代码"></a>Listener练习代码</h3><span id="more"></span>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletContextEvent;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletContextListener;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebListener;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebListener</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyListener</span> <span class="keyword">implements</span> <span class="title class_">ServletContextListener</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">contextInitialized</span><span class="params">(ServletContextEvent sce)</span> &#123;</span><br><span class="line">        <span class="comment">//Servletcontext创建时调用</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">contextDestroyed</span><span class="params">(ServletContextEvent sce)</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;https://jakarta.ee/xml/ns/jakartaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;https://jakarta.ee/xml/ns/jakartaee https://jakarta.ee/xml/ns/jakartaee/web-app_6_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;6.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">listener</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">listener-class</span>&gt;</span>com.xiaoguan.test.MyListener<span class="tag">&lt;/<span class="name">listener-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">listener</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>计算机学习</category>
        <category>Java</category>
        <category>JavaWeb</category>
      </categories>
      <tags>
        <tag>JavaWeb</tag>
        <tag>Listener</tag>
      </tags>
  </entry>
  <entry>
    <title>XML代替Properties文件</title>
    <url>/JavaWeb/xml%E4%BB%A3%E6%9B%BFproperties%E6%96%87%E4%BB%B6/</url>
    <content><![CDATA[<h3 id="XML替代Properties文件代码示例"><a href="#XML替代Properties文件代码示例" class="headerlink" title="XML替代Properties文件代码示例"></a>XML替代Properties文件代码示例</h3><span id="more"></span>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;https://jakarta.ee/xml/ns/jakartaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;https://jakarta.ee/xml/ns/jakartaee https://jakarta.ee/xml/ns/jakartaee/web-app_6_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;6.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>AServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.xiaoguan.learn.AServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>AServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/a<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>BServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.xiaoguan.learn.BServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>BServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/b<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>UserServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.xiaoguan.learn.UserServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>driver<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>com.mysql.cj.jdbc.Driver<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>url<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>jdbc:mysql://localhost:3306/数据库名<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>user<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>root<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>password<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>写密码<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>UserServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/user<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">web-app</span>&gt;</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>计算机学习</category>
        <category>Java</category>
        <category>JavaWeb</category>
      </categories>
      <tags>
        <tag>JavaWeb</tag>
        <tag>XML</tag>
      </tags>
  </entry>
  <entry>
    <title>XML配置全局变量</title>
    <url>/JavaWeb/xml%E9%85%8D%E7%BD%AE%E5%85%A8%E5%B1%80%E5%8F%98%E9%87%8F/</url>
    <content><![CDATA[<h3 id="XML配置全局变量代码"><a href="#XML配置全局变量代码" class="headerlink" title="XML配置全局变量代码"></a>XML配置全局变量代码</h3><span id="more"></span>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">web-app</span> <span class="attr">xmlns</span>=<span class="string">&quot;https://jakarta.ee/xml/ns/jakartaee&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xmlns:xsi</span>=<span class="string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">xsi:schemaLocation</span>=<span class="string">&quot;https://jakarta.ee/xml/ns/jakartaee https://jakarta.ee/xml/ns/jakartaee/web-app_6_0.xsd&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">version</span>=<span class="string">&quot;6.0&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>pageSize<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>10<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">context-param</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-name</span>&gt;</span>startIndex<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">param-value</span>&gt;</span>0<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">context-param</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--设置起始页--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">welcome-file-list</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">welcome-file</span>&gt;</span>login.html<span class="tag">&lt;/<span class="name">welcome-file</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">welcome-file-list</span>&gt;</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>计算机学习</category>
        <category>Java</category>
        <category>JavaWeb</category>
      </categories>
      <tags>
        <tag>JavaWeb</tag>
        <tag>XML</tag>
      </tags>
  </entry>
  <entry>
    <title>Maven学习（一）</title>
    <url>/Maven/Maven%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<h3 id="Maven配置文件相关配置"><a href="#Maven配置文件相关配置" class="headerlink" title="Maven配置文件相关配置"></a>Maven配置文件相关配置</h3><span id="more"></span>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--</span><br><span class="line">Licensed to the Apache Software Foundation (ASF) under one</span><br><span class="line">or more contributor license agreements.  See the NOTICE file</span><br><span class="line">distributed with this work for additional information</span><br><span class="line">regarding copyright ownership.  The ASF licenses this file</span><br><span class="line">to you under the Apache License, Version 2.0 (the</span><br><span class="line">&quot;License&quot;); you may not use this file except in compliance</span><br><span class="line">with the License.  You may obtain a copy of the License at</span><br><span class="line"></span><br><span class="line">    http://www.apache.org/licenses/LICENSE-2.0</span><br><span class="line"></span><br><span class="line">Unless required by applicable law or agreed to in writing,</span><br><span class="line">software distributed under the License is distributed on an</span><br><span class="line">&quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY</span><br><span class="line">KIND, either express or implied.  See the License for the</span><br><span class="line">specific language governing permissions and limitations</span><br><span class="line">under the License.</span><br><span class="line">--&gt;</span><br><span class="line"></span><br><span class="line">&lt;!--</span><br><span class="line"> | This is the configuration file for Maven. It can be specified at two levels:</span><br><span class="line"> |</span><br><span class="line"> |  1. User Level. This settings.xml file provides configuration for a single user,</span><br><span class="line"> |                 and is normally provided in $&#123;user.home&#125;/.m2/settings.xml.</span><br><span class="line"> |</span><br><span class="line"> |                 NOTE: This location can be overridden with the CLI option:</span><br><span class="line"> |</span><br><span class="line"> |                 -s /path/to/user/settings.xml</span><br><span class="line"> |</span><br><span class="line"> |  2. Global Level. This settings.xml file provides configuration for all Maven</span><br><span class="line"> |                 users on a machine (assuming they&#x27;re all using the same Maven</span><br><span class="line"> |                 installation). It&#x27;s normally provided in</span><br><span class="line"> |                 $&#123;maven.conf&#125;/settings.xml.</span><br><span class="line"> |</span><br><span class="line"> |                 NOTE: This location can be overridden with the CLI option:</span><br><span class="line"> |</span><br><span class="line"> |                 -gs /path/to/global/settings.xml</span><br><span class="line"> |</span><br><span class="line"> | The sections in this sample file are intended to give you a running start at</span><br><span class="line"> | getting the most out of your Maven installation. Where appropriate, the default</span><br><span class="line"> | values (values used when the setting is not specified) are provided.</span><br><span class="line"> |</span><br><span class="line"> |--&gt;</span><br><span class="line">&lt;settings xmlns=&quot;http://maven.apache.org/SETTINGS/1.2.0&quot;</span><br><span class="line">          xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span><br><span class="line">          xsi:schemaLocation=&quot;http://maven.apache.org/SETTINGS/1.2.0 https://maven.apache.org/xsd/settings-1.2.0.xsd&quot;&gt;</span><br><span class="line">  &lt;!-- localRepository</span><br><span class="line">   | The path to the local repository maven will use to store artifacts.</span><br><span class="line">   |</span><br><span class="line">   | Default: $&#123;user.home&#125;/.m2/repository</span><br><span class="line">  &lt;localRepository&gt;/path/to/local/repo&lt;/localRepository&gt;</span><br><span class="line">  --&gt;</span><br><span class="line">  &lt;localRepository&gt;D:/MavenRep&lt;/localRepository&gt;</span><br><span class="line"></span><br><span class="line">  &lt;!-- interactiveMode</span><br><span class="line">   | This will determine whether maven prompts you when it needs input. If set to false,</span><br><span class="line">   | maven will use a sensible default value, perhaps based on some other setting, for</span><br><span class="line">   | the parameter in question.</span><br><span class="line">   |</span><br><span class="line">   | Default: true</span><br><span class="line">  &lt;interactiveMode&gt;true&lt;/interactiveMode&gt;</span><br><span class="line">  --&gt;</span><br><span class="line"></span><br><span class="line">  &lt;!-- offline</span><br><span class="line">   | Determines whether maven should attempt to connect to the network when executing a build.</span><br><span class="line">   | This will have an effect on artifact downloads, artifact deployment, and others.</span><br><span class="line">   |</span><br><span class="line">   | Default: false</span><br><span class="line">  &lt;offline&gt;false&lt;/offline&gt;</span><br><span class="line">  --&gt;</span><br><span class="line"></span><br><span class="line">  &lt;!-- pluginGroups</span><br><span class="line">   | This is a list of additional group identifiers that will be searched when resolving plugins by their prefix, i.e.</span><br><span class="line">   | when invoking a command line like &quot;mvn prefix:goal&quot;. Maven will automatically add the group identifiers</span><br><span class="line">   | &quot;org.apache.maven.plugins&quot; and &quot;org.codehaus.mojo&quot; if these are not already contained in the list.</span><br><span class="line">   |--&gt;</span><br><span class="line">  &lt;pluginGroups&gt;</span><br><span class="line">    &lt;!-- pluginGroup</span><br><span class="line">     | Specifies a further group identifier to use for plugin lookup.</span><br><span class="line">    &lt;pluginGroup&gt;com.your.plugins&lt;/pluginGroup&gt;</span><br><span class="line">    --&gt;</span><br><span class="line">  &lt;/pluginGroups&gt;</span><br><span class="line"></span><br><span class="line">  &lt;!-- TODO Since when can proxies be selected as depicted? --&gt;</span><br><span class="line">  &lt;!-- proxies</span><br><span class="line">   | This is a list of proxies which can be used on this machine to connect to the network.</span><br><span class="line">   | Unless otherwise specified (by system property or command-line switch), the first proxy</span><br><span class="line">   | specification in this list marked as active will be used.</span><br><span class="line">   |--&gt;</span><br><span class="line">  &lt;proxies&gt;</span><br><span class="line">    &lt;!-- proxy</span><br><span class="line">     | Specification for one proxy, to be used in connecting to the network.</span><br><span class="line">     |</span><br><span class="line">    &lt;proxy&gt;</span><br><span class="line">      &lt;id&gt;optional&lt;/id&gt;</span><br><span class="line">      &lt;active&gt;true&lt;/active&gt;</span><br><span class="line">      &lt;protocol&gt;http&lt;/protocol&gt;</span><br><span class="line">      &lt;username&gt;proxyuser&lt;/username&gt;</span><br><span class="line">      &lt;password&gt;proxypass&lt;/password&gt;</span><br><span class="line">      &lt;host&gt;proxy.host.net&lt;/host&gt;</span><br><span class="line">      &lt;port&gt;80&lt;/port&gt;</span><br><span class="line">      &lt;nonProxyHosts&gt;local.net|some.host.com&lt;/nonProxyHosts&gt;</span><br><span class="line">    &lt;/proxy&gt;</span><br><span class="line">    --&gt;</span><br><span class="line">  &lt;/proxies&gt;</span><br><span class="line"></span><br><span class="line">  &lt;!-- servers</span><br><span class="line">   | This is a list of authentication profiles, keyed by the server-id used within the system.</span><br><span class="line">   | Authentication profiles can be used whenever maven must make a connection to a remote server.</span><br><span class="line">   |--&gt;</span><br><span class="line">  &lt;servers&gt;</span><br><span class="line">    &lt;!-- server</span><br><span class="line">     | Specifies the authentication information to use when connecting to a particular server, identified by</span><br><span class="line">     | a unique name within the system (referred to by the &#x27;id&#x27; attribute below).</span><br><span class="line">     |</span><br><span class="line">     | NOTE: You should either specify username/password OR privateKey/passphrase, since these pairings are</span><br><span class="line">     |       used together.</span><br><span class="line">     |</span><br><span class="line">    &lt;server&gt;</span><br><span class="line">      &lt;id&gt;deploymentRepo&lt;/id&gt;</span><br><span class="line">      &lt;username&gt;repouser&lt;/username&gt;</span><br><span class="line">      &lt;password&gt;repopwd&lt;/password&gt;</span><br><span class="line">    &lt;/server&gt;</span><br><span class="line">    --&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!-- Another sample, using keys to authenticate.</span><br><span class="line">    &lt;server&gt;</span><br><span class="line">      &lt;id&gt;siteServer&lt;/id&gt;</span><br><span class="line">      &lt;privateKey&gt;/path/to/private/key&lt;/privateKey&gt;</span><br><span class="line">      &lt;passphrase&gt;optional; leave empty if not used.&lt;/passphrase&gt;</span><br><span class="line">    &lt;/server&gt;</span><br><span class="line">    --&gt;</span><br><span class="line">  &lt;/servers&gt;</span><br><span class="line"></span><br><span class="line">  &lt;!-- mirrors</span><br><span class="line">   | This is a list of mirrors to be used in downloading artifacts from remote repositories.</span><br><span class="line">   |</span><br><span class="line">   | It works like this: a POM may declare a repository to use in resolving certain artifacts.</span><br><span class="line">   | However, this repository may have problems with heavy traffic at times, so people have mirrored</span><br><span class="line">   | it to several places.</span><br><span class="line">   |</span><br><span class="line">   | That repository definition will have a unique id, so we can create a mirror reference for that</span><br><span class="line">   | repository, to be used as an alternate download site. The mirror site will be the preferred</span><br><span class="line">   | server for that repository.</span><br><span class="line">   |--&gt;</span><br><span class="line">  &lt;mirrors&gt;</span><br><span class="line">    &lt;!-- mirror</span><br><span class="line">     | Specifies a repository mirror site to use instead of a given repository. The repository that</span><br><span class="line">     | this mirror serves has an ID that matches the mirrorOf element of this mirror. IDs are used</span><br><span class="line">     | for inheritance and direct lookup purposes, and must be unique across the set of mirrors.</span><br><span class="line">     |</span><br><span class="line">    &lt;mirror&gt;</span><br><span class="line">      &lt;id&gt;mirrorId&lt;/id&gt;</span><br><span class="line">      &lt;mirrorOf&gt;repositoryId&lt;/mirrorOf&gt;</span><br><span class="line">      &lt;name&gt;Human Readable Name for this Mirror.&lt;/name&gt;</span><br><span class="line">      &lt;url&gt;http://my.repository.com/repo/path&lt;/url&gt;</span><br><span class="line">    &lt;/mirror&gt;</span><br><span class="line">     --&gt;</span><br><span class="line">    &lt;!--&lt;mirror&gt;</span><br><span class="line">      &lt;id&gt;maven-default-http-blocker&lt;/id&gt;</span><br><span class="line">      &lt;mirrorOf&gt;external:http:*&lt;/mirrorOf&gt;</span><br><span class="line">      &lt;name&gt;Pseudo repository to mirror external repositories initially using HTTP.&lt;/name&gt;</span><br><span class="line">      &lt;url&gt;http://0.0.0.0/&lt;/url&gt;</span><br><span class="line">      &lt;blocked&gt;true&lt;/blocked&gt;</span><br><span class="line">    &lt;/mirror&gt;--&gt;</span><br><span class="line">	&lt;mirror&gt;</span><br><span class="line">		&lt;id&gt;nexus-aliyun&lt;/id&gt;</span><br><span class="line">		&lt;mirrorOf&gt;central&lt;/mirrorOf&gt;</span><br><span class="line">		&lt;name&gt;Nexus aliyun&lt;/name&gt;</span><br><span class="line">		&lt;url&gt;http://maven.aliyun.com/nexus/content/groups/public&lt;/url&gt;</span><br><span class="line">	&lt;/mirror&gt;</span><br><span class="line">  &lt;/mirrors&gt;</span><br><span class="line"></span><br><span class="line">  &lt;!-- profiles</span><br><span class="line">   | This is a list of profiles which can be activated in a variety of ways, and which can modify</span><br><span class="line">   | the build process. Profiles provided in the settings.xml are intended to provide local machine-</span><br><span class="line">   | specific paths and repository locations which allow the build to work in the local environment.</span><br><span class="line">   |</span><br><span class="line">   | For example, if you have an integration testing plugin - like cactus - that needs to know where</span><br><span class="line">   | your Tomcat instance is installed, you can provide a variable here such that the variable is</span><br><span class="line">   | dereferenced during the build process to configure the cactus plugin.</span><br><span class="line">   |</span><br><span class="line">   | As noted above, profiles can be activated in a variety of ways. One way - the activeProfiles</span><br><span class="line">   | section of this document (settings.xml) - will be discussed later. Another way essentially</span><br><span class="line">   | relies on the detection of a property, either matching a particular value for the property,</span><br><span class="line">   | or merely testing its existence. Profiles can also be activated by JDK version prefix, where a</span><br><span class="line">   | value of &#x27;1.4&#x27; might activate a profile when the build is executed on a JDK version of &#x27;1.4.2_07&#x27;.</span><br><span class="line">   | Finally, the list of active profiles can be specified directly from the command line.</span><br><span class="line">   |</span><br><span class="line">   | NOTE: For profiles defined in the settings.xml, you are restricted to specifying only artifact</span><br><span class="line">   |       repositories, plugin repositories, and free-form properties to be used as configuration</span><br><span class="line">   |       variables for plugins in the POM.</span><br><span class="line">   |</span><br><span class="line">   |--&gt;</span><br><span class="line">  &lt;profiles&gt;</span><br><span class="line">    &lt;!-- profile</span><br><span class="line">     | Specifies a set of introductions to the build process, to be activated using one or more of the</span><br><span class="line">     | mechanisms described above. For inheritance purposes, and to activate profiles via &lt;activatedProfiles/&gt;</span><br><span class="line">     | or the command line, profiles have to have an ID that is unique.</span><br><span class="line">     |</span><br><span class="line">     | An encouraged best practice for profile identification is to use a consistent naming convention</span><br><span class="line">     | for profiles, such as &#x27;env-dev&#x27;, &#x27;env-test&#x27;, &#x27;env-production&#x27;, &#x27;user-jdcasey&#x27;, &#x27;user-brett&#x27;, etc.</span><br><span class="line">     | This will make it more intuitive to understand what the set of introduced profiles is attempting</span><br><span class="line">     | to accomplish, particularly when you only have a list of profile id&#x27;s for debug.</span><br><span class="line">     |</span><br><span class="line">     | This profile example uses the JDK version to trigger activation, and provides a JDK-specific repo.</span><br><span class="line">    &lt;profile&gt;</span><br><span class="line">      &lt;id&gt;jdk-1.4&lt;/id&gt;</span><br><span class="line"></span><br><span class="line">      &lt;activation&gt;</span><br><span class="line">        &lt;jdk&gt;1.4&lt;/jdk&gt;</span><br><span class="line">      &lt;/activation&gt;</span><br><span class="line"></span><br><span class="line">      &lt;repositories&gt;</span><br><span class="line">        &lt;repository&gt;</span><br><span class="line">          &lt;id&gt;jdk14&lt;/id&gt;</span><br><span class="line">          &lt;name&gt;Repository for JDK 1.4 builds&lt;/name&gt;</span><br><span class="line">          &lt;url&gt;http://www.myhost.com/maven/jdk14&lt;/url&gt;</span><br><span class="line">          &lt;layout&gt;default&lt;/layout&gt;</span><br><span class="line">          &lt;snapshotPolicy&gt;always&lt;/snapshotPolicy&gt;</span><br><span class="line">        &lt;/repository&gt;</span><br><span class="line">      &lt;/repositories&gt;</span><br><span class="line">    &lt;/profile&gt;</span><br><span class="line">    --&gt;</span><br><span class="line"></span><br><span class="line">    &lt;!--</span><br><span class="line">     | Here is another profile, activated by the property &#x27;target-env&#x27; with a value of &#x27;dev&#x27;, which</span><br><span class="line">     | provides a specific path to the Tomcat instance. To use this, your plugin configuration might</span><br><span class="line">     | hypothetically look like:</span><br><span class="line">     |</span><br><span class="line">     | ...</span><br><span class="line">     | &lt;plugin&gt;</span><br><span class="line">     |   &lt;groupId&gt;org.myco.myplugins&lt;/groupId&gt;</span><br><span class="line">     |   &lt;artifactId&gt;myplugin&lt;/artifactId&gt;</span><br><span class="line">     |</span><br><span class="line">     |   &lt;configuration&gt;</span><br><span class="line">     |     &lt;tomcatLocation&gt;$&#123;tomcatPath&#125;&lt;/tomcatLocation&gt;</span><br><span class="line">     |   &lt;/configuration&gt;</span><br><span class="line">     | &lt;/plugin&gt;</span><br><span class="line">     | ...</span><br><span class="line">     |</span><br><span class="line">     | NOTE: If you just wanted to inject this configuration whenever someone set &#x27;target-env&#x27; to</span><br><span class="line">     |       anything, you could just leave off the &lt;value/&gt; inside the activation-property.</span><br><span class="line">     |</span><br><span class="line">    &lt;profile&gt;</span><br><span class="line">      &lt;id&gt;env-dev&lt;/id&gt;</span><br><span class="line"></span><br><span class="line">      &lt;activation&gt;</span><br><span class="line">        &lt;property&gt;</span><br><span class="line">          &lt;name&gt;target-env&lt;/name&gt;</span><br><span class="line">          &lt;value&gt;dev&lt;/value&gt;</span><br><span class="line">        &lt;/property&gt;</span><br><span class="line">      &lt;/activation&gt;</span><br><span class="line"></span><br><span class="line">      &lt;properties&gt;</span><br><span class="line">        &lt;tomcatPath&gt;/path/to/tomcat/instance&lt;/tomcatPath&gt;</span><br><span class="line">      &lt;/properties&gt;</span><br><span class="line">    &lt;/profile&gt;</span><br><span class="line">    --&gt;</span><br><span class="line">	&lt;profile&gt;</span><br><span class="line">		&lt;id&gt;jdk-1.8&lt;/id&gt;</span><br><span class="line">		&lt;activation&gt;</span><br><span class="line">			&lt;activeByDefault&gt;true&lt;/activeByDefault&gt;</span><br><span class="line">			&lt;jdk&gt;1.8&lt;/jdk&gt;</span><br><span class="line">		&lt;/activation&gt;</span><br><span class="line">		&lt;properties&gt;</span><br><span class="line">			&lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;</span><br><span class="line">			&lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;</span><br><span class="line">			&lt;maven.compiler.compilerVersion&gt;1.8&lt;/maven.compiler.compilerVersion&gt;</span><br><span class="line">		&lt;/properties&gt;</span><br><span class="line">	&lt;/profile&gt;</span><br><span class="line">  &lt;/profiles&gt;</span><br><span class="line"></span><br><span class="line">  &lt;!-- activeProfiles</span><br><span class="line">   | List of profiles that are active for all builds.</span><br><span class="line">   |</span><br><span class="line">  &lt;activeProfiles&gt;</span><br><span class="line">    &lt;activeProfile&gt;alwaysActiveProfile&lt;/activeProfile&gt;</span><br><span class="line">    &lt;activeProfile&gt;anotherAlwaysActiveProfile&lt;/activeProfile&gt;</span><br><span class="line">  &lt;/activeProfiles&gt;</span><br><span class="line">  --&gt;</span><br><span class="line">&lt;/settings&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="Maven笔记"><a href="#Maven笔记" class="headerlink" title="Maven笔记"></a>Maven笔记</h3><ol>
<li>Maven中由groupid,artifactid,version确定jar包</li>
<li>生成Maven工程<code>mvn archetype:generate</code></li>
</ol>
]]></content>
      <categories>
        <category>计算机学习</category>
        <category>工具</category>
        <category>Maven</category>
      </categories>
      <tags>
        <tag>Maven</tag>
      </tags>
  </entry>
  <entry>
    <title>最终简易oa项目代码</title>
    <url>/JavaWeb/%E6%9C%80%E7%BB%88%E7%AE%80%E6%98%93oa%E9%A1%B9%E7%9B%AE%E4%BB%A3%E7%A0%81/</url>
    <content><![CDATA[<h3 id="最终简易oa项目代码"><a href="#最终简易oa项目代码" class="headerlink" title="最终简易oa项目代码"></a>最终简易oa项目代码</h3><span id="more"></span>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.oa.dept.bean;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Objects;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Dept</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> String deptno;</span><br><span class="line">    <span class="keyword">private</span> String dname;</span><br><span class="line">    <span class="keyword">private</span> String loc;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Dept</span><span class="params">(String deptno, String dname, String loc)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.deptno = deptno;</span><br><span class="line">        <span class="built_in">this</span>.dname = dname;</span><br><span class="line">        <span class="built_in">this</span>.loc = loc;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Dept</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object o)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span> == o) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (o == <span class="literal">null</span> || getClass() != o.getClass()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="type">Dept</span> <span class="variable">dept</span> <span class="operator">=</span> (Dept) o;</span><br><span class="line">        <span class="keyword">return</span> Objects.equals(getDeptno(), dept.getDeptno()) &amp;&amp; Objects.equals(getDname(), dept.getDname()) &amp;&amp; Objects.equals(getLoc(), dept.getLoc());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">hashCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Objects.hash(getDeptno(), getDname(), getLoc());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Dept&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;deptno=&#x27;&quot;</span> + deptno + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, dname=&#x27;&quot;</span> + dname + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, loc=&#x27;&quot;</span> + loc + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getDeptno</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> deptno;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDeptno</span><span class="params">(String deptno)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.deptno = deptno;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getDname</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> dname;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setDname</span><span class="params">(String dname)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.dname = dname;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getLoc</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> loc;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setLoc</span><span class="params">(String loc)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.loc = loc;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.oa.dept.bean;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletContext;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpSessionAttributeListener;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpSessionBindingEvent;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpSessionBindingListener;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Objects;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">User</span> <span class="keyword">implements</span> <span class="title class_">HttpSessionBindingListener</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">valueBound</span><span class="params">(HttpSessionBindingEvent event)</span> &#123;</span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">application</span> <span class="operator">=</span> event.getSession().getServletContext();</span><br><span class="line">        <span class="type">Object</span> <span class="variable">onlineCount</span> <span class="operator">=</span> application.getAttribute(<span class="string">&quot;onlineCount&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span> (onlineCount == <span class="literal">null</span>) &#123;</span><br><span class="line">            application.setAttribute(<span class="string">&quot;onlineCount&quot;</span>,<span class="number">1</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="type">int</span> count=(Integer) onlineCount;</span><br><span class="line">            count++;</span><br><span class="line">            application.setAttribute(<span class="string">&quot;onlineCount&quot;</span>,count);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">valueUnbound</span><span class="params">(HttpSessionBindingEvent event)</span> &#123;</span><br><span class="line">        <span class="type">ServletContext</span> <span class="variable">application</span> <span class="operator">=</span> event.getSession().getServletContext();</span><br><span class="line">        <span class="type">Object</span> <span class="variable">onlineCount</span> <span class="operator">=</span> application.getAttribute(<span class="string">&quot;onlineCount&quot;</span>);</span><br><span class="line">        <span class="type">int</span> count=(Integer) onlineCount;</span><br><span class="line">        count--;</span><br><span class="line">        application.setAttribute(<span class="string">&quot;onlineCount&quot;</span>,count);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> String username;</span><br><span class="line">    <span class="keyword">private</span> String password;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">(String username, String password)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.username = username;</span><br><span class="line">        <span class="built_in">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">User</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;User&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;username=&#x27;&quot;</span> + username + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, password=&#x27;&quot;</span> + password + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object o)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span> == o) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (o == <span class="literal">null</span> || getClass() != o.getClass()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="type">User</span> <span class="variable">user</span> <span class="operator">=</span> (User) o;</span><br><span class="line">        <span class="keyword">return</span> Objects.equals(getUsername(), user.getUsername()) &amp;&amp; Objects.equals(getPassword(), user.getPassword());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">hashCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Objects.hash(getUsername(), getPassword());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getUsername</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setUsername</span><span class="params">(String username)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.username = username;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getPassword</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> password;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setPassword</span><span class="params">(String password)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.password = password;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.oa.dept.filter;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.*;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.HttpSession;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LoginFilter</span> <span class="keyword">implements</span> <span class="title class_">Filter</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">init</span><span class="params">(FilterConfig filterConfig)</span> <span class="keyword">throws</span> ServletException &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">doFilter</span><span class="params">(ServletRequest req, ServletResponse resp, FilterChain chain)</span> <span class="keyword">throws</span> IOException, ServletException &#123;</span><br><span class="line">        <span class="type">HttpServletRequest</span> <span class="variable">request</span> <span class="operator">=</span> (HttpServletRequest) req;</span><br><span class="line">        <span class="type">HttpServletResponse</span> <span class="variable">response</span> <span class="operator">=</span> (HttpServletResponse) resp;</span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession();</span><br><span class="line">        <span class="type">String</span> <span class="variable">servletPath</span> <span class="operator">=</span> request.getServletPath();</span><br><span class="line">        <span class="type">boolean</span> whiteList=<span class="string">&quot;/welcome&quot;</span>.equals(servletPath)||<span class="string">&quot;/login&quot;</span>.equals(servletPath)||</span><br><span class="line">                <span class="string">&quot;/logout&quot;</span>.equals(servletPath)||<span class="string">&quot;/freeLogin&quot;</span>.equals(servletPath)||</span><br><span class="line">                <span class="string">&quot;/index.jsp&quot;</span>.equals(servletPath)||<span class="string">&quot;/error.jsp&quot;</span>.equals(servletPath);</span><br><span class="line">        <span class="keyword">if</span>(whiteList||(session!=<span class="literal">null</span>&amp;&amp;session.getAttribute(<span class="string">&quot;id&quot;</span>)!=<span class="literal">null</span>))&#123;</span><br><span class="line">            chain.doFilter(request,response);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">            response.sendRedirect(request.getContextPath()+<span class="string">&quot;/welcome&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">destroy</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.oa.dept.utils;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DBUtil</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> ResourceBundle bundle=ResourceBundle.getBundle(<span class="string">&quot;resources.jdbc&quot;</span>);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String driver=bundle.getString(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String url=bundle.getString(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String username=bundle.getString(<span class="string">&quot;username&quot;</span>);</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String password=bundle.getString(<span class="string">&quot;password&quot;</span>);</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(driver);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException e) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title function_">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException &#123;</span><br><span class="line">        <span class="keyword">return</span> DriverManager.getConnection(url,username,password);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">close</span><span class="params">(Connection conn, Statement ps,ResultSet rs)</span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (rs != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                rs.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(ps!=<span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                ps.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (conn != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                conn.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(e);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.oa.dept.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.xiaoguan.oa.dept.bean.Dept;</span><br><span class="line"><span class="keyword">import</span> com.xiaoguan.oa.dept.utils.DBUtil;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&#123;&quot;/list&quot;,&quot;/detail&quot;,&quot;/delete&quot;,&quot;/add&quot;,&quot;/modify&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">DeptServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">servletPath</span> <span class="operator">=</span> request.getServletPath();</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;/list&quot;</span>.equals(servletPath))&#123;</span><br><span class="line">            doList(request,response);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;/detail&quot;</span>.equals(servletPath)) &#123;</span><br><span class="line">            doDetail(request,response);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;/delete&quot;</span>.equals(servletPath)) &#123;</span><br><span class="line">            doDel(request,response);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;/add&quot;</span>.equals(servletPath)) &#123;</span><br><span class="line">            doAdd(request,response);</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;/modify&quot;</span>.equals(servletPath)) &#123;</span><br><span class="line">            doModify(request,response);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;路径有误！&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">doModify</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        request.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">deptno</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;deptno&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">dname</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;dname&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">loc</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;loc&quot;</span>);</span><br><span class="line">        Connection conn=<span class="literal">null</span>;</span><br><span class="line">        PreparedStatement ps=<span class="literal">null</span>;</span><br><span class="line">        <span class="type">int</span> count=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn= DBUtil.getConnection();</span><br><span class="line">            String sql=<span class="string">&quot;update dept set dname=?,loc=? where deptno=?&quot;</span>;</span><br><span class="line">            ps=conn.prepareStatement(sql);</span><br><span class="line">            ps.setString(<span class="number">3</span>,deptno);</span><br><span class="line">            ps.setString(<span class="number">1</span>,dname);</span><br><span class="line">            ps.setString(<span class="number">2</span>,loc);</span><br><span class="line">            count=ps.executeUpdate();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            DBUtil.close(conn,ps,<span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(count==<span class="number">1</span>)&#123;</span><br><span class="line">            response.sendRedirect(request.getContextPath()+<span class="string">&quot;/list&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            response.sendRedirect(request.getContextPath()+<span class="string">&quot;/error.jsp&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">doAdd</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        request.setCharacterEncoding(<span class="string">&quot;UTF-8&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">deptno</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;deptno&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">dname</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;dname&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">loc</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;loc&quot;</span>);</span><br><span class="line">        Connection conn=<span class="literal">null</span>;</span><br><span class="line">        PreparedStatement ps=<span class="literal">null</span>;</span><br><span class="line">        <span class="type">int</span> count=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn= DBUtil.getConnection();</span><br><span class="line">            String sql=<span class="string">&quot;insert into dept(deptno,dname,loc) values(?,?,?)&quot;</span>;</span><br><span class="line">            ps=conn.prepareStatement(sql);</span><br><span class="line">            ps.setString(<span class="number">1</span>,deptno);</span><br><span class="line">            ps.setString(<span class="number">2</span>,dname);</span><br><span class="line">            ps.setString(<span class="number">3</span>,loc);</span><br><span class="line">            count=ps.executeUpdate();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            DBUtil.close(conn,ps,<span class="literal">null</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(count==<span class="number">1</span>)&#123;</span><br><span class="line">            response.sendRedirect(request.getContextPath()+<span class="string">&quot;/list&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            response.sendRedirect(request.getContextPath()+<span class="string">&quot;/error.jsp&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">doDel</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">deptno</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;deptno&quot;</span>);</span><br><span class="line">        Connection conn=<span class="literal">null</span>;</span><br><span class="line">        PreparedStatement ps=<span class="literal">null</span>;</span><br><span class="line">        ResultSet rs=<span class="literal">null</span>;</span><br><span class="line">        <span class="type">int</span> count=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn=DBUtil.getConnection();</span><br><span class="line">            String sql=<span class="string">&quot;delete from dept where deptno=?&quot;</span>;</span><br><span class="line">            ps=conn.prepareStatement(sql);</span><br><span class="line">            ps.setString(<span class="number">1</span>,deptno);</span><br><span class="line">            count=ps.executeUpdate();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            DBUtil.close(conn,ps,rs);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(count==<span class="number">1</span>)&#123;</span><br><span class="line">            response.sendRedirect(request.getContextPath()+<span class="string">&quot;/list&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            response.sendRedirect(request.getContextPath()+<span class="string">&quot;/error.jsp&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">doDetail</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">deptno</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;deptno&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">flag</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;f&quot;</span>);</span><br><span class="line">        Connection conn=<span class="literal">null</span>;</span><br><span class="line">        PreparedStatement ps=<span class="literal">null</span>;</span><br><span class="line">        ResultSet rs=<span class="literal">null</span>;</span><br><span class="line">        Dept dept=<span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn=DBUtil.getConnection();</span><br><span class="line">            String sql=<span class="string">&quot;select dname,loc from dept where deptno=?&quot;</span>;</span><br><span class="line">            ps=conn.prepareStatement(sql);</span><br><span class="line">            ps.setString(<span class="number">1</span>,deptno);</span><br><span class="line">            rs=ps.executeQuery();</span><br><span class="line">            <span class="keyword">if</span>(rs.next())&#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">dname</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;dname&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">loc</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;loc&quot;</span>);</span><br><span class="line">                dept=<span class="keyword">new</span> <span class="title class_">Dept</span>(deptno,dname,loc);</span><br><span class="line">                request.setAttribute(<span class="string">&quot;dept&quot;</span>,dept);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            DBUtil.close(conn,ps,rs);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;d&quot;</span>.equals(flag))&#123;</span><br><span class="line">            request.getRequestDispatcher(<span class="string">&quot;/detail.jsp&quot;</span>).forward(request,response);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;m&quot;</span>.equals(flag)) &#123;</span><br><span class="line">            request.getRequestDispatcher(<span class="string">&quot;/edit.jsp&quot;</span>).forward(request,response);</span><br><span class="line">        &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;f传参参数有误！&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">doList</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        List&lt;Dept&gt; depts = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        Connection conn=<span class="literal">null</span>;</span><br><span class="line">        PreparedStatement ps=<span class="literal">null</span>;</span><br><span class="line">        ResultSet rs=<span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn=DBUtil.getConnection();</span><br><span class="line">            String sql=<span class="string">&quot;select deptno,dname,loc from dept&quot;</span>;</span><br><span class="line">            ps= conn.prepareStatement(sql);</span><br><span class="line">            rs=ps.executeQuery();</span><br><span class="line">            <span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">                String deptno=rs.getString(<span class="string">&quot;deptno&quot;</span>);</span><br><span class="line">                <span class="type">String</span> <span class="variable">dname</span> <span class="operator">=</span> rs.getString(<span class="string">&quot;dname&quot;</span>);</span><br><span class="line">                String loc=rs.getString(<span class="string">&quot;loc&quot;</span>);</span><br><span class="line">                Dept dept=<span class="keyword">new</span> <span class="title class_">Dept</span>(deptno,dname,loc);</span><br><span class="line">                depts.add(dept);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            DBUtil.close(conn,ps,rs);</span><br><span class="line">        &#125;</span><br><span class="line">        request.setAttribute(<span class="string">&quot;deptList&quot;</span>,depts);</span><br><span class="line">        request.getRequestDispatcher(<span class="string">&quot;/list.jsp&quot;</span>).forward(request,response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.oa.dept.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.xiaoguan.oa.dept.bean.User;</span><br><span class="line"><span class="keyword">import</span> com.xiaoguan.oa.dept.utils.DBUtil;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&#123;&quot;/login&quot;,&quot;/logout&quot;,&quot;/freeLogin&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">UserServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line"></span><br><span class="line">        <span class="type">String</span> <span class="variable">servletPath</span> <span class="operator">=</span> request.getServletPath();</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;/login&quot;</span>.equals(servletPath))&#123;</span><br><span class="line">            doLogin(request,response);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;/logout&quot;</span>.equals(servletPath)) &#123;</span><br><span class="line">            doLogout(request,response);</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;/freeLogin&quot;</span>.equals(servletPath)) &#123;</span><br><span class="line">            doFreeLogin(request,response);</span><br><span class="line">        &#125; <span class="keyword">else</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;用户Servlet操作错误&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">doFreeLogin</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">            <span class="type">Cookie</span> <span class="variable">userNameLoginCookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;userName&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">            <span class="type">Cookie</span> <span class="variable">userPasswordLoginCookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;userPassword&quot;</span>, <span class="string">&quot;&quot;</span>);</span><br><span class="line">            userNameLoginCookie.setMaxAge(<span class="number">0</span>);</span><br><span class="line">            userPasswordLoginCookie.setMaxAge(<span class="number">0</span>);</span><br><span class="line">            userNameLoginCookie.setPath(request.getContextPath());</span><br><span class="line">            userPasswordLoginCookie.setPath(request.getContextPath());</span><br><span class="line">            response.addCookie(userNameLoginCookie);</span><br><span class="line">            response.addCookie(userPasswordLoginCookie);</span><br><span class="line">            response.sendRedirect(request.getContextPath()+<span class="string">&quot;/list&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">void</span> <span class="title function_">doLogout</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession(<span class="literal">false</span>);</span><br><span class="line">        <span class="keyword">if</span>(session!=<span class="literal">null</span>)&#123;</span><br><span class="line">            session.removeAttribute(<span class="string">&quot;user&quot;</span>);</span><br><span class="line">            session.invalidate();</span><br><span class="line">            response.sendRedirect(request.getContextPath()+<span class="string">&quot;/index.jsp&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doLogin</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">userName</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;userName&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">userPassword</span> <span class="operator">=</span> request.getParameter(<span class="string">&quot;userPassword&quot;</span>);</span><br><span class="line">        Connection conn=<span class="literal">null</span>;</span><br><span class="line">        PreparedStatement ps=<span class="literal">null</span>;</span><br><span class="line">        ResultSet rs=<span class="literal">null</span>;</span><br><span class="line">        <span class="type">boolean</span> flag=<span class="literal">false</span>;</span><br><span class="line">        <span class="type">int</span> id=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn= DBUtil.getConnection();</span><br><span class="line">            String sql=<span class="string">&quot;select id from login where 登录名=? and 登录密码=?&quot;</span>;</span><br><span class="line">            ps=conn.prepareStatement(sql);</span><br><span class="line">            ps.setString(<span class="number">1</span>,userName);</span><br><span class="line">            ps.setString(<span class="number">2</span>,userPassword);</span><br><span class="line">            rs=ps.executeQuery();</span><br><span class="line">            <span class="keyword">if</span>(rs.next())&#123;</span><br><span class="line">                flag=<span class="literal">true</span>;</span><br><span class="line">                id=rs.getInt(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            DBUtil.close(conn,ps,rs);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(flag)&#123;</span><br><span class="line">            <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession();</span><br><span class="line">            User user=<span class="keyword">new</span> <span class="title class_">User</span>(userName,userPassword);</span><br><span class="line">            session.setAttribute(<span class="string">&quot;user&quot;</span>,user);</span><br><span class="line">            System.out.println(<span class="string">&quot;放user了&quot;</span>);</span><br><span class="line">            session.setAttribute(<span class="string">&quot;id&quot;</span>,id);</span><br><span class="line">            session.setAttribute(<span class="string">&quot;userName&quot;</span>,userName);</span><br><span class="line">            <span class="keyword">if</span>(<span class="string">&quot;1&quot;</span>.equals(request.getParameter(<span class="string">&quot;flag&quot;</span>)))</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="type">Cookie</span> <span class="variable">userNameLoginCookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;userName&quot;</span>, userName);</span><br><span class="line">                <span class="type">Cookie</span> <span class="variable">userPasswordLoginCookie</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Cookie</span>(<span class="string">&quot;userPassword&quot;</span>, userPassword);</span><br><span class="line">                userNameLoginCookie.setMaxAge(<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span>*<span class="number">10</span>);</span><br><span class="line">                userPasswordLoginCookie.setMaxAge(<span class="number">60</span>*<span class="number">60</span>*<span class="number">24</span>*<span class="number">10</span>);</span><br><span class="line">                userNameLoginCookie.setPath(request.getContextPath());</span><br><span class="line">                userPasswordLoginCookie.setPath(request.getContextPath());</span><br><span class="line">                response.addCookie(userNameLoginCookie);</span><br><span class="line">                response.addCookie(userPasswordLoginCookie);</span><br><span class="line">            &#125;</span><br><span class="line">            response.sendRedirect(request.getContextPath()+<span class="string">&quot;/list&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            response.sendRedirect(request.getContextPath()+<span class="string">&quot;/error.jsp&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.oa.dept.web;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.xiaoguan.oa.dept.bean.User;</span><br><span class="line"><span class="keyword">import</span> com.xiaoguan.oa.dept.utils.DBUtil;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> jakarta.servlet.http.*;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.PreparedStatement;</span><br><span class="line"><span class="keyword">import</span> java.sql.ResultSet;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/welcome&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">WelcomeServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        Cookie[] cookies = request.getCookies();</span><br><span class="line">        String userPassword=<span class="literal">null</span>;</span><br><span class="line">        String userName=<span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (cookies != <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">for</span> (Cookie cookie : cookies) &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">name</span> <span class="operator">=</span> cookie.getName();</span><br><span class="line">                <span class="keyword">if</span>(<span class="string">&quot;userName&quot;</span>.equals(name))&#123;</span><br><span class="line">                     userName = cookie.getValue();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">if</span>(<span class="string">&quot;userPassword&quot;</span>.equals(name))&#123;</span><br><span class="line">                     userPassword = cookie.getValue();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span>(userName!=<span class="literal">null</span>&amp;&amp;userPassword!=<span class="literal">null</span>)&#123;</span><br><span class="line">            Connection conn=<span class="literal">null</span>;</span><br><span class="line">            PreparedStatement ps=<span class="literal">null</span>;</span><br><span class="line">            ResultSet rs=<span class="literal">null</span>;</span><br><span class="line">            <span class="type">boolean</span> flag=<span class="literal">false</span>;</span><br><span class="line">            <span class="type">int</span> id=<span class="number">0</span>;</span><br><span class="line">            <span class="keyword">try</span> &#123;</span><br><span class="line">                conn= DBUtil.getConnection();</span><br><span class="line">                String sql=<span class="string">&quot;select id from login where 登录名=? and 登录密码=?&quot;</span>;</span><br><span class="line">                ps=conn.prepareStatement(sql);</span><br><span class="line">                ps.setString(<span class="number">1</span>,userName);</span><br><span class="line">                ps.setString(<span class="number">2</span>,userPassword);</span><br><span class="line">                rs=ps.executeQuery();</span><br><span class="line">                <span class="keyword">if</span>(rs.next())&#123;</span><br><span class="line">                    flag=<span class="literal">true</span>;</span><br><span class="line">                    id=rs.getInt(<span class="string">&quot;id&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();</span><br><span class="line">            &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">                DBUtil.close(conn,ps,rs);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(flag) &#123;</span><br><span class="line">                <span class="type">HttpSession</span> <span class="variable">session</span> <span class="operator">=</span> request.getSession();</span><br><span class="line">                User user=<span class="keyword">new</span> <span class="title class_">User</span>(userName,userPassword);</span><br><span class="line">                session.setAttribute(<span class="string">&quot;user&quot;</span>,user);</span><br><span class="line">                session.setAttribute(<span class="string">&quot;id&quot;</span>, id);</span><br><span class="line">                session.setAttribute(<span class="string">&quot;userName&quot;</span>, userName);</span><br><span class="line">                response.sendRedirect(request.getContextPath() + <span class="string">&quot;/list&quot;</span>);</span><br><span class="line">            &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                response.sendRedirect(request.getContextPath()+<span class="string">&quot;/index.jsp&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            response.sendRedirect(request.getContextPath()+<span class="string">&quot;/index.jsp&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">driver</span>=<span class="string">com.mysql.cj.jdbc.Driver</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">jdbc:mysql://localhost:3306/xiaoguan</span></span><br><span class="line"><span class="attr">username</span>=<span class="string">root</span></span><br><span class="line"><span class="attr">password</span>=<span class="string">密码</span></span><br></pre></td></tr></table></figure>

<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;ch&quot;</span>&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">        &lt;title&gt;新增部门&lt;/title&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;h1&gt;新增部门&lt;/h1&gt;</span><br><span class="line">        &lt;hr&gt;</span><br><span class="line">        &lt;form action=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/add&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">            部门编号&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;deptno&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">            部门名称&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;dname&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">            部门位置&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;loc&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">            &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;保存&quot;</span>&gt;</span><br><span class="line">        &lt;/form&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;ch&quot;</span>&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">      &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">      &lt;title&gt;部门详情&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">        &lt;h1&gt;部门详情&lt;/h1&gt;</span><br><span class="line">        &lt;hr&gt;</span><br><span class="line">        部门编号&lt;input type=<span class="string">&quot;text&quot;</span> value=<span class="string">&quot;$&#123;dept.deptno&#125;&quot;</span> readonly/&gt;&lt;br&gt;</span><br><span class="line">        部门名称&lt;input type=<span class="string">&quot;text&quot;</span> value=<span class="string">&quot;$&#123;dept.dname&#125;&quot;</span> readonly/&gt;&lt;br&gt;</span><br><span class="line">        部门位置&lt;input type=<span class="string">&quot;text&quot;</span> value=<span class="string">&quot;$&#123;dept.loc&#125;&quot;</span> readonly/&gt;&lt;br&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;后退&quot;</span> onclick=<span class="string">&quot;window.history.back()&quot;</span>&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;ch&quot;</span>&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">      &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">      &lt;title&gt;修改部门&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">      &lt;h1&gt;修改部门&lt;/h1&gt;</span><br><span class="line">      &lt;hr&gt;</span><br><span class="line">      &lt;form action=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/modify&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">          部门编号&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;deptno&quot;</span> value=<span class="string">&quot;$&#123;dept.deptno&#125;&quot;</span> readonly/&gt;&lt;br&gt;</span><br><span class="line">          部门名称&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;dname&quot;</span> value=<span class="string">&quot;$&#123;dept.dname&#125;&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">          部门位置&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;loc&quot;</span> value=<span class="string">&quot;$&#123;dept.loc&#125;&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">          &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;修改&quot;</span>&gt;</span><br><span class="line">      &lt;/form&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;ch&quot;</span>&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">      &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">      &lt;title&gt;操作或登录失败&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;h1&gt;&lt;a href=<span class="string">&quot;javascript:void(0)&quot;</span> onclick=<span class="string">&quot;document.location.href=&#x27;$&#123;pageContext.request.contextPath&#125;/welcome&#x27;&quot;</span>&gt;操作或登录失败请返回起始页&lt;/a&gt;&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;ch&quot;</span>&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">      &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">      &lt;title&gt;欢迎使用OA系统&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">        &lt;%--&lt;a href=<span class="string">&quot;&lt;%=request.getContextPath()%&gt;/list&quot;</span>&gt;点击进入部门列表&lt;/a&gt;&lt;br&gt;--%&gt;</span><br><span class="line">        &lt;h1&gt;用户登录&lt;/h1&gt;</span><br><span class="line">        &lt;hr&gt;</span><br><span class="line">        &lt;form action=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/login&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">            用户名:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;userName&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">            密码:&lt;input type=<span class="string">&quot;password&quot;</span> name=<span class="string">&quot;userPassword&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">            &lt;input type=<span class="string">&quot;checkbox&quot;</span> name=<span class="string">&quot;flag&quot;</span> value=<span class="string">&quot;1&quot;</span>&gt;十天内免登录&lt;br&gt;</span><br><span class="line">            &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;登录&quot;</span>&gt;</span><br><span class="line">        &lt;/form&gt;</span><br><span class="line"></span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;%<span class="meta">@taglib</span> prefix=<span class="string">&quot;c&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;ch&quot;</span>&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">      &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">      &lt;title&gt;部门列表&lt;/title&gt;</span><br><span class="line">      &lt;script&gt;</span><br><span class="line">          function <span class="title function_">del</span><span class="params">(deptno)</span>&#123;</span><br><span class="line">              <span class="keyword">if</span>(window.confirm(<span class="string">&#x27;请确认是否删除！&#x27;</span>))&#123;</span><br><span class="line">                 document.location.href=<span class="string">&#x27;$&#123;pageContext.request.contextPath&#125;/delete?deptno=&#x27;</span>+deptno;</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line">      &lt;/script&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">       &lt;h3&gt;欢迎$&#123;userName&#125;,在线人数为$&#123;onlineCount&#125;&lt;/h3&gt;&lt;br&gt;</span><br><span class="line">       &lt;a href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/logout&quot;</span>&gt;[退出系统]&lt;/a&gt;</span><br><span class="line">       &lt;a href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/freeLogin&quot;</span>&gt;[退出免登陆状态]&lt;/a&gt;</span><br><span class="line">       &lt;h1 align=<span class="string">&quot;center&quot;</span>&gt;部门列表&lt;/h1&gt;</span><br><span class="line">       &lt;hr&gt;</span><br><span class="line">        &lt;table border=<span class="string">&quot;1px&quot;</span> align=<span class="string">&quot;center&quot;</span> width=<span class="string">&quot;50%&quot;</span>&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;th&gt;序号&lt;/th&gt;</span><br><span class="line">                &lt;th&gt;部门编号&lt;/th&gt;</span><br><span class="line">                &lt;th&gt;部门名称&lt;/th&gt;</span><br><span class="line">                &lt;th&gt;操作&lt;/th&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;c:forEach items=<span class="string">&quot;$&#123;deptList&#125;&quot;</span> varStatus=<span class="string">&quot;varStatus&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;dept&quot;</span>&gt;</span><br><span class="line">                &lt;tr&gt;</span><br><span class="line">                    &lt;td&gt;$&#123;varStatus.count&#125;&lt;/td&gt;</span><br><span class="line">                    &lt;td&gt;$&#123;dept.deptno&#125;&lt;/td&gt;</span><br><span class="line">                    &lt;td&gt;$&#123;dept.dname&#125;&lt;/td&gt;</span><br><span class="line">                    &lt;td&gt;</span><br><span class="line">                        &lt;a href=<span class="string">&quot;javascript:void(0)&quot;</span> onclick=<span class="string">&quot;del($&#123;dept.deptno&#125;)&quot;</span>&gt;删除&lt;/a&gt;</span><br><span class="line">                        &lt;a href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/detail?f=m&amp;deptno=$&#123;dept.deptno&#125;&quot;</span>&gt;修改&lt;/a&gt;</span><br><span class="line">                        &lt;a href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/detail?f=d&amp;deptno=$&#123;dept.deptno&#125;&quot;</span>&gt;详情&lt;/a&gt;</span><br><span class="line">                    &lt;/td&gt;</span><br><span class="line">                &lt;/tr&gt;</span><br><span class="line">            &lt;/c:forEach&gt;</span><br><span class="line">        &lt;/table&gt;</span><br><span class="line">        &lt;hr&gt;</span><br><span class="line">        &lt;a href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/add.jsp&quot;</span>&gt;新增部门&lt;/a&gt;&lt;br&gt;</span><br><span class="line">        &lt;a href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/index.jsp&quot;</span>&gt;回到起始页&lt;/a&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>计算机学习</category>
        <category>Java</category>
        <category>JavaWeb</category>
      </categories>
      <tags>
        <tag>JavaWeb</tag>
      </tags>
  </entry>
  <entry>
    <title>Maven学习（二）</title>
    <url>/Maven/Maven%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
    <content><![CDATA[<h3 id="Maven配置文件相关配置"><a href="#Maven配置文件相关配置" class="headerlink" title="Maven配置文件相关配置"></a>Maven配置文件相关配置</h3><span id="more"></span>

<h3 id="Maven笔记"><a href="#Maven笔记" class="headerlink" title="Maven笔记"></a>Maven笔记</h3><p>在main和test目录中分别添加下面两段Java代码</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.maven;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Calculator</span>&#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="type">int</span> <span class="title function_">sum</span><span class="params">(<span class="type">int</span> i,<span class="type">int</span> j)</span>&#123;</span><br><span class="line">		<span class="keyword">return</span> i+j;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.maven;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"><span class="keyword">import</span> com.xiaoguan.maven.Calculator;</span><br><span class="line"><span class="keyword">import</span> <span class="keyword">static</span> org.junit.Assert.*;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CalculatorTest</span>&#123;</span><br><span class="line">	<span class="meta">@Test</span></span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSum</span><span class="params">()</span>&#123;</span><br><span class="line">		Calculator calculator= <span class="keyword">new</span> <span class="title class_">Calculator</span>();</span><br><span class="line">		<span class="type">int</span> actualResult=calculator.sum(<span class="number">5</span>,<span class="number">3</span>);</span><br><span class="line">		<span class="type">int</span> expectedResult=<span class="number">8</span>;</span><br><span class="line">		assertEquals(expectedResult,actualResult);</span><br><span class="line">        System.out.print(<span class="string">&quot;小关&quot;</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>和maven构建相关的命令要在pom.xml目录下执行。</p>
<ol>
<li><code>mvn clean</code>删除target目录</li>
<li><code>mvn compile</code>主程序编译目录</li>
<li><code>mvn test-compile</code>测试程序编译目录</li>
<li><code>mvn test</code>测试程序（重新自动编译）</li>
<li><code>mvn package</code>打成包放target目录（只有主体程序打包没有测试程序）</li>
<li><code>mvn install</code>将打好的包存入本地仓库中</li>
<li><code>mvn archetype:generate -DarchetypeGroupId=org.apache.maven.archetypes -DarchetypeArtifactId=maven-archetype-webapp -DarchetypeVersion=1.4</code>生成web工程。servlet测试代码为</li>
</ol>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.maven;</span><br><span class="line">	</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line">	</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">HelloServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span>&#123;</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doGet</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">		</span><br><span class="line">		response.getWriter().write(<span class="string">&quot;hello maven web&quot;</span>);</span><br><span class="line">		</span><br><span class="line">	&#125;</span><br><span class="line">	</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>注册文件</p>
<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"> <span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>helloServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>com.atguigu.maven.HelloServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>helloServlet<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/helloServlet<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"> <span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>



<p>jsp测试代码为</p>
<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;html&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">&lt;h2&gt;Hello World!&lt;/h2&gt;</span><br><span class="line">&lt;a href=<span class="string">&quot;helloServlet&quot;</span>&gt;Access Servlet&lt;/a&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<ol start="8">
<li><p><code>mvn dependency:list</code>依赖列表</p>
</li>
<li><p>配置依赖排除</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;exclusions&gt;</span><br><span class="line">	&lt;exclusion&gt;</span><br><span class="line">		&lt;!--指定坐标时不需要指定version,写在dependency中--&gt;</span><br><span class="line">		&lt;groupId&gt;commons-logging&lt;/groupId&gt;</span><br><span class="line">		&lt;artifactId&gt;commons-logging&lt;/artifactId&gt;</span><br><span class="line">	&lt;/exclusion&gt;</span><br><span class="line">&lt;/exclusions&gt;</span><br></pre></td></tr></table></figure>
</li>
<li><p><code>&lt;packaging&gt;pom&lt;/packaging&gt;</code>只有打包方式为pom的工程才能为父工程</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; standalone=&quot;no&quot;?&gt;</span><br><span class="line">&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;</span><br><span class="line">        </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;</span><br><span class="line">        </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  &lt;groupId&gt;com.xiaoguan.maven&lt;/groupId&gt;</span><br><span class="line">        </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  &lt;artifactId&gt;pro03-maven-parent&lt;/artifactId&gt;</span><br><span class="line">        </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;</span><br><span class="line">        </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  &lt;packaging&gt;pom&lt;/packaging&gt;</span><br><span class="line">        </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  &lt;name&gt;pro03-maven-parent&lt;/name&gt;</span><br><span class="line">        </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  &lt;url&gt;http://maven.apache.org&lt;/url&gt;</span><br><span class="line">        </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  &lt;properties&gt;</span><br><span class="line">                </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;</span><br><span class="line">    &lt;a&gt;4.0.0&lt;/a&gt;</span><br><span class="line">              </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  &lt;/properties&gt;</span><br><span class="line">        </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  &lt;dependencies&gt;</span><br><span class="line"></span><br><span class="line">  &lt;/dependencies&gt;</span><br><span class="line">      </span><br><span class="line">  </span><br><span class="line">  </span><br><span class="line">  &lt;modules&gt;</span><br><span class="line">              </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    &lt;module&gt;pro04-maven-moudle&lt;/module&gt;</span><br><span class="line">              </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    &lt;module&gt;pro05-maven-moudle&lt;/module&gt;</span><br><span class="line">          </span><br><span class="line">    </span><br><span class="line">    &lt;module&gt;pro06-maven-moudle&lt;/module&gt;</span><br><span class="line">      </span><br><span class="line">  &lt;/modules&gt;</span><br><span class="line">  &lt;dependencyManagement&gt;</span><br><span class="line">	&lt;dependencies&gt;</span><br><span class="line">		&lt;dependency&gt;</span><br><span class="line">			&lt;groupId&gt;org.springframework&lt;/groupId&gt;</span><br><span class="line">			&lt;artifactId&gt;spring-core&lt;/artifactId&gt;</span><br><span class="line">			&lt;version&gt;4.0.0.RELEASE&lt;/version&gt;</span><br><span class="line">		&lt;/dependency&gt;</span><br><span class="line">		&lt;dependency&gt;</span><br><span class="line">			&lt;groupId&gt;org.springframework&lt;/groupId&gt;</span><br><span class="line">			&lt;artifactId&gt;spring-beans&lt;/artifactId&gt;</span><br><span class="line">			&lt;version&gt;4.0.0.RELEASE&lt;/version&gt;</span><br><span class="line">		&lt;/dependency&gt;</span><br><span class="line">		&lt;dependency&gt;</span><br><span class="line">			&lt;groupId&gt;org.springframework&lt;/groupId&gt;</span><br><span class="line">			&lt;artifactId&gt;spring-context&lt;/artifactId&gt;</span><br><span class="line">			&lt;version&gt;4.0.0.RELEASE&lt;/version&gt;</span><br><span class="line">		&lt;/dependency&gt;</span><br><span class="line">		&lt;dependency&gt;</span><br><span class="line">			&lt;groupId&gt;org.springframework&lt;/groupId&gt;</span><br><span class="line">			&lt;artifactId&gt;spring-expression&lt;/artifactId&gt;</span><br><span class="line">			&lt;version&gt;4.0.0.RELEASE&lt;/version&gt;</span><br><span class="line">		&lt;/dependency&gt;</span><br><span class="line">		&lt;dependency&gt;</span><br><span class="line">			&lt;groupId&gt;org.springframework&lt;/groupId&gt;</span><br><span class="line">			&lt;artifactId&gt;spring-aop&lt;/artifactId&gt;</span><br><span class="line">			&lt;version&gt;4.0.0.RELEASE&lt;/version&gt;</span><br><span class="line">		&lt;/dependency&gt;</span><br><span class="line">	&lt;/dependencies&gt;</span><br><span class="line">  &lt;/dependencyManagement&gt;</span><br><span class="line">    </span><br><span class="line"></span><br><span class="line">&lt;/project&gt;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>父工程有的可以不写依赖版本但其他还是要写，写版本号以子工程中为准。${a}可以放在version里做到一处修改处处修改,前提要在<code>&lt;properties&gt;</code>中声明</p>
<ol start="11">
<li><code>mvn clean install -Dmaven.test.skip=true</code>-D表示要附加命令的参数，此例子表示执行参数过程中跳过测试。</li>
</ol>
</li>
</ol>
]]></content>
      <categories>
        <category>计算机学习</category>
        <category>工具</category>
        <category>Maven</category>
      </categories>
      <tags>
        <tag>Maven</tag>
      </tags>
  </entry>
  <entry>
    <title>图像去雾</title>
    <url>/Demo/%E5%9B%BE%E5%83%8F%E5%8E%BB%E9%9B%BE/</url>
    <content><![CDATA[<h3 id="效果展示"><a href="#效果展示" class="headerlink" title="效果展示"></a>效果展示</h3><p>本代码为数字图像处理课程的课堂展示作业，展示内容为用不同的方法对图像去雾。<span id="more"></span></p>
<p><img src="/./images/%E5%9B%BE%E5%83%8F%E5%8E%BB%E9%9B%BE.jpg" alt="图像去雾展示图"></p>
<h3 id="前后端代码"><a href="#前后端代码" class="headerlink" title="前后端代码"></a>前后端代码</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.imageprocess;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> AnTongDao.AnTongDao;</span><br><span class="line"><span class="keyword">import</span> CLAHE.Clahe;</span><br><span class="line"><span class="keyword">import</span> QuWu.TaongTaiQuWu;</span><br><span class="line"><span class="keyword">import</span> ShiShiQuWu.ShiShiQuWu;</span><br><span class="line"><span class="keyword">import</span> com.mathworks.toolbox.javabuilder.MWException;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Defogging</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Defogging</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">tongTaiLvBoQuWu</span><span class="params">(String srcPath,String targetPath)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;进入同态滤波算法函数&quot;</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">TaongTaiQuWu</span> <span class="variable">taongTaiQuWu</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">TaongTaiQuWu</span>();</span><br><span class="line">            taongTaiQuWu.tongTaiLvBo(<span class="number">1</span>,srcPath,targetPath);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (MWException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">clahe</span><span class="params">(String srcPath,String targetPath)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;进入clahe函数&quot;</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">Clahe</span> <span class="variable">clahe</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Clahe</span>();</span><br><span class="line">            clahe.CLAHE(<span class="number">1</span>,srcPath,targetPath);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (MWException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">anTongDao</span><span class="params">(String srcPath,String targetPath)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;进入anTongDao函数&quot;</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">AnTongDao</span> <span class="variable">anTongDao</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">AnTongDao</span>();</span><br><span class="line">            anTongDao.anTongDao(<span class="number">1</span>,srcPath,targetPath);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (MWException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">shiShiQuWu</span><span class="params">(String srcPath,String targetPath)</span>&#123;</span><br><span class="line">        System.out.println(<span class="string">&quot;进入shishiQuWu函数&quot;</span>);</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">ShiShiQuWu</span> <span class="variable">shiShiQuWu</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ShiShiQuWu</span>();</span><br><span class="line">            shiShiQuWu.shiShiQuWu(<span class="number">1</span>,srcPath,targetPath);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (MWException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.imgstoreandsend;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.xiaoguan.imageprocess.Defogging;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.PrintWriter;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&quot;/image/send&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ImageSendServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">service</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">String</span> <span class="variable">sourcePath</span> <span class="operator">=</span>(String) request.getAttribute(<span class="string">&quot;sourcePath&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">filename</span> <span class="operator">=</span> (String) request.getAttribute(<span class="string">&quot;filename&quot;</span>);</span><br><span class="line">        <span class="type">String</span> <span class="variable">requestPath</span> <span class="operator">=</span> (String) request.getAttribute(<span class="string">&quot;requestPath&quot;</span>);</span><br><span class="line">        <span class="keyword">if</span>(<span class="string">&quot;/image/store&quot;</span>.equals(requestPath))&#123;</span><br><span class="line">            response.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">            <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">            String json=<span class="string">&quot;&#123;\&quot;imageURL\&quot;:\&quot;&quot;</span>+request.getContextPath()+<span class="string">&quot;/image/source/&quot;</span>+filename+<span class="string">&quot;\&quot;&#125;&quot;</span>;</span><br><span class="line">            out.print(json);</span><br><span class="line">            System.out.println(<span class="string">&quot;原图响应成功&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;/image/tongTaiLvBo&quot;</span>.equals(requestPath))&#123;</span><br><span class="line">            String targetPath=<span class="string">&quot;E:/java/ImageProcessHomework/out/artifacts/Defogging/image/process/TongTaiLvBo&quot;</span>;</span><br><span class="line">            Defogging.tongTaiLvBoQuWu(sourcePath+<span class="string">&quot;/&quot;</span>+filename,targetPath+<span class="string">&quot;/&quot;</span>+filename);</span><br><span class="line">            response.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">            <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">            String json=<span class="string">&quot;&#123;\&quot;imageURL\&quot;:\&quot;&quot;</span>+request.getContextPath()+<span class="string">&quot;/image/process/TongTaiLvBo/&quot;</span>+filename+<span class="string">&quot;\&quot;&#125;&quot;</span>;</span><br><span class="line">            out.print(json);</span><br><span class="line">            System.out.println(<span class="string">&quot;同态滤波图片响应成功&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;/image/clahe&quot;</span>.equals(requestPath))&#123;</span><br><span class="line">            String targetPath=<span class="string">&quot;E:/java/ImageProcessHomework/out/artifacts/Defogging/image/process/Clahe&quot;</span>;</span><br><span class="line">            Defogging.clahe(sourcePath+<span class="string">&quot;/&quot;</span>+filename,targetPath+<span class="string">&quot;/&quot;</span>+filename);</span><br><span class="line">            response.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">            <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">            String json=<span class="string">&quot;&#123;\&quot;imageURL\&quot;:\&quot;&quot;</span>+request.getContextPath()+<span class="string">&quot;/image/process/Clahe/&quot;</span>+filename+<span class="string">&quot;\&quot;&#125;&quot;</span>;</span><br><span class="line">            out.print(json);</span><br><span class="line">            System.out.println(<span class="string">&quot;Clahe图片响应成功&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span>(<span class="string">&quot;/image/anTongDao&quot;</span>.equals(requestPath))&#123;</span><br><span class="line">            String targetPath=<span class="string">&quot;E:/java/ImageProcessHomework/out/artifacts/Defogging/image/process/anTongDao&quot;</span>;</span><br><span class="line">            Defogging.anTongDao(sourcePath+<span class="string">&quot;/&quot;</span>+filename,targetPath+<span class="string">&quot;/&quot;</span>+filename);</span><br><span class="line">            response.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">            <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">            String json=<span class="string">&quot;&#123;\&quot;imageURL\&quot;:\&quot;&quot;</span>+request.getContextPath()+<span class="string">&quot;/image/process/anTongDao/&quot;</span>+filename+<span class="string">&quot;\&quot;&#125;&quot;</span>;</span><br><span class="line">            out.print(json);</span><br><span class="line">            System.out.println(<span class="string">&quot;暗通道图片响应成功&quot;</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">if</span> (<span class="string">&quot;/image/shiShiQuWu&quot;</span>.equals(requestPath))&#123;</span><br><span class="line">            String targetPath=<span class="string">&quot;E:/java/ImageProcessHomework/out/artifacts/Defogging/image/process/shiShiQuWu&quot;</span>;</span><br><span class="line">            Defogging.shiShiQuWu(sourcePath+<span class="string">&quot;/&quot;</span>+filename,targetPath+<span class="string">&quot;/&quot;</span>+filename);</span><br><span class="line">            response.setContentType(<span class="string">&quot;text/html;charset=UTF-8&quot;</span>);</span><br><span class="line">            <span class="type">PrintWriter</span> <span class="variable">out</span> <span class="operator">=</span> response.getWriter();</span><br><span class="line">            String json=<span class="string">&quot;&#123;\&quot;imageURL\&quot;:\&quot;&quot;</span>+request.getContextPath()+<span class="string">&quot;/image/process/shiShiQuWu/&quot;</span>+filename+<span class="string">&quot;\&quot;&#125;&quot;</span>;</span><br><span class="line">            out.print(json);</span><br><span class="line">            System.out.println(<span class="string">&quot;实时去雾图片响应成功&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.imgstoreandsend;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.xiaoguan.imageprocess.Defogging;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.fileupload.FileItem;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.fileupload.FileUploadException;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.fileupload.disk.DiskFileItemFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.commons.fileupload.servlet.ServletFileUpload;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> javax.servlet.ServletException;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.annotation.WebServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServlet;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletRequest;</span><br><span class="line"><span class="keyword">import</span> javax.servlet.http.HttpServletResponse;</span><br><span class="line"><span class="keyword">import</span> java.io.File;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"></span><br><span class="line"><span class="meta">@WebServlet(&#123;&quot;/image/store&quot;,&quot;/image/tongTaiLvBo&quot;,&quot;/image/clahe&quot;,&quot;/image/anTongDao&quot;,&quot;/image/shiShiQuWu&quot;&#125;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">ImageStoreServlet</span> <span class="keyword">extends</span> <span class="title class_">HttpServlet</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="keyword">void</span> <span class="title function_">doPost</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException &#123;</span><br><span class="line">        <span class="type">DiskFileItemFactory</span> <span class="variable">diskFileItemFactory</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">DiskFileItemFactory</span>();</span><br><span class="line">        <span class="type">ServletFileUpload</span> <span class="variable">servletFileUpload</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">ServletFileUpload</span>(diskFileItemFactory);</span><br><span class="line">        String filename=<span class="literal">null</span>;</span><br><span class="line">        String sourcePath=<span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            List&lt;FileItem&gt; fileItems = servletFileUpload.parseRequest(request);</span><br><span class="line">            <span class="keyword">for</span>(FileItem fileItem:fileItems)&#123;</span><br><span class="line">                <span class="keyword">if</span>(fileItem.isFormField())</span><br><span class="line">                &#123;</span><br><span class="line">                    System.out.println(<span class="string">&quot;其他情况&quot;</span>);</span><br><span class="line">                &#125;<span class="keyword">else</span> &#123;</span><br><span class="line">                    sourcePath = request.getServletContext().getRealPath(<span class="string">&quot;image&quot;</span>)+<span class="string">&quot;/source&quot;</span>;</span><br><span class="line">                    <span class="type">long</span> <span class="variable">l</span> <span class="operator">=</span> System.currentTimeMillis();</span><br><span class="line">                    String uuid=l+<span class="string">&quot;_&quot;</span>;</span><br><span class="line">                    filename=uuid+fileItem.getName();</span><br><span class="line">                    <span class="type">File</span> <span class="variable">image</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">File</span>(sourcePath, filename);</span><br><span class="line">                    fileItem.write(image);</span><br><span class="line">                    System.out.println(<span class="string">&quot;图片写入成功!&quot;</span>);</span><br><span class="line">                    System.out.println(sourcePath);</span><br><span class="line">                    System.out.println(<span class="string">&quot;haha&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (FileUploadException e) &#123;</span><br><span class="line">            System.out.println(<span class="string">&quot;文件加载错误&quot;</span>);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        request.setAttribute(<span class="string">&quot;sourcePath&quot;</span>,sourcePath);</span><br><span class="line">        request.setAttribute(<span class="string">&quot;filename&quot;</span>,filename);</span><br><span class="line">        request.setAttribute(<span class="string">&quot;requestPath&quot;</span>,request.getServletPath());</span><br><span class="line">        request.getRequestDispatcher(<span class="string">&quot;/image/send&quot;</span>).forward(request,response);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;ch&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Upload Image<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">input</span><span class="selector-attr">[type=<span class="string">&quot;file&quot;</span>]</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: block;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin-bottom</span>: <span class="number">20px</span> ;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">10px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span> solid <span class="number">#ccc</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: <span class="number">#666</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#f9f9f9</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-shadow</span>: inset <span class="number">0</span> <span class="number">1px</span> <span class="number">2px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.1</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">max-width</span>:<span class="number">70%</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">form</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">15%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">50px</span> auto;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: <span class="number">#fff</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">box-shadow</span>: <span class="number">0</span> <span class="number">2px</span> <span class="number">5px</span> <span class="built_in">rgba</span>(<span class="number">0</span>,<span class="number">0</span>,<span class="number">0</span>,<span class="number">0.3</span>);</span></span><br><span class="line"><span class="language-css">            <span class="attribute">position</span>: fixed;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">top</span>: -<span class="number">45px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">left</span>: <span class="number">0</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">input</span><span class="selector-attr">[type=<span class="string">&quot;button&quot;</span>]</span> &#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: dodgerblue;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: none;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">color</span>: white;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">padding</span>: <span class="number">10px</span> <span class="number">20px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-align</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">text-decoration</span>: none;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: inline-block;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">font-size</span>: <span class="number">16px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">margin</span>: <span class="number">4px</span> <span class="number">2px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">cursor</span>: pointer;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border-radius</span>: <span class="number">5px</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-tag">body</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="comment">/* 方便演示，居中显示 */</span></span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">10vh</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">display</span>: flex;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">justify-content</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">align-items</span>: center;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: whitesmoke;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.pic</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">width</span>: <span class="number">260px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">height</span>: <span class="number">260px</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">border</span>: <span class="number">1px</span></span></span><br><span class="line"><span class="language-css">            solid black;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">background-color</span>: cornflowerblue;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">        <span class="selector-class">.pics</span>&#123;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">max-width</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">            <span class="attribute">max-height</span>: <span class="number">100%</span>;</span></span><br><span class="line"><span class="language-css">        &#125;</span></span><br><span class="line"><span class="language-css">    </span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">imageProcess</span>(<span class="params">path,imgId</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> fileInput = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;file&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (<span class="title function_">checkImage</span>()) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> file = fileInput.<span class="property">files</span>[<span class="number">0</span>];</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> formData = <span class="keyword">new</span> <span class="title class_">FormData</span>();</span></span><br><span class="line"><span class="language-javascript">                formData.<span class="title function_">append</span>(<span class="string">&#x27;image&#x27;</span>, file, file.<span class="property">name</span>);</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">var</span> xhr = <span class="keyword">new</span> <span class="title class_">XMLHttpRequest</span>();</span></span><br><span class="line"><span class="language-javascript">                xhr.<span class="property">onreadystatechange</span>=<span class="keyword">function</span> (<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">                    <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">readyState</span>===<span class="number">4</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                        <span class="keyword">if</span>(<span class="variable language_">this</span>.<span class="property">status</span>===<span class="number">200</span>)&#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="keyword">var</span> urlInfo = <span class="title class_">JSON</span>.<span class="title function_">parse</span>(<span class="variable language_">this</span>.<span class="property">responseText</span>);</span></span><br><span class="line"><span class="language-javascript">                            <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(imgId).<span class="property">src</span>=urlInfo.<span class="property">imageURL</span>;</span></span><br><span class="line"><span class="language-javascript">                        &#125; <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                            <span class="title function_">alert</span>(<span class="variable language_">this</span>.<span class="property">status</span>);</span></span><br><span class="line"><span class="language-javascript">                        &#125;</span></span><br><span class="line"><span class="language-javascript">                    &#125;</span></span><br><span class="line"><span class="language-javascript">                &#125;</span></span><br><span class="line"><span class="language-javascript">                xhr.<span class="title function_">open</span>(<span class="string">&#x27;POST&#x27;</span>, <span class="string">&#x27;/Defogging1_war_exploded&#x27;</span>+path+<span class="string">&#x27;&#x27;</span>, <span class="literal">true</span>);</span></span><br><span class="line"><span class="language-javascript">                xhr.<span class="title function_">send</span>(formData);</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">alert</span>(<span class="string">&#x27;图片上传成功!&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">        <span class="keyword">function</span> <span class="title function_">checkImage</span>(<span class="params"></span>) &#123;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> fileInput = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;file&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> filePath = fileInput.<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">var</span> allowedExtensions = <span class="regexp">/(\.jpg|\.jpeg|\.png)$/i</span>;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">if</span> (!allowedExtensions.<span class="title function_">exec</span>(filePath)) &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="title function_">alert</span>(<span class="string">&#x27;请上传正确的图片!&#x27;</span>);</span></span><br><span class="line"><span class="language-javascript">                fileInput.<span class="property">value</span> = <span class="string">&#x27;&#x27;</span>;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> <span class="literal">false</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">            <span class="keyword">else</span> &#123;</span></span><br><span class="line"><span class="language-javascript">                <span class="keyword">return</span> <span class="literal">true</span>;</span></span><br><span class="line"><span class="language-javascript">            &#125;</span></span><br><span class="line"><span class="language-javascript">        &#125;</span></span><br><span class="line"><span class="language-javascript">    </span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">enctype</span>=<span class="string">&quot;multipart/form-data&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;file&quot;</span> <span class="attr">id</span>=<span class="string">&quot;file&quot;</span> <span class="attr">name</span>=<span class="string">&quot;file&quot;</span> &gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;position: absolute; top: 7px; left: 280px;&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;上传并显示原图&quot;</span> <span class="attr">id</span>=<span class="string">&quot;srcImg&quot;</span> <span class="attr">onclick</span>=<span class="string">imageProcess(</span>&quot;/<span class="attr">image</span>/<span class="attr">store</span>&quot;,&quot;<span class="attr">imgs</span>&quot;)&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;position: absolute; top: 180px; left: 0px; &quot;</span>&gt;</span>原图为：<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;position: absolute; top: 180px; left: 300px; &quot;</span>&gt;</span>同态滤波图为：<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;position: absolute; top: 180px; left: 570px; &quot;</span>&gt;</span>CLAHE图为：<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;position: absolute; top: 180px; left: 840px; &quot;</span>&gt;</span>暗通道图为：<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;position: absolute; top: 180px; left: 1110px; &quot;</span>&gt;</span>实时去雾图为：<span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>  <span class="attr">style</span>=<span class="string">&quot;position: absolute; top: 200px; left: 0px; &quot;</span> <span class="attr">class</span>=<span class="string">&quot;pic&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span>=<span class="string">&quot;imgs&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">src</span>=<span class="string">&quot;/Defogging/image/init/backpic.jpg&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">width</span>=<span class="string">&quot;260px&quot;</span> <span class="attr">height</span>=<span class="string">&quot;260px&quot;</span> <span class="attr">class</span>=<span class="string">&quot;pics&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;position: absolute; top: 50px; left: 280px;&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;同态滤波&quot;</span> <span class="attr">id</span>=<span class="string">&quot;uploadImage1&quot;</span> <span class="attr">onclick</span>=<span class="string">imageProcess(</span>&quot;/<span class="attr">image</span>/<span class="attr">tongTaiLvBo</span>&quot;,&quot;<span class="attr">imgp1</span>&quot;)&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>  <span class="attr">style</span>=<span class="string">&quot;position: absolute; top: 200px; left: 300px;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;pic&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span>=<span class="string">&quot;imgp1&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">src</span>=<span class="string">&quot;/Defogging/image/init/backpic.jpg&quot;</span></span></span><br><span class="line"><span class="tag">      <span class="attr">width</span>=<span class="string">&quot;260px&quot;</span> <span class="attr">height</span>=<span class="string">&quot;260px&quot;</span> <span class="attr">class</span>=<span class="string">&quot;pics&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;position: absolute; top: 50px; left: 400px;&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Clahe&quot;</span> <span class="attr">id</span>=<span class="string">&quot;uploadImage2&quot;</span> <span class="attr">onclick</span>=<span class="string">imageProcess(</span>&quot;/<span class="attr">image</span>/<span class="attr">clahe</span>&quot;,&quot;<span class="attr">imgp2</span>&quot;)&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>  <span class="attr">style</span>=<span class="string">&quot;position: absolute; top: 200px; left: 570px;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;pic&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span>=<span class="string">&quot;imgp2&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">src</span>=<span class="string">&quot;/Defogging/image/init/backpic.jpg&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">width</span>=<span class="string">&quot;260px&quot;</span> <span class="attr">height</span>=<span class="string">&quot;260px&quot;</span> <span class="attr">class</span>=<span class="string">&quot;pics&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;position: absolute; top: 50px; left: 500px;&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;暗通道&quot;</span> <span class="attr">id</span>=<span class="string">&quot;uploadImage3&quot;</span> <span class="attr">onclick</span>=<span class="string">imageProcess(</span>&quot;/<span class="attr">image</span>/<span class="attr">anTongDao</span>&quot;,&quot;<span class="attr">imgp3</span>&quot;)&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>  <span class="attr">style</span>=<span class="string">&quot;position: absolute; top: 200px; left: 840px;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;pic&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span>=<span class="string">&quot;imgp3&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">src</span>=<span class="string">&quot;/Defogging/image/init/backpic.jpg&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">width</span>=<span class="string">&quot;260px&quot;</span> <span class="attr">height</span>=<span class="string">&quot;260px&quot;</span> <span class="attr">class</span>=<span class="string">&quot;pics&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">span</span> <span class="attr">style</span>=<span class="string">&quot;position: absolute; top: 7px; left: 450px;&quot;</span>&gt;</span> <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;实时去雾&quot;</span> <span class="attr">id</span>=<span class="string">&quot;uploadImage4&quot;</span> <span class="attr">onclick</span>=<span class="string">imageProcess(</span>&quot;/<span class="attr">image</span>/<span class="attr">shiShiQuWu</span>&quot;,&quot;<span class="attr">imgp4</span>&quot;)&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>  <span class="attr">style</span>=<span class="string">&quot;position: absolute; top: 200px; left: 1110px;&quot;</span> <span class="attr">class</span>=<span class="string">&quot;pic&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">img</span> <span class="attr">id</span>=<span class="string">&quot;imgp4&quot;</span> <span class="attr">alt</span>=<span class="string">&quot;&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">src</span>=<span class="string">&quot;/Defogging/image/init/backpic.jpg&quot;</span></span></span><br><span class="line"><span class="tag">         <span class="attr">width</span>=<span class="string">&quot;260px&quot;</span> <span class="attr">height</span>=<span class="string">&quot;260px&quot;</span> <span class="attr">class</span>=<span class="string">&quot;pics&quot;</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="matlab部分核心去雾代码"><a href="#matlab部分核心去雾代码" class="headerlink" title="matlab部分核心去雾代码"></a>matlab部分核心去雾代码</h3><figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span></span><br><span class="line"><span class="comment">%   My_homofilter：同态滤波算法</span></span><br><span class="line"><span class="comment">%   输入：灰度图I_mean</span></span><br><span class="line"><span class="comment">%   输出：同态滤波后的灰度图output</span></span><br><span class="line"><span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">[output]</span> = <span class="title">My_homofilter</span><span class="params">(I_mean)</span></span></span><br><span class="line">    <span class="comment">%% 第一步 取对数并进行傅里叶变换</span></span><br><span class="line">    I_log = <span class="built_in">log</span>(I_mean+<span class="number">1</span>);</span><br><span class="line">    <span class="comment">% 傅里叶变换</span></span><br><span class="line">    I_fft = fft2(I_log);</span><br><span class="line">    I_fft = fftshift(I_fft);</span><br><span class="line"></span><br><span class="line">    <span class="comment">%% 第二步 频域高斯高通滤波</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">% 高斯滤波器的参数</span></span><br><span class="line">    L = <span class="number">0.3</span>;</span><br><span class="line">    H = <span class="number">1.8</span>;</span><br><span class="line">    C = <span class="number">2</span>;</span><br><span class="line">    <span class="comment">% 截止频率D0</span></span><br><span class="line">    D0 = <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">% 生成mask</span></span><br><span class="line">    [height,width] = <span class="built_in">size</span>(I_mean);</span><br><span class="line">    mask = <span class="built_in">zeros</span>(height,width);</span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:height</span><br><span class="line">        <span class="keyword">for</span> <span class="built_in">j</span>=<span class="number">1</span>:width</span><br><span class="line">            <span class="comment">% 根据距离中心的距离来</span></span><br><span class="line">            D = <span class="built_in">sqrt</span>(((<span class="built_in">i</span>-height/<span class="number">2</span>)^<span class="number">2</span>+(<span class="built_in">j</span>-width/<span class="number">2</span>)^<span class="number">2</span>));</span><br><span class="line">            mask(<span class="built_in">i</span>,<span class="built_in">j</span>) = (H-L)*(<span class="number">1</span>-<span class="built_in">exp</span>(C*(-D/(D0))))+L; <span class="comment">%高斯同态滤波</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="comment">%     % 显示mask的图像</span></span><br><span class="line"><span class="comment">%     figure;</span></span><br><span class="line"><span class="comment">%     imshow(mask,[]);   </span></span><br><span class="line"><span class="comment">%     title(&#x27;mask的图像&#x27;);</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">% 用mask进行点乘</span></span><br><span class="line">    I_fft_gauss = mask.*I_fft;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">%% 第三步 傅里叶逆变换并取指数</span></span><br><span class="line">    I_fft_gauss = ifftshift(I_fft_gauss);</span><br><span class="line">    </span><br><span class="line">    I_ifft = ifft2(I_fft_gauss);</span><br><span class="line">    <span class="comment">% 取指数，恢复原图</span></span><br><span class="line">    I_gray_defog = <span class="built_in">real</span>(<span class="built_in">exp</span>(I_ifft)+<span class="number">1</span>);</span><br><span class="line">    </span><br><span class="line">    output = I_gray_defog;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">%% 鲁棒性测试——基于同态滤波的去雾算法</span></span><br><span class="line"></span><br><span class="line">tic</span><br><span class="line"><span class="comment">%% 清空工作区与变量</span></span><br><span class="line">clc;</span><br><span class="line">clear;</span><br><span class="line">image_number=<span class="number">2</span>;</span><br><span class="line">imageName=strcat(num2str(image_number),<span class="string">&#x27;.jpg&#x27;</span>);</span><br><span class="line">I = imread(imageName);</span><br><span class="line"><span class="built_in">figure</span>;</span><br><span class="line">imshow(I);</span><br><span class="line">title([<span class="string">&#x27;第&#x27;</span>,num2str(image_number),<span class="string">&#x27;幅图像的原图&#x27;</span>]);</span><br><span class="line"></span><br><span class="line"><span class="comment">%% 进行同态滤波</span></span><br><span class="line"><span class="comment">% 取三个通道的平均灰度作为参照</span></span><br><span class="line">I_mean = <span class="built_in">mean</span>(I,<span class="number">3</span>);</span><br><span class="line"><span class="comment">% 去double方便对数运算</span></span><br><span class="line">I_mean = im2double(I_mean);</span><br><span class="line"></span><br><span class="line"><span class="comment">% 调用同态滤波函数</span></span><br><span class="line">I_gray_defog = My_homofilter(I_mean);</span><br><span class="line"></span><br><span class="line"><span class="comment">% 归一化到[0,1]</span></span><br><span class="line">max_pixel = <span class="built_in">max</span>(<span class="built_in">max</span>(I_gray_defog));</span><br><span class="line">I_gray_defog = mat2gray(I_gray_defog,[<span class="number">0</span>,max_pixel]);</span><br><span class="line"></span><br><span class="line"><span class="comment">%% 利用同态滤波后的平均灰度来映射</span></span><br><span class="line"><span class="comment">% 分三个通道</span></span><br><span class="line">I_defog = <span class="built_in">zeros</span>(<span class="built_in">size</span>(I));</span><br><span class="line"><span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:<span class="number">3</span></span><br><span class="line">    <span class="comment">% 用去雾的平均灰度来映射</span></span><br><span class="line">    I_defog(:,:,<span class="built_in">i</span>) = (double(I(:,:,<span class="built_in">i</span>)).*I_gray_defog)./I_mean ;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"><span class="comment">% 归一化到[0,1]</span></span><br><span class="line">max_pixel = <span class="built_in">max</span>( <span class="built_in">max</span>( <span class="built_in">max</span>(I_defog) ) );</span><br><span class="line">min_pixel = <span class="built_in">min</span>( <span class="built_in">min</span>( <span class="built_in">min</span>(I_defog) ) );</span><br><span class="line">I_defog = mat2gray(I_defog,[min_pixel,max_pixel]);</span><br><span class="line"><span class="comment">% 提升亮度</span></span><br><span class="line">I_defog = <span class="number">1.35</span>.*I_defog;</span><br><span class="line"></span><br><span class="line"><span class="comment">%% 输出图像</span></span><br><span class="line"><span class="built_in">figure</span>;</span><br><span class="line">imshow(I_defog,[]);</span><br><span class="line">title([<span class="string">&#x27;第&#x27;</span>,num2str(image_number),<span class="string">&#x27;幅图像的去雾图像&#x27;</span>]);</span><br><span class="line">imwrite(I_defog,<span class="string">&#x27;D:/bb.jpg&#x27;</span>);</span><br><span class="line">clc;</span><br><span class="line">clear;</span><br><span class="line">toc</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span></span><br><span class="line"><span class="comment">%   My_adapthisteq：限制对比度的自适应直方图算法</span></span><br><span class="line"><span class="comment">%   输入：灰度图I_gray</span></span><br><span class="line"><span class="comment">%   输出：均衡化后的灰度图output</span></span><br><span class="line"><span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">[output]</span> = <span class="title">My_adapthisteq</span><span class="params">(I_gray)</span></span></span><br><span class="line">    <span class="comment">%% 第一步 获取图片基本信息</span></span><br><span class="line">    [height,width] = <span class="built_in">size</span>(I_gray);  </span><br><span class="line">    <span class="comment">% 获取最大最小像素</span></span><br><span class="line">    min_pixel = double(<span class="built_in">min</span>(<span class="built_in">min</span>(I_gray)));  </span><br><span class="line">    max_pixel = double(<span class="built_in">max</span>(<span class="built_in">max</span>(I_gray)));  </span><br><span class="line">    </span><br><span class="line">    <span class="comment">%% 第二步 对图片进行分块</span></span><br><span class="line">    <span class="comment">% |-------Y</span></span><br><span class="line">    <span class="comment">% |</span></span><br><span class="line">    <span class="comment">% |</span></span><br><span class="line">    <span class="comment">% X</span></span><br><span class="line">    <span class="comment">% 根据经验按照图片尺寸分成若干个子块</span></span><br><span class="line">    <span class="comment">% Y分为（width/100-2）个子块</span></span><br><span class="line">    subpart_Y = <span class="built_in">floor</span>(width/<span class="number">100</span>)<span class="number">-2</span>;  </span><br><span class="line">    <span class="comment">% X分为（height/100-1）个子块</span></span><br><span class="line">    subpart_X = <span class="built_in">floor</span>(height/<span class="number">100</span>)<span class="number">-1</span>;  </span><br><span class="line">    <span class="comment">% 子块的宽和高</span></span><br><span class="line">    height_size = <span class="built_in">ceil</span>(height/subpart_X);  </span><br><span class="line">    width_size = <span class="built_in">ceil</span>(width/subpart_Y);  </span><br><span class="line">    </span><br><span class="line">    <span class="comment">% 不能保证整除，需要补零  </span></span><br><span class="line">    delta_y = subpart_X*height_size - height;  </span><br><span class="line">    delta_x = subpart_Y*width_size - width;  </span><br><span class="line">    </span><br><span class="line">    <span class="comment">% 补零</span></span><br><span class="line">    temp_Image = <span class="built_in">zeros</span>(height+delta_y,width+delta_x);  </span><br><span class="line">    temp_Image(<span class="number">1</span>:height,<span class="number">1</span>:width) = I_gray;  </span><br><span class="line">    </span><br><span class="line">    <span class="comment">% 新的高和宽</span></span><br><span class="line">    new_width = width + delta_x;  </span><br><span class="line">    new_height = height + delta_y;  </span><br><span class="line">    <span class="comment">% 像素点总数  </span></span><br><span class="line">    sum_pixels = width_size * width_size; </span><br><span class="line">    </span><br><span class="line">    <span class="comment">%% 第三步 建立Look-up-table</span></span><br><span class="line">    <span class="comment">% 像素容器的总数，决定直方图横轴的间隔</span></span><br><span class="line">    sum_pixel_bins = <span class="number">256</span>;</span><br><span class="line">    <span class="comment">% 建立Look-Up-Table</span></span><br><span class="line">    look_up_table = <span class="built_in">zeros</span>(max_pixel+<span class="number">1</span>,<span class="number">1</span>);  </span><br><span class="line">    </span><br><span class="line">    <span class="comment">% 通过输入的灰度值范围进行映射</span></span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">i</span> = min_pixel:max_pixel  </span><br><span class="line">        look_up_table(<span class="built_in">i</span>+<span class="number">1</span>) = <span class="built_in">fix</span>(<span class="built_in">i</span> - min_pixel);  </span><br><span class="line">    <span class="keyword">end</span>  </span><br><span class="line">    </span><br><span class="line">    <span class="comment">%% 第四步 为每个子块建立直方图</span></span><br><span class="line">    <span class="comment">% 归一化整幅图的灰度值</span></span><br><span class="line">    <span class="comment">% 使用Look-up-table</span></span><br><span class="line">    pixel_bin = <span class="built_in">zeros</span>(new_height, new_width);  </span><br><span class="line">    <span class="keyword">for</span> m = <span class="number">1</span> : new_height  </span><br><span class="line">        <span class="keyword">for</span> n = <span class="number">1</span> : new_width  </span><br><span class="line">            pixel_bin(m,n) = <span class="number">1</span> + look_up_table(temp_Image(m,n) + <span class="number">1</span>);  </span><br><span class="line">        <span class="keyword">end</span>  </span><br><span class="line">    <span class="keyword">end</span>  </span><br><span class="line">    </span><br><span class="line">    <span class="comment">% Hist为长度256的4*8矩阵，用来存储直方图</span></span><br><span class="line">    <span class="comment">% 4*8表示划分成了4*8个子块，256表示灰度级</span></span><br><span class="line">    <span class="comment">% Hist(x,y,i)表示</span></span><br><span class="line">    <span class="comment">% （在划分的坐标为(x,y)的子块中，像素值=i的像素点）的总数</span></span><br><span class="line">    Hist = <span class="built_in">zeros</span>(subpart_X, subpart_Y, <span class="number">256</span>);  </span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">i</span>=<span class="number">1</span>:subpart_X  </span><br><span class="line">        <span class="keyword">for</span> <span class="built_in">j</span>=<span class="number">1</span>:subpart_Y  </span><br><span class="line">            <span class="comment">% 为每个子块建立直方图</span></span><br><span class="line">            tmp = uint8(pixel_bin(<span class="number">1</span>+(<span class="built_in">i</span><span class="number">-1</span>)*height_size:<span class="built_in">i</span>*height_size, <span class="number">1</span>+(<span class="built_in">j</span><span class="number">-1</span>)*width_size:<span class="built_in">j</span>*width_size));  </span><br><span class="line">            [Hist(<span class="built_in">i</span>, <span class="built_in">j</span>, :), x] = imhist(tmp, <span class="number">256</span>);  </span><br><span class="line">        <span class="keyword">end</span>  </span><br><span class="line">    <span class="keyword">end</span>  </span><br><span class="line">    <span class="comment">% 调整灰度值的那一维  </span></span><br><span class="line">    Hist = <span class="built_in">circshift</span>(Hist,[<span class="number">0</span>, <span class="number">0</span>, <span class="number">-1</span>]);  </span><br><span class="line">    </span><br><span class="line">    <span class="comment">%% 第五步 剪裁直方图 </span></span><br><span class="line">    <span class="comment">% 剪裁参数</span></span><br><span class="line">    clip_limit = <span class="number">2.5</span>;  </span><br><span class="line">    clip_limit = <span class="built_in">max</span>(<span class="number">1</span>,clip_limit * height_size * width_size/sum_pixel_bins);  </span><br><span class="line">    </span><br><span class="line">    <span class="comment">% 调用剪裁函数</span></span><br><span class="line">    Hist = My_clip_histogram(Hist,sum_pixel_bins,clip_limit,subpart_X,subpart_Y);  </span><br><span class="line">    </span><br><span class="line">    <span class="comment">%% 第六步 灰度值映射和线性插值处理</span></span><br><span class="line">    Map = My_map_histogram(Hist, min_pixel, max_pixel, sum_pixel_bins, sum_pixels, subpart_X, subpart_Y);  </span><br><span class="line">    y_I = <span class="number">1</span>;  </span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:subpart_X+<span class="number">1</span>  </span><br><span class="line">        <span class="comment">% 单独处理边界</span></span><br><span class="line">        <span class="keyword">if</span> <span class="built_in">i</span> == <span class="number">1</span>  </span><br><span class="line">            sub_Y = <span class="built_in">floor</span>(height_size/<span class="number">2</span>);  </span><br><span class="line">            y_Up = <span class="number">1</span>;  </span><br><span class="line">            y_Bottom = <span class="number">1</span>;  </span><br><span class="line">        <span class="keyword">elseif</span> <span class="built_in">i</span> == subpart_X+<span class="number">1</span>  </span><br><span class="line">            sub_Y = <span class="built_in">floor</span>(height_size/<span class="number">2</span>);  </span><br><span class="line">            y_Up = subpart_X;  </span><br><span class="line">            y_Bottom = subpart_X;  </span><br><span class="line">        <span class="comment">% 否则在内部</span></span><br><span class="line">        <span class="keyword">else</span>  </span><br><span class="line">            sub_Y = height_size;  </span><br><span class="line">            y_Up = <span class="built_in">i</span> - <span class="number">1</span>;  </span><br><span class="line">            y_Bottom = <span class="built_in">i</span>;  </span><br><span class="line">        <span class="keyword">end</span>  </span><br><span class="line">        xI = <span class="number">1</span>;  </span><br><span class="line">        <span class="comment">% 单独处理边界</span></span><br><span class="line">        <span class="keyword">for</span> <span class="built_in">j</span> = <span class="number">1</span>:subpart_Y+<span class="number">1</span>  </span><br><span class="line">            <span class="keyword">if</span> <span class="built_in">j</span> == <span class="number">1</span>  </span><br><span class="line">                sub_X = <span class="built_in">floor</span>(width_size/<span class="number">2</span>);  </span><br><span class="line">                x_Left = <span class="number">1</span>;  </span><br><span class="line">                x_Right = <span class="number">1</span>;  </span><br><span class="line">            <span class="keyword">elseif</span> <span class="built_in">j</span> == subpart_Y+<span class="number">1</span>  </span><br><span class="line">                sub_X = <span class="built_in">floor</span>(width_size/<span class="number">2</span>);  </span><br><span class="line">                x_Left = subpart_Y;  </span><br><span class="line">                x_Right = subpart_Y;</span><br><span class="line">            <span class="comment">% 否则在内部</span></span><br><span class="line">            <span class="keyword">else</span>  </span><br><span class="line">                sub_X = width_size;  </span><br><span class="line">                x_Left = <span class="built_in">j</span> - <span class="number">1</span>;  </span><br><span class="line">                x_Right = <span class="built_in">j</span>;  </span><br><span class="line">            <span class="keyword">end</span>  </span><br><span class="line">            <span class="comment">% 进行灰度值映射</span></span><br><span class="line">            U_L = Map(y_Up,x_Left,:);  </span><br><span class="line">            U_R = Map(y_Up,x_Right,:);  </span><br><span class="line">            B_L = Map(y_Bottom,x_Left,:);  </span><br><span class="line">            B_R = Map(y_Bottom,x_Right,:);  </span><br><span class="line">            sub_Image = pixel_bin(y_I:y_I+sub_Y<span class="number">-1</span>,xI:xI+sub_X<span class="number">-1</span>);  </span><br><span class="line">      </span><br><span class="line">            <span class="comment">% 线性插值处理 </span></span><br><span class="line">            s_Image = <span class="built_in">zeros</span>(<span class="built_in">size</span>(sub_Image));  </span><br><span class="line">            num = sub_Y * sub_X;  </span><br><span class="line">            <span class="keyword">for</span> m = <span class="number">0</span>:sub_Y - <span class="number">1</span>  </span><br><span class="line">                inverse_I = sub_Y - m;  </span><br><span class="line">                <span class="keyword">for</span> n = <span class="number">0</span>:sub_X - <span class="number">1</span>  </span><br><span class="line">                    inverse_J = sub_X - n;  </span><br><span class="line">                    val = sub_Image(m+<span class="number">1</span>,n+<span class="number">1</span>);  </span><br><span class="line">                    s_Image(m+<span class="number">1</span>, n+<span class="number">1</span>) = (inverse_I*(inverse_J*U_L(val) + n*U_R(val)) ...  </span><br><span class="line">                                    + m*(inverse_J*B_L(val) + n*B_R(val)))/num;  </span><br><span class="line">                <span class="keyword">end</span>  </span><br><span class="line">            <span class="keyword">end</span>     </span><br><span class="line">            output(y_I:y_I+sub_Y<span class="number">-1</span>, xI:xI+sub_X<span class="number">-1</span>) = s_Image;  </span><br><span class="line">            xI = xI + sub_X;  </span><br><span class="line">        <span class="keyword">end</span>  </span><br><span class="line">        y_I = y_I + sub_Y;  </span><br><span class="line">    <span class="keyword">end</span>  </span><br><span class="line">    </span><br><span class="line">    <span class="comment">%% 第七步 输出非补零的部分</span></span><br><span class="line">    output = output(<span class="number">1</span>:height, <span class="number">1</span>:width);  </span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span></span><br><span class="line"><span class="comment">%   My_adapthisteq：剪裁函数，用于剪裁直方图并且重新分配像素值,</span></span><br><span class="line"><span class="comment">%                   可以把超过Clip_limit的像素值均匀分配到直方图</span></span><br><span class="line"><span class="comment">%                    的其他位置</span></span><br><span class="line"><span class="comment">%   输入：输入直方图Hist</span></span><br><span class="line"><span class="comment">%         直方图横轴总数sum_pixel_bin</span></span><br><span class="line"><span class="comment">%         剪裁阈值Clip_limit</span></span><br><span class="line"><span class="comment">%         高分成的子块数subpart_X  </span></span><br><span class="line"><span class="comment">%         宽分成的子块数subpart_Y</span></span><br><span class="line"><span class="comment">%   输出：剪裁后的直方图Hist</span></span><br><span class="line"><span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">[Hist]</span> = <span class="title">My_clip_histogram</span><span class="params">(Hist,sum_pixel_bin,clip_limit,subpart_X,subpart_Y)</span></span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:subpart_X</span><br><span class="line">        <span class="keyword">for</span> <span class="built_in">j</span> = <span class="number">1</span>:subpart_Y</span><br><span class="line">           <span class="comment">%% 第一步 计算超过阈值的像素值总数 </span></span><br><span class="line">            sum_excess = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> nr = <span class="number">1</span>:sum_pixel_bin</span><br><span class="line">                excess = Hist(<span class="built_in">i</span>,<span class="built_in">j</span>,nr) - clip_limit;</span><br><span class="line">                <span class="keyword">if</span> excess &gt; <span class="number">0</span></span><br><span class="line">                    sum_excess = sum_excess + excess;</span><br><span class="line">                <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line"></span><br><span class="line">           <span class="comment">%% 第二步 剪裁并重建直方图</span></span><br><span class="line">            <span class="comment">% 平均超过的像素值</span></span><br><span class="line">            bin_averate = sum_excess / sum_pixel_bin;</span><br><span class="line">            <span class="comment">% 上限，保证重建的直方图不超过阈值</span></span><br><span class="line">            upper = clip_limit - bin_averate;</span><br><span class="line">            <span class="keyword">for</span> nr = <span class="number">1</span>:sum_pixel_bin</span><br><span class="line">                <span class="comment">% 若大于阈值，直接裁掉</span></span><br><span class="line">                <span class="keyword">if</span> Hist(<span class="built_in">i</span>,<span class="built_in">j</span>,nr) &gt; clip_limit</span><br><span class="line">                    Hist(<span class="built_in">i</span>,<span class="built_in">j</span>,nr) = clip_limit;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                    <span class="comment">% 否则，若大于上限，把这些像素值设为阈值</span></span><br><span class="line">                    <span class="keyword">if</span> Hist(<span class="built_in">i</span>,<span class="built_in">j</span>,nr) &gt; upper</span><br><span class="line">                        <span class="comment">% 从总数中减去</span></span><br><span class="line">                        sum_excess = sum_excess + upper - Hist(<span class="built_in">i</span>,<span class="built_in">j</span>,nr);</span><br><span class="line">                        Hist(<span class="built_in">i</span>,<span class="built_in">j</span>,nr) = clip_limit;</span><br><span class="line">                    <span class="keyword">else</span></span><br><span class="line">                        <span class="comment">% 否则，若小于上限，则加上平均超过的像素值</span></span><br><span class="line">                        sum_excess = sum_excess - bin_averate;</span><br><span class="line">                        Hist(<span class="built_in">i</span>,<span class="built_in">j</span>,nr) = Hist(<span class="built_in">i</span>,<span class="built_in">j</span>,nr) + bin_averate;</span><br><span class="line">                    <span class="keyword">end</span></span><br><span class="line">                <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment">% 若超过像素值总数大于零，再平均分给每一个像素值</span></span><br><span class="line">            <span class="keyword">if</span> sum_excess &gt; <span class="number">0</span></span><br><span class="line">                <span class="comment">% 计算步长</span></span><br><span class="line">                step_size = <span class="built_in">max</span>(<span class="number">1</span>,<span class="built_in">fix</span>(<span class="number">1</span>+sum_excess/sum_pixel_bin));</span><br><span class="line">                <span class="comment">% 从最小灰度级到最大灰度级按照步长循环搜索</span></span><br><span class="line">                <span class="keyword">for</span> nr = <span class="number">1</span>:sum_pixel_bin</span><br><span class="line">                    sum_excess = sum_excess - step_size;</span><br><span class="line">                    Hist(<span class="built_in">i</span>,<span class="built_in">j</span>,nr) = Hist(<span class="built_in">i</span>,<span class="built_in">j</span>,nr) + step_size;</span><br><span class="line">                    <span class="comment">% 若小于1，循环结束</span></span><br><span class="line">                    <span class="keyword">if</span> sum_excess &lt; <span class="number">1</span></span><br><span class="line">                        <span class="keyword">break</span>;</span><br><span class="line">                    <span class="keyword">end</span></span><br><span class="line">                <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            </span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span></span><br><span class="line"><span class="comment">%   My_adapthisteq：计算重分配的look_up_table，范围从min_pixel到</span></span><br><span class="line"><span class="comment">%                   max_pixel</span></span><br><span class="line"><span class="comment">%   输入：输入直方图Hist  </span></span><br><span class="line"><span class="comment">%         灰度值上下限min_pixel,max_pixel</span></span><br><span class="line"><span class="comment">%         像素点总数 </span></span><br><span class="line"><span class="comment">%         直方图横轴总数sum_pixel_bin</span></span><br><span class="line"><span class="comment">%         高分成的子块数subpart_X  </span></span><br><span class="line"><span class="comment">%         宽分成的子块数subpart_Y</span></span><br><span class="line"><span class="comment">%   输出：重分配的look_up_tabl</span></span><br><span class="line"><span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">[output]</span> = <span class="title">My_map_histogram</span><span class="params">(Hist,min_pixel,max_pixel,sum_pixel_bins,sum_pixels,subpart_X,subpart_Y)</span></span></span><br><span class="line">    output=<span class="built_in">zeros</span>(subpart_X,subpart_Y,sum_pixel_bins);</span><br><span class="line">    scale = (max_pixel - min_pixel)/sum_pixels;</span><br><span class="line">    <span class="comment">% 遍历计算</span></span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:subpart_X</span><br><span class="line">        <span class="keyword">for</span> <span class="built_in">j</span> = <span class="number">1</span>:subpart_Y</span><br><span class="line">            sum = <span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span> nr = <span class="number">1</span>:sum_pixel_bins</span><br><span class="line">                sum = sum + Hist(<span class="built_in">i</span>,<span class="built_in">j</span>,nr);</span><br><span class="line">                output(<span class="built_in">i</span>,<span class="built_in">j</span>,nr) = <span class="built_in">fix</span>( <span class="built_in">min</span>( min_pixel + sum*scale,max_pixel ) );</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">%% 鲁棒性测试——基于局部对比度增强的CLAHE算法</span></span><br><span class="line">tic</span><br><span class="line"></span><br><span class="line"><span class="comment">%% 清空工作区与变量</span></span><br><span class="line">clc;</span><br><span class="line">clear;</span><br><span class="line"><span class="keyword">for</span> image_number=<span class="number">1</span>:<span class="number">8</span></span><br><span class="line">    imageName=strcat(num2str(image_number),<span class="string">&#x27;.jpg&#x27;</span>);</span><br><span class="line">    img = imread(imageName);</span><br><span class="line">    <span class="built_in">figure</span>;</span><br><span class="line">    imshow(img);</span><br><span class="line">    title([<span class="string">&#x27;第&#x27;</span>,num2str(image_number),<span class="string">&#x27;幅图像的原图&#x27;</span>]);</span><br><span class="line"></span><br><span class="line">    <span class="comment">%% 在LAB空间进行去雾</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">% RGB转LAB</span></span><br><span class="line">    transform = makecform(<span class="string">&#x27;srgb2lab&#x27;</span>);  </span><br><span class="line">    LAB = applycform(img,transform);  </span><br><span class="line"></span><br><span class="line">    <span class="comment">% 提取亮度分量 L</span></span><br><span class="line">    L = LAB(:,:,<span class="number">1</span>); </span><br><span class="line"></span><br><span class="line">    <span class="comment">% 对L进行CLAHE</span></span><br><span class="line">    LAB(:,:,<span class="number">1</span>) = My_adapthisteq(L);</span><br><span class="line">    <span class="comment">% 减小一定的亮度</span></span><br><span class="line">    LAB(:,:,<span class="number">1</span>) = LAB(:,:,<span class="number">1</span>)<span class="number">-50</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">%% 转回到RGB空间</span></span><br><span class="line">    cform2srgb = makecform(<span class="string">&#x27;lab2srgb&#x27;</span>);  </span><br><span class="line">    J = applycform(LAB, cform2srgb);</span><br><span class="line"></span><br><span class="line">    <span class="comment">%% 输出图像</span></span><br><span class="line">    <span class="built_in">figure</span>;</span><br><span class="line">    J = <span class="number">1.35</span>.*J;</span><br><span class="line">    imshow(J);  </span><br><span class="line">    title([<span class="string">&#x27;第&#x27;</span>,num2str(image_number),<span class="string">&#x27;幅图像的去雾图像&#x27;</span>]);</span><br><span class="line">    clc;</span><br><span class="line">    clear;</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">    toc</span><br></pre></td></tr></table></figure>

<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span></span><br><span class="line"><span class="comment">%    Cumulative_sum：计算指定半径的累积和</span></span><br><span class="line"><span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">Cumulative_sum</span> = <span class="title">My_cumulative_sum</span><span class="params">(input, r)</span></span></span><br><span class="line"></span><br><span class="line">    <span class="comment">% output(x, y)=sum(sum(imSrc(x-r:x+r,y-r:y+r)));</span></span><br><span class="line">    <span class="comment">% 和colfilt(imSrc, [2*r+1, 2*r+1], &#x27;sliding&#x27;, @sum)函数实现一样的功能，但是速度非常快;</span></span><br><span class="line">   </span><br><span class="line"></span><br><span class="line">    [height, width] = <span class="built_in">size</span>(input);</span><br><span class="line">    Cumulative_sum = <span class="built_in">zeros</span>(<span class="built_in">size</span>(input));</span><br><span class="line"></span><br><span class="line">    <span class="comment">% 计算列的累积和</span></span><br><span class="line">    cumulative = cumsum(input, <span class="number">1</span>);</span><br><span class="line">    <span class="comment">% 计算列的导数</span></span><br><span class="line">    Cumulative_sum(<span class="number">1</span>:r+<span class="number">1</span>, :) = cumulative(<span class="number">1</span>+r:<span class="number">2</span>*r+<span class="number">1</span>, :);</span><br><span class="line">    Cumulative_sum(r+<span class="number">2</span>:height-r, :) = cumulative(<span class="number">2</span>*r+<span class="number">2</span>:height, :) - cumulative(<span class="number">1</span>:height<span class="number">-2</span>*r<span class="number">-1</span>, :);</span><br><span class="line">    Cumulative_sum(height-r+<span class="number">1</span>:height, :) = <span class="built_in">repmat</span>(cumulative(height, :), [r, <span class="number">1</span>]) ...</span><br><span class="line">                                            - cumulative(height<span class="number">-2</span>*r:height-r<span class="number">-1</span>, :);</span><br><span class="line"></span><br><span class="line">    <span class="comment">% 计算行的累积和</span></span><br><span class="line">    cumulative = cumsum(Cumulative_sum, <span class="number">2</span>);</span><br><span class="line">    <span class="comment">% 计算行的导数</span></span><br><span class="line">    Cumulative_sum(:, <span class="number">1</span>:r+<span class="number">1</span>) = cumulative(:, <span class="number">1</span>+r:<span class="number">2</span>*r+<span class="number">1</span>);</span><br><span class="line">    Cumulative_sum(:, r+<span class="number">2</span>:width-r) = cumulative(:, <span class="number">2</span>*r+<span class="number">2</span>:width) - cumulative(:, <span class="number">1</span>:width<span class="number">-2</span>*r<span class="number">-1</span>);</span><br><span class="line">    Cumulative_sum(:, width-r+<span class="number">1</span>:width) = <span class="built_in">repmat</span>(cumulative(:, width), [<span class="number">1</span>, r])...</span><br><span class="line">                                            - cumulative(:, width<span class="number">-2</span>*r:width-r<span class="number">-1</span>);</span><br><span class="line"><span class="keyword">end</span></span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span></span><br><span class="line"><span class="comment">%    My_darkchannel：求暗通道</span></span><br><span class="line"><span class="comment">%   输入：</span></span><br><span class="line"><span class="comment">%       I：输入RGB图像</span></span><br><span class="line"><span class="comment">%       window_size：暗通道最小值滤波的窗口大小</span></span><br><span class="line"><span class="comment">%   输出：output：暗通道</span></span><br><span class="line"><span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">[output]</span> = <span class="title">My_darkchannel</span><span class="params">(I,window_size)</span></span></span><br><span class="line"></span><br><span class="line">    <span class="comment">%% 第一步 读取图像信息</span></span><br><span class="line">	<span class="comment">% 获取图像大小和维度</span></span><br><span class="line">    [height,width,~] = <span class="built_in">size</span>(I);</span><br><span class="line">    <span class="comment">% 初始化暗通道图像</span></span><br><span class="line">    dark_channel = <span class="built_in">ones</span>(height,width);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">%% 第二步 获取每个像素点三个通道的最小值</span></span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:height</span><br><span class="line">        <span class="keyword">for</span> <span class="built_in">j</span> = <span class="number">1</span>:width</span><br><span class="line">            <span class="comment">% 获取像素点位置三个通道的最小值</span></span><br><span class="line">            dark_channel(<span class="built_in">i</span>,<span class="built_in">j</span>) = <span class="built_in">min</span>( I(<span class="built_in">i</span>,<span class="built_in">j</span>,:) );</span><br><span class="line"> </span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span> </span><br><span class="line">    </span><br><span class="line">    <span class="comment">%% 第三步 最小值滤波</span></span><br><span class="line">    <span class="comment">% 调用My_minfilter函数进行最小值滤波</span></span><br><span class="line">    min_dark_channel = My_minfilter(dark_channel,window_size);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">%% 第四步 输出暗通道</span></span><br><span class="line">    output = min_dark_channel;</span><br><span class="line">    </span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span></span><br><span class="line"><span class="comment">%    My_estimateA：估计全局大气光A</span></span><br><span class="line"><span class="comment">%   输入：</span></span><br><span class="line"><span class="comment">%       I：输入RGB图像</span></span><br><span class="line"><span class="comment">%       dark_channel：I的暗通道</span></span><br><span class="line"><span class="comment">%   输出：output：RGB三个通道的全局大气光A</span></span><br><span class="line"><span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">[output]</span> = <span class="title">My_estimateA</span><span class="params">(I,dark_channel)</span></span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">%% 第一步 初始化A并读取信息</span></span><br><span class="line">    A = <span class="built_in">zeros</span>(<span class="number">1</span>,<span class="number">1</span>,<span class="number">3</span>);</span><br><span class="line">    [height,width] = <span class="built_in">size</span>(dark_channel);</span><br><span class="line">    </span><br><span class="line">   </span><br><span class="line">    </span><br><span class="line">    <span class="comment">% 一共要取的点个数（亮度值前0.1%一共点数)</span></span><br><span class="line">    points_number = <span class="built_in">round</span>(width * height * <span class="number">0.001</span>);</span><br><span class="line">    <span class="comment">% 下面从最亮点中计算A的值</span></span><br><span class="line">    <span class="comment">% 从零开始迭代</span></span><br><span class="line">    <span class="keyword">for</span> k = <span class="number">1</span>:points_number    </span><br><span class="line">        </span><br><span class="line">         <span class="comment">%% 第二步 取出dark_channel里的亮点</span></span><br><span class="line">        brightest_points = <span class="built_in">max</span>( <span class="built_in">max</span>(dark_channel) );</span><br><span class="line">        [<span class="built_in">i</span>,<span class="built_in">j</span>] = <span class="built_in">find</span> (dark_channel==brightest_points);</span><br><span class="line">        <span class="comment">% 可能有多个最亮点，取第一个即可</span></span><br><span class="line">        <span class="built_in">i</span> = <span class="built_in">i</span>(<span class="number">1</span>);</span><br><span class="line">        <span class="built_in">j</span> = <span class="built_in">j</span>(<span class="number">1</span>);</span><br><span class="line">        <span class="comment">% 将此最亮点置0，方便找寻第二亮的点</span></span><br><span class="line">        dark_channel(<span class="built_in">i</span>,<span class="built_in">j</span>) = <span class="number">0</span>;</span><br><span class="line">        </span><br><span class="line">         <span class="comment">%% 第三步 根据亮点的位置计算A值</span></span><br><span class="line">        <span class="comment">% 在原图中对应位置找到它的亮度值</span></span><br><span class="line">        <span class="comment">% 对三个通道取平均</span></span><br><span class="line">        <span class="comment">% 若大于A，则更新A的值</span></span><br><span class="line">        <span class="keyword">if</span>(<span class="built_in">mean</span>( I(<span class="built_in">i</span>,<span class="built_in">j</span>,:) )&gt;<span class="built_in">mean</span>(A(<span class="number">1</span>,<span class="number">1</span>,:)))</span><br><span class="line">            <span class="comment">% 分别记录三个通道的A值</span></span><br><span class="line">            A(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>) = (A(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>)+I(<span class="built_in">i</span>,<span class="built_in">j</span>,<span class="number">1</span>))/<span class="number">2</span>;</span><br><span class="line">            A(<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>) = (A(<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>)+I(<span class="built_in">i</span>,<span class="built_in">j</span>,<span class="number">2</span>))/<span class="number">2</span>;</span><br><span class="line">            A(<span class="number">1</span>,<span class="number">1</span>,<span class="number">3</span>) = (A(<span class="number">1</span>,<span class="number">1</span>,<span class="number">3</span>)+I(<span class="built_in">i</span>,<span class="built_in">j</span>,<span class="number">3</span>))/<span class="number">2</span>;</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">%% 第四步 输出A</span></span><br><span class="line">    output = A;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span></span><br><span class="line"><span class="comment">%   My_guidedfilter：导向滤波，优化投射率矩阵</span></span><br><span class="line"><span class="comment">%   输入：</span></span><br><span class="line"><span class="comment">%       guide_image：向导图片</span></span><br><span class="line"><span class="comment">%       I：滤波图片</span></span><br><span class="line"><span class="comment">%       radius：滤波半径</span></span><br><span class="line"><span class="comment">%       sooth_parameter：平滑程度</span></span><br><span class="line"><span class="comment">%   输出：output：优化的投射率矩阵</span></span><br><span class="line"><span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">[output]</span> = <span class="title">My_guidedfilter</span><span class="params">(guide_image, I, radius, sooth_parameter)</span></span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    [height, width] = <span class="built_in">size</span>(guide_image);</span><br><span class="line">    <span class="comment">% 投射率矩阵中半径radius的累积和，便于求平均</span></span><br><span class="line">    N = My_cumulative_sum(<span class="built_in">ones</span>(height, width), radius); </span><br><span class="line">    </span><br><span class="line">    <span class="comment">% 向导图的平均</span></span><br><span class="line">    mean_guide = My_cumulative_sum(guide_image, radius) ./ N;</span><br><span class="line">    <span class="comment">% 滤波图的平均</span></span><br><span class="line">    mean_I = My_cumulative_sum(I, radius) ./ N;</span><br><span class="line">    <span class="comment">% 计算向导图和滤波图的积的平均</span></span><br><span class="line">    mean_IG = My_cumulative_sum(guide_image.*I, radius) ./ N;</span><br><span class="line">    <span class="comment">% 计算向导图和滤波图的协方差</span></span><br><span class="line">    cov_IG = mean_IG - mean_guide .* mean_I;</span><br><span class="line">    <span class="comment">% 计算向导图平方的平均</span></span><br><span class="line">    mean_II = My_cumulative_sum(guide_image.*guide_image, radius) ./ N;</span><br><span class="line">    <span class="comment">% 计算滤波图片的方差</span></span><br><span class="line">    var_I = mean_II - mean_guide .* mean_guide;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">% 求a</span></span><br><span class="line">    a = cov_IG ./ (var_I + sooth_parameter);</span><br><span class="line">    <span class="comment">% 求b</span></span><br><span class="line">    b = mean_I - a .* mean_guide; </span><br><span class="line">    </span><br><span class="line">    <span class="comment">% 求a的平均</span></span><br><span class="line">    mean_a = My_cumulative_sum(a, radius) ./ N;</span><br><span class="line">    <span class="comment">% 求b的平均</span></span><br><span class="line">    mean_b = My_cumulative_sum(b, radius) ./ N;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">% 求q</span></span><br><span class="line">    q = mean_a .* guide_image + mean_b; </span><br><span class="line">    output = q;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span></span><br><span class="line"><span class="comment">%    My_minfilter：最小值滤波</span></span><br><span class="line"><span class="comment">%   输入：</span></span><br><span class="line"><span class="comment">%       I：输入灰度图像</span></span><br><span class="line"><span class="comment">%       window_size：最小值滤波的窗口大小</span></span><br><span class="line"><span class="comment">%   输出：output：最小值滤波的暗通道图像</span></span><br><span class="line"><span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="params">[output]</span> = <span class="title">My_minfilter</span><span class="params">(I,window_size)</span></span></span><br><span class="line"></span><br><span class="line">    <span class="comment">%% 第一步 读取图像信息</span></span><br><span class="line">    I_new = I;</span><br><span class="line">    [height,width] = <span class="built_in">size</span>(I);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">%% 第二步 遍历循环，进行最小值化</span></span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:height</span><br><span class="line">        <span class="keyword">for</span> <span class="built_in">j</span> = <span class="number">1</span>:width</span><br><span class="line">            <span class="comment">% 处理边界，防止越界</span></span><br><span class="line">            i_down = <span class="built_in">i</span>-window_size;</span><br><span class="line">            i_up = <span class="built_in">i</span>+window_size;</span><br><span class="line">            j_down = <span class="built_in">j</span>-window_size;</span><br><span class="line">            j_up = <span class="built_in">j</span>+window_size;</span><br><span class="line">            <span class="keyword">if</span>(i_down&lt;=<span class="number">0</span>)</span><br><span class="line">                i_down = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">if</span>(j_down&lt;=<span class="number">0</span>)</span><br><span class="line">                j_down = <span class="number">1</span>;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">if</span>(i_up&gt;height)</span><br><span class="line">                i_up = height;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            <span class="keyword">if</span>(j_up&gt;width)</span><br><span class="line">                j_up = width;</span><br><span class="line">            <span class="keyword">end</span></span><br><span class="line">            <span class="comment">% 最小值滤波，取窗口内的最小值作为当前像素点的值</span></span><br><span class="line">            I_new(<span class="built_in">i</span>,<span class="built_in">j</span>) =  <span class="built_in">min</span> (<span class="built_in">min</span>(I(i_down:i_up,j_down:j_up)) );</span><br><span class="line">        <span class="keyword">end</span></span><br><span class="line">    <span class="keyword">end</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">%% 第三步 输出</span></span><br><span class="line">    output = I_new;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">%% 鲁棒性测试——基于容差的暗通道先验去雾算法</span></span><br><span class="line"></span><br><span class="line">tic</span><br><span class="line"><span class="comment">%% 第一步 读取图像，获得尺寸的基本信息</span></span><br><span class="line"><span class="comment">%清空</span></span><br><span class="line">clear;     </span><br><span class="line">clc;       </span><br><span class="line"><span class="keyword">for</span> image_number=<span class="number">1</span>:<span class="number">8</span></span><br><span class="line">    imageName=strcat(num2str(image_number),<span class="string">&#x27;.jpg&#x27;</span>);</span><br><span class="line">    I = imread(imageName);</span><br><span class="line">    <span class="built_in">figure</span>;</span><br><span class="line">    imshow(I,[]);</span><br><span class="line">    title([<span class="string">&#x27;第&#x27;</span>,num2str(image_number),<span class="string">&#x27;幅图像的原图&#x27;</span>]);</span><br><span class="line"></span><br><span class="line">    <span class="comment">% 获取图像大小和维度</span></span><br><span class="line">    [height,width,dimention] = <span class="built_in">size</span>(I);</span><br><span class="line"></span><br><span class="line">    <span class="comment">%% 第二步 获取暗通道图像</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">% 最小值滤波窗口大小为 15 = 7*2+1</span></span><br><span class="line">    window_size = <span class="number">7</span>;</span><br><span class="line">    <span class="comment">% 调用My_darkchannel函数</span></span><br><span class="line">    dark_channel =  My_darkchannel(I,window_size);</span><br><span class="line">    dark_channel = dark_channel./<span class="number">255</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">%% 第三步 计算大气光成分A</span></span><br><span class="line">    <span class="comment">% A为1*1*3的矩阵，即提取出了RGB三个光照成分</span></span><br><span class="line">    I = im2double(I);</span><br><span class="line">    <span class="comment">% 调用My_estimateA函数</span></span><br><span class="line">    A = My_estimateA(I,dark_channel);</span><br><span class="line"></span><br><span class="line">    <span class="comment">%% 计算透射率矩阵t(x)</span></span><br><span class="line">    <span class="comment">% 去雾完全系数，w = 1完全去雾</span></span><br><span class="line">    w = <span class="number">0.95</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">% 用暗通道估计透射率  </span></span><br><span class="line">    t = <span class="number">1</span>-w*dark_channel/<span class="built_in">mean</span>(A(<span class="number">1</span>,<span class="number">1</span>,:));</span><br><span class="line"></span><br><span class="line">    <span class="comment">% 获取灰度图片</span></span><br><span class="line">    I_gray = rgb2gray(I);</span><br><span class="line"></span><br><span class="line">    <span class="comment">% 用导向滤波对t进行优化</span></span><br><span class="line">    <span class="comment">% 调用My_guidedfilter函数软抠图优化透射率矩阵</span></span><br><span class="line">    t1 = My_guidedfilter(I_gray, t, <span class="number">135</span>, <span class="number">0.0002</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">% 用导向滤波对投射率矩阵</span></span><br><span class="line">    <span class="comment">% 进行保边缘模糊</span></span><br><span class="line">    t2 = My_guidedfilter(t1,t1,<span class="number">7</span>,<span class="number">0.03</span>);</span><br><span class="line"></span><br><span class="line">    <span class="comment">% 透射图阈值，防止投射图很小的时候图像像素值过大</span></span><br><span class="line">    t_treshold = <span class="number">0.1</span>;</span><br><span class="line">    <span class="comment">% 取t0=0.1防止整体向白场过度，小于0.1的值取0.1</span></span><br><span class="line"></span><br><span class="line">    t = <span class="built_in">max</span>(t2,t_treshold);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">%% 第四步 恢复无雾图像</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">% 引进容差</span></span><br><span class="line">    K = <span class="number">0.2</span>;</span><br><span class="line">    <span class="comment">% 初始化去雾图像</span></span><br><span class="line">    defog_image = <span class="built_in">zeros</span>(<span class="built_in">size</span>(I));</span><br><span class="line"></span><br><span class="line">    <span class="comment">% 用改进公式分三个通道进行去雾</span></span><br><span class="line">    defog_image(:,:,<span class="number">1</span>) = ((I(:,:,<span class="number">1</span>)-A(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>))...</span><br><span class="line">                            ./<span class="built_in">min</span>(<span class="number">1</span>,t.*<span class="built_in">max</span>( K./<span class="built_in">abs</span>(I(:,:,<span class="number">1</span>)-A(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>)),<span class="number">1</span>) ...</span><br><span class="line">                            )) +A(<span class="number">1</span>,<span class="number">1</span>,<span class="number">1</span>);</span><br><span class="line">    defog_image(:,:,<span class="number">2</span>) = ((I(:,:,<span class="number">2</span>)-A(<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>))...</span><br><span class="line">                            ./<span class="built_in">min</span>(<span class="number">1</span>,t.*<span class="built_in">max</span>( K./<span class="built_in">abs</span>(I(:,:,<span class="number">2</span>)-A(<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>)),<span class="number">1</span>) ...</span><br><span class="line">                            )) +A(<span class="number">1</span>,<span class="number">1</span>,<span class="number">2</span>);</span><br><span class="line"></span><br><span class="line">    defog_image(:,:,<span class="number">3</span>) = ((I(:,:,<span class="number">3</span>)-A(<span class="number">1</span>,<span class="number">1</span>,<span class="number">3</span>))...</span><br><span class="line">                            ./<span class="built_in">min</span>(<span class="number">1</span>, t.*<span class="built_in">max</span>( K./<span class="built_in">abs</span>(I(:,:,<span class="number">3</span>)-A(<span class="number">1</span>,<span class="number">1</span>,<span class="number">3</span>)),<span class="number">1</span>) ...</span><br><span class="line">                            )) +A(<span class="number">1</span>,<span class="number">1</span>,<span class="number">3</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">% dark channel prior方法会使图片变暗</span></span><br><span class="line">    <span class="comment">% 乘系数使得图片亮</span></span><br><span class="line">    defog_image = defog_image*<span class="number">1.3</span>;</span><br><span class="line"></span><br><span class="line">    <span class="comment">%% 第五步 输出无雾图像</span></span><br><span class="line">    <span class="built_in">figure</span>;</span><br><span class="line">    imshow(defog_image);</span><br><span class="line">    title([<span class="string">&#x27;第&#x27;</span>,num2str(image_number),<span class="string">&#x27;幅图像的去雾图像&#x27;</span>]);</span><br><span class="line">    clear;     </span><br><span class="line">    clc;     </span><br><span class="line"><span class="keyword">end</span></span><br><span class="line">    toc</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight matlab"><table><tr><td class="code"><pre><span class="line"><span class="comment">%% 鲁棒性测试——实时去雾算法</span></span><br><span class="line">clc;</span><br><span class="line">clear;</span><br><span class="line">tic</span><br><span class="line"><span class="keyword">for</span> image_number=<span class="number">1</span>:<span class="number">8</span></span><br><span class="line">    imageName=strcat(num2str(image_number),<span class="string">&#x27;.jpg&#x27;</span>);</span><br><span class="line">    </span><br><span class="line">    <span class="comment">%%</span></span><br><span class="line">    <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span></span><br><span class="line">    <span class="comment">% 第一步 读取图像并简单处理</span></span><br><span class="line">    <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span></span><br><span class="line">    I = imread(imageName);</span><br><span class="line">    <span class="built_in">figure</span>;</span><br><span class="line">    imshow(I);</span><br><span class="line">    title([<span class="string">&#x27;第&#x27;</span>,num2str(image_number),<span class="string">&#x27;幅图像的原图&#x27;</span>]);</span><br><span class="line"></span><br><span class="line">    <span class="comment">% 归一化到[0,1]</span></span><br><span class="line">    I = double(I)/<span class="number">255.0</span>;  </span><br><span class="line"></span><br><span class="line">    <span class="comment">%%</span></span><br><span class="line">    <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%      </span></span><br><span class="line">    <span class="comment">% 第二步: 求取I的三个通道的最小值矩阵M</span></span><br><span class="line">    <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span></span><br><span class="line">    M = <span class="built_in">min</span>(I,[],<span class="number">3</span>);  </span><br><span class="line"></span><br><span class="line">    <span class="comment">%%</span></span><br><span class="line">    <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span></span><br><span class="line">    <span class="comment">% 第三步: 对M进行均值滤波，得到Mave(x)  </span></span><br><span class="line">    <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%% </span></span><br><span class="line">    [height,width] = <span class="built_in">size</span>(I);  </span><br><span class="line">    mask = <span class="built_in">ceil</span>(<span class="built_in">max</span>(height, width) / <span class="number">50</span>);  </span><br><span class="line">    <span class="keyword">if</span> <span class="built_in">mod</span>(mask, <span class="number">2</span>) == <span class="number">0</span>  </span><br><span class="line">        mask = mask + <span class="number">1</span>;  </span><br><span class="line">    <span class="keyword">end</span>  </span><br><span class="line">    f = fspecial(<span class="string">&#x27;average&#x27;</span>, mask);  </span><br><span class="line">    M_average = imfilter(M, f, <span class="string">&#x27;symmetric&#x27;</span>);     </span><br><span class="line"></span><br><span class="line">    <span class="comment">%%</span></span><br><span class="line">    <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span></span><br><span class="line">    <span class="comment">% 第四步: 求取M(x)中所有元素的均值Mav </span></span><br><span class="line">    <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%   </span></span><br><span class="line">    [height, width] = <span class="built_in">size</span>(M_average);  </span><br><span class="line">    M_average_value = sum(sum(M_average)) / (height * width);  </span><br><span class="line"></span><br><span class="line">    <span class="comment">%%</span></span><br><span class="line">    <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span></span><br><span class="line">    <span class="comment">% 第五步: 利用M_average求出环境光度 L </span></span><br><span class="line">    <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%   </span></span><br><span class="line">    <span class="comment">% delta值越大，去雾后的图像越暗，去雾效果越好</span></span><br><span class="line">    <span class="comment">% delta值越小，去雾后的图像越白，去雾效果越差  </span></span><br><span class="line">    delta = <span class="number">2.0</span>;    </span><br><span class="line">    L = <span class="built_in">min</span> ( <span class="built_in">min</span>( delta*M_average_value,<span class="number">0.9</span>)*M_average, M);  </span><br><span class="line"></span><br><span class="line">    <span class="comment">%%</span></span><br><span class="line">    <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span></span><br><span class="line">    <span class="comment">% 第六步: 利用M_average和I，求出全局大气光 A</span></span><br><span class="line">    <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%  </span></span><br><span class="line">    Matrix = [<span class="number">1</span>;...</span><br><span class="line">              <span class="number">1</span>;...</span><br><span class="line">              <span class="number">1</span>];</span><br><span class="line">    A = <span class="number">0.5</span> * ( <span class="built_in">max</span>( <span class="built_in">max</span>( <span class="built_in">max</span>(I, [], <span class="number">3</span>) ) ) + <span class="built_in">max</span>( <span class="built_in">max</span>(M_average) ) )*Matrix;  </span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="comment">%%</span></span><br><span class="line">    <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span></span><br><span class="line">    <span class="comment">% 第七步: 利用A、L和I求出去雾图</span></span><br><span class="line">    <span class="comment">%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%</span></span><br><span class="line">    [height, width, dimention] = <span class="built_in">size</span>(I);  </span><br><span class="line">    I_defog = <span class="built_in">zeros</span>(height,width,dimention);  </span><br><span class="line">    <span class="keyword">for</span> <span class="built_in">i</span> = <span class="number">1</span>:dimention  </span><br><span class="line">        I_defog(:,:,<span class="built_in">i</span>) = (I(:,:,<span class="built_in">i</span>) - L) ./ (<span class="number">1</span> - L./A(<span class="built_in">i</span>));  </span><br><span class="line">    <span class="keyword">end</span>  </span><br><span class="line">    toc </span><br><span class="line">    <span class="built_in">figure</span>;</span><br><span class="line">    imshow(I_defog);</span><br><span class="line">    title([<span class="string">&#x27;第&#x27;</span>,num2str(image_number),<span class="string">&#x27;幅图像的去雾图像&#x27;</span>]);</span><br><span class="line">    clc;</span><br><span class="line">    clear;</span><br><span class="line"><span class="keyword">end</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>计算机学习</category>
        <category>Demo</category>
        <category>课堂展示作业</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>HTML</tag>
        <tag>matlab</tag>
        <tag>Demo</tag>
      </tags>
  </entry>
  <entry>
    <title>JDBC演示（三）</title>
    <url>/JDBC/jdbc%E6%BC%94%E7%A4%BA%EF%BC%88%E4%B8%89%EF%BC%89/</url>
    <content><![CDATA[<h3 id="单一数据库事务代码演示"><a href="#单一数据库事务代码演示" class="headerlink" title="单一数据库事务代码演示"></a>单一数据库事务代码演示</h3><span id="more"></span>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> os;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="comment">//PreparedStatement的原理是预先对SQL语句的框架进行编译，然后再给SQL语句传值</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">JDBCtest</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//初始化UI</span></span><br><span class="line">        Map&lt;String,String&gt; userLoginInfo=initUI();</span><br><span class="line">        <span class="comment">//验证用户名和密码</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">loginSuccess</span> <span class="operator">=</span> login(userLoginInfo);</span><br><span class="line">        System.out.println(loginSuccess?<span class="string">&quot;登录成功&quot;</span>:<span class="string">&quot;登录失败&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">login</span><span class="params">(Map&lt;String,String&gt; data)</span></span><br><span class="line">    &#123;</span><br><span class="line">        ResourceBundle bundle=ResourceBundle.getBundle(<span class="string">&quot;JDBC&quot;</span>);</span><br><span class="line">        Connection conn=<span class="literal">null</span>;</span><br><span class="line">        PreparedStatement stm=<span class="literal">null</span>;</span><br><span class="line">        ResultSet rt=<span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(bundle.getString(<span class="string">&quot;driver&quot;</span>));</span><br><span class="line">            String url=bundle.getString(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">            String name=bundle.getString(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">            String pw=bundle.getString(<span class="string">&quot;pw&quot;</span>);</span><br><span class="line">            conn= DriverManager.getConnection(url,name,pw);</span><br><span class="line">            conn.setAutoCommit(<span class="literal">false</span>);<span class="comment">//开启事务</span></span><br><span class="line">            String sql1=<span class="string">&quot;Update t_logintest set 登录名 = ? where id=?&quot;</span>;</span><br><span class="line">            stm=conn.prepareStatement(sql1);</span><br><span class="line">            stm.setString(<span class="number">1</span>,<span class="string">&quot;王五&quot;</span>);</span><br><span class="line">            stm.setInt(<span class="number">2</span>,<span class="number">1</span>);</span><br><span class="line">            <span class="type">int</span> count=stm.executeUpdate();</span><br><span class="line">            <span class="comment">//String s=null;</span></span><br><span class="line">            <span class="comment">//s.toString();</span></span><br><span class="line">            System.out.println(count);</span><br><span class="line">            stm.setString(<span class="number">1</span>,<span class="string">&quot;Kangkang&quot;</span>);</span><br><span class="line">            stm.setInt(<span class="number">2</span>,<span class="number">2</span>);</span><br><span class="line">            count=stm.executeUpdate();</span><br><span class="line">            System.out.println(count);</span><br><span class="line">            conn.commit();<span class="comment">//提交事务</span></span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">            <span class="keyword">if</span>(conn!=<span class="literal">null</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    conn.rollback();<span class="comment">//回滚事务</span></span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException ex) &#123;</span><br><span class="line">                    ex.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(rt!=<span class="literal">null</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    rt.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(stm!=<span class="literal">null</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    stm.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(conn!=<span class="literal">null</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span>  <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 初始化用户界面</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>返回用户名和密码</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Map&lt;String, String&gt; <span class="title function_">initUI</span><span class="params">()</span> &#123;</span><br><span class="line">        Scanner sc=<span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.println(<span class="string">&quot;请输入用户名：&quot;</span>);</span><br><span class="line">        String userName=sc.nextLine();</span><br><span class="line">        System.out.println(<span class="string">&quot;请输入密码：&quot;</span>);</span><br><span class="line">        String pw=sc.nextLine();</span><br><span class="line">        Map&lt;String,String&gt; userLoginInfo= <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        userLoginInfo.put(<span class="string">&quot;用户名&quot;</span>,userName);</span><br><span class="line">        userLoginInfo.put(<span class="string">&quot;密码&quot;</span>,pw);</span><br><span class="line">        <span class="keyword">return</span>  userLoginInfo;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//PrepareedStatement（传值时会做检查） 执行效率高,编译一次执行n次,Statement 编译一次执行一次</span></span><br></pre></td></tr></table></figure>

<h3 id="行级锁"><a href="#行级锁" class="headerlink" title="行级锁"></a>行级锁</h3><p>在sql查询语句后面加for update,把这一行的数据锁住不能动，又叫悲观锁（开启事务后才锁）。</p>
<p>悲观锁:事务必须排队执行，数据锁住了不允许并发</p>
<p>乐观锁：支持并发，事务也不需要排队，只不过需要一个版本号</p>
]]></content>
      <categories>
        <category>计算机学习</category>
        <category>Java</category>
        <category>JDBC</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>JDBC</tag>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>JDBC演示（一）</title>
    <url>/JDBC/jdbc%E6%BC%94%E7%A4%BA%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<h3 id="JDBC经典代码"><a href="#JDBC经典代码" class="headerlink" title="JDBC经典代码"></a>JDBC经典代码</h3><span id="more"></span>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.Driver;</span><br><span class="line"><span class="keyword">import</span> java.sql.DriverManager;</span><br><span class="line"><span class="keyword">import</span> java.sql.SQLException;</span><br><span class="line"><span class="keyword">import</span> java.sql.Connection;</span><br><span class="line"><span class="keyword">import</span> java.sql.Statement;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">test2</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//&quot;C:\Users\xiaoguan\Downloads\test\com\mysql\jdbc\Driver.class&quot;</span></span><br><span class="line">		Statement stm=<span class="literal">null</span>;</span><br><span class="line">		Connection conn=<span class="literal">null</span>;</span><br><span class="line">		<span class="keyword">try</span>&#123;</span><br><span class="line">			<span class="comment">//1.注册驱动</span></span><br><span class="line">			<span class="type">Driver</span> <span class="variable">driver</span> <span class="operator">=</span><span class="keyword">new</span> <span class="title class_">com</span>.mysql.cj.jdbc.Driver();</span><br><span class="line">			DriverManager.registerDriver(driver);</span><br><span class="line">			<span class="comment">//2.获取连接</span></span><br><span class="line">			String name=<span class="string">&quot;root&quot;</span>;</span><br><span class="line">             <span class="comment">//URL=通信协议+ip+端口+内容</span></span><br><span class="line">			String url=<span class="string">&quot;jdbc:mysql://10.198.179.163:3306/bjpowernode&quot;</span>;</span><br><span class="line">			String pw=<span class="string">&quot;68963120g&quot;</span>;</span><br><span class="line">			conn=DriverManager.getConnection(url,name,pw);</span><br><span class="line">			System.out.println(<span class="string">&quot;数据库为&quot;</span>+conn);</span><br><span class="line">			<span class="comment">//3.获取数据库对象(专门执行sql语句）</span></span><br><span class="line">		    stm=conn.createStatement();</span><br><span class="line">			String sql=<span class="string">&quot;update dept set dname=&#x27;xdu&#x27;,loc=&#x27;西安&#x27; where deptno=50&quot;</span>;<span class="comment">//不用在最后加分号</span></span><br><span class="line">			<span class="comment">//4.执行sql</span></span><br><span class="line">			<span class="comment">//专门执行DML语句</span></span><br><span class="line">			<span class="comment">//返回值影响数据库中的记录条数</span></span><br><span class="line">			<span class="type">int</span> count=stm.executeUpdate(sql);</span><br><span class="line">			System.out.println(<span class="string">&quot;count为&quot;</span>+count);</span><br><span class="line">			</span><br><span class="line">		&#125;<span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;<span class="keyword">finally</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">//6.释放资源</span></span><br><span class="line">			<span class="comment">//重小到大释放，statement----&gt;connection</span></span><br><span class="line">			<span class="keyword">try</span></span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">if</span>(stm!=<span class="literal">null</span>)</span><br><span class="line">				&#123;</span><br><span class="line">					stm.close();</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">catch</span>(SQLException e)</span><br><span class="line">			&#123;</span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">try</span></span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">if</span>(conn!=<span class="literal">null</span>)</span><br><span class="line">				&#123;</span><br><span class="line">					conn.close();</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">catch</span>(SQLException e)</span><br><span class="line">			&#123;</span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">			</span><br><span class="line">			</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//5.处理查询结果集这里没有演示</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>计算机学习</category>
        <category>Java</category>
        <category>JDBC</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>JDBC</tag>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>JDBC演示（二）</title>
    <url>/JDBC/jdbc%E6%BC%94%E7%A4%BA%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
    <content><![CDATA[<h3 id="JDBC经典代码"><a href="#JDBC经典代码" class="headerlink" title="JDBC经典代码"></a>JDBC经典代码</h3><span id="more"></span>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.*;</span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">test3</span>&#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//&quot;C:\Users\xiaoguan\Downloads\test\com\mysql\jdbc\Driver.class&quot;</span></span><br><span class="line">		ResourceBundle bundle=ResourceBundle.getBundle(<span class="string">&quot;JDBC&quot;</span>);</span><br><span class="line">		Statement stm=<span class="literal">null</span>;</span><br><span class="line">		Connection conn=<span class="literal">null</span>;</span><br><span class="line">		ResultSet rs=<span class="literal">null</span>;<span class="comment">//关闭顺序rs--&gt;stm--&gt;conn</span></span><br><span class="line">		<span class="keyword">try</span>&#123;</span><br><span class="line">			<span class="comment">//1.注册驱动</span></span><br><span class="line">			<span class="type">String</span> <span class="variable">driver</span> <span class="operator">=</span>bundle.getString(<span class="string">&quot;driver&quot;</span>);</span><br><span class="line">			Class.forName(driver);</span><br><span class="line">			<span class="comment">//2.获取连接</span></span><br><span class="line">			String name=bundle.getString(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">			String url=bundle.getString(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">			String pw=bundle.getString(<span class="string">&quot;pw&quot;</span>);</span><br><span class="line">			conn=DriverManager.getConnection(url,name,pw);</span><br><span class="line">			System.out.println(<span class="string">&quot;数据库为&quot;</span>+conn);</span><br><span class="line">			<span class="comment">//3.获取数据库对象(专门执行sql语句）</span></span><br><span class="line">		    stm=conn.createStatement();</span><br><span class="line">			<span class="comment">//4.执行sql</span></span><br><span class="line">			<span class="comment">//专门执行DQL语句</span></span><br><span class="line">			<span class="comment">//返回值影响数据库中的记录条数</span></span><br><span class="line">			String sql=<span class="string">&quot;select * from dept&quot;</span>;<span class="comment">//不用在最后加分号</span></span><br><span class="line">			rs=stm.executeQuery(sql);</span><br><span class="line">			<span class="comment">//5.处理查询结果集(JDBC中下标列从1开始）</span></span><br><span class="line">			<span class="keyword">while</span>(rs.next())</span><br><span class="line">			&#123;</span><br><span class="line">				String deptno=rs.getString(<span class="number">1</span>);<span class="comment">//数字建议换成字符串的列名，更健壮，换列了也能输出，列明为最终查询结果重命名后的名字,要int类型就getInt，以此类推，可以用来运算。</span></span><br><span class="line">				String dname=rs.getString(<span class="number">2</span>);</span><br><span class="line">				String loc=rs.getString(<span class="number">3</span>);</span><br><span class="line">				System.out.println(deptno+<span class="string">&quot;,&quot;</span>+dname+<span class="string">&quot;,&quot;</span>+loc);</span><br><span class="line">			&#125;</span><br><span class="line">			</span><br><span class="line">			</span><br><span class="line">		&#125;<span class="keyword">catch</span>(SQLException e)&#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;<span class="keyword">catch</span>(ClassNotFoundException e)&#123;</span><br><span class="line">			e.printStackTrace();</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="keyword">finally</span></span><br><span class="line">		&#123;</span><br><span class="line">			<span class="comment">//6.释放资源</span></span><br><span class="line">			<span class="comment">//重小到大释放，ResultSet----&gt;statement----&gt;connection</span></span><br><span class="line">			<span class="keyword">try</span></span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">if</span>(rs!=<span class="literal">null</span>)</span><br><span class="line">				&#123;</span><br><span class="line">					rs.close();</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">catch</span>(SQLException e)</span><br><span class="line">			&#123;</span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">try</span></span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">if</span>(stm!=<span class="literal">null</span>)</span><br><span class="line">				&#123;</span><br><span class="line">					stm.close();</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">catch</span>(SQLException e)</span><br><span class="line">			&#123;</span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">try</span></span><br><span class="line">			&#123;</span><br><span class="line">				<span class="keyword">if</span>(conn!=<span class="literal">null</span>)</span><br><span class="line">				&#123;</span><br><span class="line">					conn.close();</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">			<span class="keyword">catch</span>(SQLException e)</span><br><span class="line">			&#123;</span><br><span class="line">				e.printStackTrace();</span><br><span class="line">			&#125;</span><br><span class="line">			</span><br><span class="line">			</span><br><span class="line">		&#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>properties文件</p>
<figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">driver</span>=<span class="string">写驱动</span></span><br><span class="line"><span class="attr">name</span>=<span class="string">写用户名</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">数据库url</span></span><br><span class="line"><span class="attr">pw</span>=<span class="string">写密码</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>计算机学习</category>
        <category>Java</category>
        <category>JDBC</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>JDBC</tag>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>登录sql注入问题</title>
    <url>/JDBC/%E7%99%BB%E5%BD%95sql%E6%B3%A8%E5%85%A5%E9%97%AE%E9%A2%98/</url>
    <content><![CDATA[<h3 id="会被sql注入的代码"><a href="#会被sql注入的代码" class="headerlink" title="会被sql注入的代码"></a>会被sql注入的代码</h3><p>当密码有类似<code>fdsa&#39; or &#39;1&#39;=&#39;1</code>,会被sql注入，原因是字符串拼接时1&#x3D;1这种类似条件会执行在sql语句中，这时就会被sql注入密码输错也能登录成功，要避免此问题不能用Statement,要用PreparedStatement。PreparedStatement会预编译，然后确定值得正确性才执行sql语句。</p>
<span id="more"></span>

<p>不安全代码</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> os;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">login</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//初始化UI</span></span><br><span class="line">        Map&lt;String,String&gt; userLoginInfo=initUI();</span><br><span class="line">        <span class="comment">//验证用户名和密码</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">loginSuccess</span> <span class="operator">=</span> login(userLoginInfo);</span><br><span class="line">        System.out.println(loginSuccess?<span class="string">&quot;登录成功&quot;</span>:<span class="string">&quot;登录失败&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">login</span><span class="params">(Map&lt;String,String&gt; data)</span></span><br><span class="line">    &#123;</span><br><span class="line">        ResourceBundle bundle=ResourceBundle.getBundle(<span class="string">&quot;JDBC&quot;</span>);</span><br><span class="line">        Connection conn=<span class="literal">null</span>;</span><br><span class="line">        Statement stm=<span class="literal">null</span>;</span><br><span class="line">        ResultSet rt=<span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(bundle.getString(<span class="string">&quot;driver&quot;</span>));</span><br><span class="line">            String url=bundle.getString(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">            String name=bundle.getString(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">            String pw=bundle.getString(<span class="string">&quot;pw&quot;</span>);</span><br><span class="line">            conn= DriverManager.getConnection(url,name,pw);</span><br><span class="line">            stm=conn.createStatement();</span><br><span class="line">            String sql=<span class="string">&quot;select * from t_logintest where 登录名=&#x27;&quot;</span>+data.get(<span class="string">&quot;用户名&quot;</span>)+<span class="string">&quot;&#x27; and 登录密码=&#x27;&quot;</span>+data.get(<span class="string">&quot;密码&quot;</span>)+<span class="string">&quot;&#x27;&quot;</span>;</span><br><span class="line">            rt=stm.executeQuery(sql);</span><br><span class="line">            <span class="keyword">if</span>(rt.next())</span><br><span class="line">            &#123;</span><br><span class="line">              <span class="keyword">return</span>  <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException | SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(rt!=<span class="literal">null</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    rt.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(stm!=<span class="literal">null</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    stm.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(conn!=<span class="literal">null</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span>  <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 初始化用户界面</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>返回用户名和密码</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Map&lt;String, String&gt; <span class="title function_">initUI</span><span class="params">()</span> &#123;</span><br><span class="line">        Scanner sc=<span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.println(<span class="string">&quot;请输入用户名：&quot;</span>);</span><br><span class="line">        String userName=sc.nextLine();</span><br><span class="line">        System.out.println(<span class="string">&quot;请输入密码：&quot;</span>);</span><br><span class="line">        String pw=sc.nextLine();</span><br><span class="line">        Map&lt;String,String&gt; userLoginInfo= <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        userLoginInfo.put(<span class="string">&quot;用户名&quot;</span>,userName);</span><br><span class="line">        userLoginInfo.put(<span class="string">&quot;密码&quot;</span>,pw);</span><br><span class="line">        <span class="keyword">return</span>  userLoginInfo;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="不会被sql注入的代码"><a href="#不会被sql注入的代码" class="headerlink" title="不会被sql注入的代码"></a>不会被sql注入的代码</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> os;</span><br><span class="line"><span class="keyword">import</span> java.sql.*;</span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.ResourceBundle;</span><br><span class="line"><span class="keyword">import</span> java.util.Scanner;</span><br><span class="line"><span class="comment">//PreparedStatement的原理是预先对SQL语句的框架进行编译，然后再给SQL语句传值</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">loginplus</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> &#123;</span><br><span class="line">        <span class="comment">//初始化UI</span></span><br><span class="line">        Map&lt;String,String&gt; userLoginInfo=initUI();</span><br><span class="line">        <span class="comment">//验证用户名和密码</span></span><br><span class="line">        <span class="type">boolean</span> <span class="variable">loginSuccess</span> <span class="operator">=</span> login(userLoginInfo);</span><br><span class="line">        System.out.println(loginSuccess?<span class="string">&quot;登录成功&quot;</span>:<span class="string">&quot;登录失败&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> <span class="type">boolean</span> <span class="title function_">login</span><span class="params">(Map&lt;String,String&gt; data)</span></span><br><span class="line">    &#123;</span><br><span class="line">        ResourceBundle bundle=ResourceBundle.getBundle(<span class="string">&quot;JDBC&quot;</span>);</span><br><span class="line">        Connection conn=<span class="literal">null</span>;</span><br><span class="line">        PreparedStatement stm=<span class="literal">null</span>;</span><br><span class="line">        ResultSet rt=<span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            Class.forName(bundle.getString(<span class="string">&quot;driver&quot;</span>));</span><br><span class="line">            String url=bundle.getString(<span class="string">&quot;url&quot;</span>);</span><br><span class="line">            String name=bundle.getString(<span class="string">&quot;name&quot;</span>);</span><br><span class="line">            String pw=bundle.getString(<span class="string">&quot;pw&quot;</span>);</span><br><span class="line">            conn= DriverManager.getConnection(url,name,pw);</span><br><span class="line">            String sql=<span class="string">&quot;select * from t_logintest where 登录名=? and 登录密码=?&quot;</span>;<span class="comment">//sql语句框子，一个问号表示一个占位符一个问号表示接收一个值，没有单引号</span></span><br><span class="line">            stm=conn.prepareStatement(sql);</span><br><span class="line">            <span class="comment">//给问号传值，第一个问号小标为1,第二个问号下标为2...</span></span><br><span class="line">            stm.setString(<span class="number">1</span>,data.get(<span class="string">&quot;用户名&quot;</span>));</span><br><span class="line">            stm.setString(<span class="number">2</span>,data.get(<span class="string">&quot;密码&quot;</span>));</span><br><span class="line">            rt=stm.executeQuery();</span><br><span class="line">            <span class="keyword">if</span>(rt.next())</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">return</span>  <span class="literal">true</span>;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125; <span class="keyword">catch</span> (ClassNotFoundException | SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(rt!=<span class="literal">null</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    rt.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(stm!=<span class="literal">null</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    stm.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(conn!=<span class="literal">null</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">try</span> &#123;</span><br><span class="line">                    conn.close();</span><br><span class="line">                &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                    e.printStackTrace();</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span>  <span class="literal">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 初始化用户界面</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span>返回用户名和密码</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> Map&lt;String, String&gt; <span class="title function_">initUI</span><span class="params">()</span> &#123;</span><br><span class="line">        Scanner sc=<span class="keyword">new</span> <span class="title class_">Scanner</span>(System.in);</span><br><span class="line">        System.out.println(<span class="string">&quot;请输入用户名：&quot;</span>);</span><br><span class="line">        String userName=sc.nextLine();</span><br><span class="line">        System.out.println(<span class="string">&quot;请输入密码：&quot;</span>);</span><br><span class="line">        String pw=sc.nextLine();</span><br><span class="line">        Map&lt;String,String&gt; userLoginInfo= <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        userLoginInfo.put(<span class="string">&quot;用户名&quot;</span>,userName);</span><br><span class="line">        userLoginInfo.put(<span class="string">&quot;密码&quot;</span>,pw);</span><br><span class="line">        <span class="keyword">return</span>  userLoginInfo;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//PrepareedStatement（传值时会做检查） 执行效率高,编译一次执行n次,Statement 编译一次执行一次</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="附录properties文件"><a href="#附录properties文件" class="headerlink" title="附录properties文件"></a>附录properties文件</h3><figure class="highlight properties"><table><tr><td class="code"><pre><span class="line"><span class="attr">driver</span>=<span class="string">写驱动</span></span><br><span class="line"><span class="attr">name</span>=<span class="string">写用户名</span></span><br><span class="line"><span class="attr">url</span>=<span class="string">数据库url</span></span><br><span class="line"><span class="attr">pw</span>=<span class="string">写密码</span></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>计算机学习</category>
        <category>Java</category>
        <category>JDBC</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>JDBC</tag>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>Mysql常用指令总结（一）(含有通用sql语句)</title>
    <url>/MySQL/Mysql%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4%E6%80%BB%E7%BB%93%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<h3 id="Mysql常用指令"><a href="#Mysql常用指令" class="headerlink" title="Mysql常用指令"></a>Mysql常用指令</h3><span id="more"></span>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">登录</span><br><span class="line">mysql -u系统名（默认root） -p密码</span><br><span class="line">1.查看数据库</span><br><span class="line">show databases;</span><br><span class="line">2.创建数据库</span><br><span class="line">create database 数据库名;</span><br><span class="line">3.使用某个数据库</span><br><span class="line">use 数据库名;</span><br><span class="line">4.查看当前数据库中的表</span><br><span class="line">show tables;</span><br><span class="line">5.初始化数据（从外面的sql脚本导入数据到当前数据库）</span><br><span class="line">source sql文件的路径</span><br><span class="line">6.删除数据库</span><br><span class="line">drop database 数据库名;</span><br><span class="line">7.查看表结构</span><br><span class="line">desc 表名;</span><br><span class="line">8.查看表内容</span><br><span class="line">select * from 表名;</span><br><span class="line">9.查询当前使用的数据库</span><br><span class="line">select database();</span><br><span class="line">10.查看数据库版本</span><br><span class="line">select version();</span><br><span class="line">11.退出数据库</span><br><span class="line">exit;</span><br><span class="line">12.结束一条语句（没打分号程序一直等待输入时可以使用）</span><br><span class="line">\c</span><br><span class="line">13.查看创建表时使用的sql语句</span><br><span class="line">show create table 表名；</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">查询语句（DQL)(<span class="keyword">sql</span>语句见分号开始执行)</span><br><span class="line"><span class="keyword">select</span> 字段名<span class="number">1</span>，字段名<span class="number">2.</span>.. <span class="keyword">from</span> 表名；（<span class="keyword">sql</span>语句不区分大小写，固定词语不能改如<span class="keyword">select</span>）</span><br><span class="line">拓展：<span class="keyword">select</span> 字段名可以运算 <span class="keyword">as</span>（改名为） xxx <span class="keyword">from</span> 表名；d</span><br><span class="line"><span class="keyword">select</span> 字段名<span class="number">1</span>，字段名<span class="number">2.</span>.. <span class="keyword">from</span> 表名 <span class="keyword">where</span> 条件（如表中有工资元素，工资<span class="operator">&gt;</span><span class="number">1000</span>为条件)；（不等于可以用<span class="operator">&lt;&gt;</span>来表示）</span><br><span class="line">拓展：条件between... <span class="keyword">and</span> ...数字为闭区间（字母为左闭右开）。表示且时可以用<span class="keyword">and</span>。或为<span class="keyword">or</span>。</span><br><span class="line">条件为空用 <span class="keyword">is</span> <span class="keyword">null</span> ，<span class="keyword">sql</span>表示相等用一个等于就行，<span class="keyword">in</span>(值，值)包含，相当于<span class="keyword">or</span>。<span class="keyword">like</span>模糊查询，<span class="operator">%</span>任意字符,_一个字符。</span><br><span class="line">排序：<span class="keyword">select</span> 字段名<span class="number">1</span>，字段名<span class="number">2.</span>.. <span class="keyword">from</span> 表名 <span class="keyword">order</span> <span class="keyword">by</span> 排序目标 关键词，没有关键词默认升序。关键词<span class="keyword">desc</span>降序，<span class="keyword">asc</span>升序。排序时如果有相同，可以加逗号,后面再给出其他的数据排序会在第一个数据相同的情况下排序。<span class="keyword">by</span> 加数字用第几列排。</span><br><span class="line">分组函数（对字段操作,自动忽略<span class="keyword">null</span>，不可直接使用在<span class="keyword">where</span>）：</span><br><span class="line">count 计数</span><br><span class="line">sum 求和</span><br><span class="line">avg 平均值</span><br><span class="line">max 最大值</span><br><span class="line">min 最小值</span><br><span class="line">有<span class="keyword">null</span>参与运算最后结果一定是<span class="keyword">null</span>,ifnull(数据名，待换的数据)，把数据名下的为<span class="keyword">null</span>的数据换成待换数据。sum自动忽略<span class="keyword">null</span></span><br><span class="line"><span class="built_in">count</span>(<span class="operator">*</span>)总记录条数，<span class="built_in">count</span>(数据)该列不含<span class="keyword">null</span>的行数。</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> 按某个字段或者某些字段进行分组，（只能跟分组函数，和参与分组的字段）</span><br><span class="line"><span class="keyword">having</span> 对分组之后的数据过滤。</span><br><span class="line">DQL 语句执行顺序</span><br><span class="line"><span class="keyword">select</span> <span class="number">5</span></span><br><span class="line">	..</span><br><span class="line"><span class="keyword">from</span> <span class="number">1</span></span><br><span class="line">	..</span><br><span class="line"><span class="keyword">where</span> <span class="number">2</span></span><br><span class="line">	..</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> <span class="number">3</span></span><br><span class="line">	..</span><br><span class="line"><span class="keyword">having</span> <span class="number">4</span></span><br><span class="line">	..</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> <span class="number">6</span></span><br><span class="line">	..</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>



]]></content>
      <categories>
        <category>计算机学习</category>
        <category>数据库</category>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>Mysql常用指令总结（三）（含通用sql语句）</title>
    <url>/MySQL/Mysql%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4%E6%80%BB%E7%BB%93%EF%BC%88%E4%B8%89%EF%BC%89/</url>
    <content><![CDATA[<h3 id="Mysql常用指令"><a href="#Mysql常用指令" class="headerlink" title="Mysql常用指令"></a>Mysql常用指令</h3><span id="more"></span>

<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">删除表</span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">table</span> if <span class="keyword">exists</span> 表名;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> 表名(列名，储存格式，<span class="keyword">default</span> xx),插入时没有指定值则为<span class="keyword">default</span>后面的值,如果没有<span class="keyword">default</span>,则为<span class="keyword">null</span></span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> 表名 <span class="keyword">values</span>(),当表名里没有字段时,<span class="keyword">values</span>里要把表里的字段全部按顺序写出来。</span><br><span class="line">可以写<span class="keyword">values</span>(),(),();一次插入多行</span><br><span class="line">表的复制</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> 表名 <span class="keyword">as</span> <span class="keyword">select</span>语句;</span><br><span class="line">插入表</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> 表名 <span class="keyword">select</span> 语句;</span><br><span class="line">修改数据</span><br><span class="line"><span class="keyword">update</span> 表名 <span class="keyword">set</span> 字段<span class="number">1</span><span class="operator">=</span>值,字段<span class="number">2</span><span class="operator">=</span>值... <span class="keyword">where</span> 条件;</span><br><span class="line">没有条件整张表全部更新。</span><br><span class="line">删除数据</span><br><span class="line"><span class="keyword">delete</span> <span class="keyword">from</span> 表名 <span class="keyword">where</span> 条件;（可回滚）</span><br><span class="line">没有条件全部删除。</span><br><span class="line">删除大表（不能回滚,删除快）</span><br><span class="line"><span class="keyword">truncate</span> <span class="keyword">table</span> 表名;</span><br><span class="line">约束（<span class="keyword">Constraint</span>)</span><br><span class="line">非空约束（<span class="keyword">not</span> <span class="keyword">null</span>)</span><br><span class="line">唯一约束(<span class="keyword">unique</span>)（可以为<span class="keyword">null</span>)(列级约束，表级约束)</span><br><span class="line">主键约束(<span class="keyword">primary</span> key)约束字段既不能为<span class="keyword">null</span>，也不能重复，一张表只有一个（主键自增，<span class="keyword">primary</span> key auto_increment)</span><br><span class="line">外键约束(<span class="keyword">foreign</span> key) 表级约束声明，<span class="keyword">foreign</span> key(该表字段名) <span class="keyword">references</span> 表名（其中字段名）外键可以为<span class="keyword">null</span>，引用的字段必须有唯一性，一般引用主键</span><br><span class="line">检查约束(<span class="keyword">check</span>)(Oracle可以,mysql目前不支持)</span><br><span class="line">存储引擎（MySQL有）</span><br><span class="line">查看支持的存储引擎</span><br><span class="line"><span class="keyword">show</span> engines \G</span><br><span class="line">事务（Transaction)</span><br><span class="line">ACDI（原子性，一致性，隔离性，持久性）</span><br><span class="line">隔离性级别</span><br><span class="line"><span class="number">1.</span>读未提交（可能脏读）(read uncommitted)</span><br><span class="line"><span class="number">2.</span>读已提交（不可重复读）（oracle默认级别）(read committed)</span><br><span class="line"><span class="number">3.</span>可重复读（MySQL默认级别，读取到的数据是幻象）(repeatable read)</span><br><span class="line"><span class="number">4.</span>序列化读（串行化读）（效率低）(serializable)</span><br><span class="line">怎么关闭自动提交</span><br><span class="line"><span class="keyword">start</span> transaction;</span><br><span class="line">回滚 <span class="keyword">rollback</span></span><br><span class="line"><span class="keyword">set</span> autocommit<span class="operator">=</span><span class="number">1</span>;关闭事务</span><br><span class="line">提交 <span class="keyword">commit</span>；</span><br><span class="line">保存点 <span class="keyword">savepoint</span> 名字</span><br><span class="line"><span class="keyword">set</span> <span class="keyword">global</span> transaction isolation level 事务级别英文; 设置事务级别</span><br><span class="line">查询事务级别 <span class="keyword">select</span> @<span class="variable">@global</span>.transaction_isolation;(Mysql8用transaction,<span class="number">5</span>用tx)</span><br><span class="line">索引</span><br><span class="line">主键和<span class="keyword">unique</span>自动添加索引</span><br><span class="line">查看<span class="keyword">sql</span>中执行语句的具体情况，在执行语句前加explain.</span><br><span class="line">创建索引 <span class="keyword">create</span> index 索引名 <span class="keyword">on</span> 表名（字段名）;</span><br><span class="line">删除索引 <span class="keyword">drop</span> index 索引名 <span class="keyword">on</span> 表名;</span><br><span class="line"><span class="keyword">view</span>视图</span><br><span class="line">创建视图</span><br><span class="line"><span class="keyword">create</span> 视图名 <span class="keyword">as</span> 这里写DQL查询语句;</span><br><span class="line">删除视图 </span><br><span class="line"><span class="keyword">drop</span> <span class="keyword">view</span> 视图名;</span><br><span class="line">通过视图可以影响数据，可以对视图crud</span><br><span class="line">DBA命令</span><br><span class="line">导出数据</span><br><span class="line">mysqldump 数据库名 （表名（不写就整个数据库））<span class="operator">&gt;</span>导出到哪个盘的地址，最后是.<span class="keyword">sql</span>文件 后面跟<span class="operator">-</span>uroot <span class="operator">-</span>p密码,在dos窗口下执行。</span><br><span class="line">导入</span><br><span class="line">创建数据库，然后source 导入</span><br><span class="line">数据库三范式</span><br><span class="line"><span class="number">1.</span>任何一张表都有主键，并且每一字段都不可原子再分。</span><br><span class="line"><span class="number">2.</span>所有非主键字段完全依赖主键不能产生部分依赖、</span><br><span class="line"><span class="number">3.</span>所有非主键字段直接依赖主键字段，不能产生传递依赖</span><br><span class="line"></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>计算机学习</category>
        <category>数据库</category>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>和为K的子数组</title>
    <url>/%E5%88%B7%E9%A2%98%E9%A2%98%E8%A7%A3/%E5%92%8C%E4%B8%BAK%E7%9A%84%E5%AD%90%E6%95%B0%E7%BB%84/</url>
    <content><![CDATA[<h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>给你一个整数数组 nums 和一个整数 k ，请你统计并返回 该数组中和为 k 的连续子数组的个数 。<span id="more"></span></p>
<p>示例 1：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">输入：nums = [1,1,1], k = 2</span><br><span class="line">输出：2</span><br></pre></td></tr></table></figure>

<blockquote>
<p>来源：力扣（LeetCode）<br>链接：<a href="https://leetcode.cn/problems/subarray-sum-equals-k">https://leetcode.cn/problems/subarray-sum-equals-k</a></p>
</blockquote>
<h3 id="我的题解"><a href="#我的题解" class="headerlink" title="我的题解"></a>我的题解</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">subarraySum</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">        <span class="type">int</span> sum=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;nums.length;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="type">int</span> j=i;</span><br><span class="line">            <span class="type">int</span> record=k;</span><br><span class="line">            <span class="keyword">while</span>(<span class="literal">true</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(j&gt;nums.length-<span class="number">1</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line">                record=record-nums[j];</span><br><span class="line">                <span class="keyword">if</span>(record==<span class="number">0</span>)</span><br><span class="line">                &#123;</span><br><span class="line">                    sum++;</span><br><span class="line">                &#125;</span><br><span class="line">              </span><br><span class="line">                j++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>思路为先确定一个数，然后用和K依次减这个数后面的数，如果有零则记录，直到减到末尾，然后这个数向右移动，循环操作，找全部可能性，统计符合题意的个数。</p>
<h3 id="大神题解"><a href="#大神题解" class="headerlink" title="大神题解"></a>大神题解</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">subarraySum</span><span class="params">(<span class="type">int</span>[] nums, <span class="type">int</span> k)</span> &#123;</span><br><span class="line">        <span class="comment">// key：前缀和，value：key 对应的前缀和的个数</span></span><br><span class="line">        Map&lt;Integer, Integer&gt; preSumFreq = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="comment">// 对于下标为 0 的元素，前缀和为 0，个数为 1</span></span><br><span class="line">        preSumFreq.put(<span class="number">0</span>, <span class="number">1</span>);</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">preSum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> num : nums) &#123;</span><br><span class="line">            preSum += num;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 先获得前缀和为 preSum - k 的个数，加到计数变量里</span></span><br><span class="line">            <span class="keyword">if</span> (preSumFreq.containsKey(preSum - k)) &#123;</span><br><span class="line">                count += preSumFreq.get(preSum - k);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 然后维护 preSumFreq 的定义</span></span><br><span class="line">            preSumFreq.put(preSum, preSumFreq.getOrDefault(preSum, <span class="number">0</span>) + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> count;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>作者：liweiwei1419<br>链接：<a href="https://leetcode.cn/problems/subarray-sum-equals-k/solution/bao-li-jie-fa-qian-zhui-he-qian-zhui-he-you-hua-ja/">https://leetcode.cn/problems/subarray-sum-equals-k/solution/bao-li-jie-fa-qian-zhui-he-qian-zhui-he-you-hua-ja/</a></p>
</blockquote>
<p>先看前缀和是什么</p>
<p><img src="/./images/%E5%89%8D%E7%BC%80%E5%92%8C.jpg" alt="本地图片"></p>
<p>由前缀和的思想就可以把问题转化为两数之差等于某个数的问题，这就回到了之前的经典题两数之和的方法了，用哈希表优化就可以，记得哈希表一开始放0和1，该题本身prefixSum可以不减任何其他的数组就是本身。</p>
]]></content>
      <categories>
        <category>计算机学习</category>
        <category>数据结构与算法</category>
        <category>刷题题解</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>数组</tag>
        <tag>哈希表</tag>
        <tag>前缀和</tag>
        <tag>刷题题解</tag>
      </tags>
  </entry>
  <entry>
    <title>Mysql常用指令总结（二）（含通用sql语句)</title>
    <url>/MySQL/Mysql%E5%B8%B8%E7%94%A8%E6%8C%87%E4%BB%A4%E6%80%BB%E7%BB%93%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
    <content><![CDATA[<h3 id="Mysql常用指令"><a href="#Mysql常用指令" class="headerlink" title="Mysql常用指令"></a>Mysql常用指令</h3><span id="more"></span>

<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">查询字段前加<span class="keyword">distinct</span>有去重作用，<span class="keyword">distinct</span>只能出现在字段的最前面，后面的字段联合起来去重。</span><br><span class="line">笛卡尔积现象。</span><br><span class="line">内连接等值连接。要查询的表 <span class="keyword">inner</span>（可省略） <span class="keyword">join</span> 要查询的表 <span class="keyword">on</span> 连接条件</span><br><span class="line">内连接非等值连接 就是<span class="keyword">on</span>后面连接条件不是相等关系。</span><br><span class="line">自连接 自己连接自己</span><br><span class="line">外连接 AB两表有主副表之分，主要查询主表，捎带查询副表。副表没有与主表的数据匹配，副表自动模拟<span class="keyword">null</span>匹配。</span><br><span class="line">左外连接，右外连接，表示主表位置。</span><br><span class="line">要查询的表 <span class="keyword">left</span>（左边为主表） <span class="keyword">outer</span>(可省略) <span class="keyword">join</span> 要查询的表 <span class="keyword">on</span> 连接条件</span><br><span class="line">嵌套语句；可以嵌套 <span class="keyword">select</span> 。</span><br><span class="line"><span class="keyword">union</span> 将查询结果相加，列说明取<span class="keyword">union</span>前面的元素。</span><br><span class="line">Mysql 特有limit</span><br><span class="line">limit startIndex,length（最后执行）</span><br><span class="line">startIndex表示起始位置，length表示取几个，不写startIndex默认为<span class="number">0</span>。</span><br><span class="line"><span class="keyword">select</span> <span class="number">5</span></span><br><span class="line">	...</span><br><span class="line"><span class="keyword">from</span> <span class="number">1</span></span><br><span class="line">	...</span><br><span class="line"><span class="keyword">where</span> <span class="number">2</span></span><br><span class="line">	...</span><br><span class="line"><span class="keyword">group</span> <span class="keyword">by</span> <span class="number">3</span> </span><br><span class="line">	...</span><br><span class="line"><span class="keyword">having</span> <span class="number">4</span></span><br><span class="line">	...</span><br><span class="line"><span class="keyword">order</span> <span class="keyword">by</span> <span class="number">6</span></span><br><span class="line">	... </span><br><span class="line">limit <span class="number">7</span></span><br><span class="line">	...</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="code"><pre><span class="line">建表</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> 表名（</span><br><span class="line">字段名<span class="number">1</span> 数据类型，</span><br><span class="line">字段名<span class="number">2</span> 数据类型，</span><br><span class="line">....</span><br><span class="line">);</span><br><span class="line">常见数据类型：</span><br><span class="line"><span class="type">int</span>(<span class="type">int</span>)</span><br><span class="line"><span class="type">bigint</span>(long)</span><br><span class="line"><span class="type">float</span>(<span class="type">float</span> <span class="keyword">double</span>)</span><br><span class="line"><span class="type">char</span> 定长字符串(java中String)</span><br><span class="line"><span class="type">varchar</span> 不定长字符串(Stringbuilder,StringBuffer)</span><br><span class="line">data(java.util.data)</span><br><span class="line"><span class="type">BLOB</span> 二进制大对象（存图片，视频）</span><br><span class="line"><span class="type">CLOB</span> 字符大对象（存大文本，如小说，<span class="number">4</span>gb字符串)</span><br><span class="line">插入数据</span><br><span class="line"><span class="keyword">insert</span> <span class="keyword">into</span> 表名（字段名<span class="number">1</span>，字段名<span class="number">2</span>,...) <span class="keyword">values</span>(值<span class="number">1</span>,值<span class="number">2</span>,....)</span><br><span class="line">查看mysql字符集</span><br><span class="line"><span class="keyword">show</span> variables <span class="keyword">like</span> <span class="string">&#x27;character%&#x27;</span>;</span><br><span class="line">mysql 支持的字符集</span><br><span class="line"><span class="keyword">show</span> charset;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>计算机学习</category>
        <category>数据库</category>
        <category>MySQL</category>
      </categories>
      <tags>
        <tag>MySQL</tag>
      </tags>
  </entry>
  <entry>
    <title>三数之和</title>
    <url>/%E5%88%B7%E9%A2%98%E9%A2%98%E8%A7%A3/%E4%B8%89%E6%95%B0%E4%B9%8B%E5%92%8C/</url>
    <content><![CDATA[<h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>给你一个整数数组 nums ，判断是否存在三元组 [nums[i], nums[j], nums[k]] 满足 i !&#x3D; j、i !&#x3D; k 且 j !&#x3D; k ，同时还满足 nums[i] + nums[j] + nums[k] &#x3D;&#x3D; 0 。请</p>
<p>你返回所有和为 0 且不重复的三元组。</p>
<p>注意：答案中不可以包含重复的三元组。<span id="more"></span></p>
<p>示例 1：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">输入：nums = [-1,0,1,2,-1,-4]</span><br><span class="line">输出：[[-1,-1,2],[-1,0,1]]</span><br><span class="line">解释：</span><br><span class="line">nums[0] + nums[1] + nums[2] = (-1) + 0 + 1 = 0 。</span><br><span class="line">nums[1] + nums[2] + nums[4] = 0 + 1 + (-1) = 0 。</span><br><span class="line">nums[0] + nums[3] + nums[4] = (-1) + 2 + (-1) = 0 。</span><br><span class="line">不同的三元组是 [-1,0,1] 和 [-1,-1,2] 。</span><br><span class="line">注意，输出的顺序和三元组的顺序并不重要。</span><br></pre></td></tr></table></figure>

<blockquote>
<p>来源：力扣（LeetCode）<br>链接：<a href="https://leetcode.cn/problems/3sum">https://leetcode.cn/problems/3sum</a></p>
</blockquote>
<h3 id="大神题解"><a href="#大神题解" class="headerlink" title="大神题解"></a>大神题解</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> List&lt;List&lt;Integer&gt;&gt; <span class="title function_">threeSum</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        List&lt;List&lt;Integer&gt;&gt; ans = <span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">        <span class="type">int</span> <span class="variable">len</span> <span class="operator">=</span> nums.length;</span><br><span class="line">        <span class="keyword">if</span>(nums == <span class="literal">null</span> || len &lt; <span class="number">3</span>) <span class="keyword">return</span> ans;</span><br><span class="line">        Arrays.sort(nums); <span class="comment">// 排序</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; len ; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(nums[i] &gt; <span class="number">0</span>) <span class="keyword">break</span>; <span class="comment">// 如果当前数字大于0，则三数之和一定大于0，所以结束循环</span></span><br><span class="line">            <span class="keyword">if</span>(i &gt; <span class="number">0</span> &amp;&amp; nums[i] == nums[i-<span class="number">1</span>]) <span class="keyword">continue</span>; <span class="comment">// 去重</span></span><br><span class="line">            <span class="type">int</span> <span class="variable">L</span> <span class="operator">=</span> i+<span class="number">1</span>;</span><br><span class="line">            <span class="type">int</span> <span class="variable">R</span> <span class="operator">=</span> len-<span class="number">1</span>;</span><br><span class="line">            <span class="keyword">while</span>(L &lt; R)&#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> nums[i] + nums[L] + nums[R];</span><br><span class="line">                <span class="keyword">if</span>(sum == <span class="number">0</span>)&#123;</span><br><span class="line">                    ans.add(Arrays.asList(nums[i],nums[L],nums[R]));</span><br><span class="line">                    <span class="keyword">while</span> (L&lt;R &amp;&amp; nums[L] == nums[L+<span class="number">1</span>]) L++; <span class="comment">// 去重</span></span><br><span class="line">                    <span class="keyword">while</span> (L&lt;R &amp;&amp; nums[R] == nums[R-<span class="number">1</span>]) R--; <span class="comment">// 去重</span></span><br><span class="line">                    L++;</span><br><span class="line">                    R--;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (sum &lt; <span class="number">0</span>) L++;</span><br><span class="line">                <span class="keyword">else</span> <span class="keyword">if</span> (sum &gt; <span class="number">0</span>) R--;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;        </span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>作者：guanpengchn<br>链接：<a href="https://leetcode.cn/problems/3sum/solution/hua-jie-suan-fa-15-san-shu-zhi-he-by-guanpengchn/">https://leetcode.cn/problems/3sum/solution/hua-jie-suan-fa-15-san-shu-zhi-he-by-guanpengchn/</a><br>来源：力扣（LeetCode）</p>
</blockquote>
<p>作者先固定一个数的位置，然后再用双指针的方法找固定数的相反数，如果三个数大于零就右指针移动，小于零就左指针移动，还要注意的是去重，如果有连续相同的数则忽略。</p>
]]></content>
      <categories>
        <category>计算机学习</category>
        <category>数据结构与算法</category>
        <category>刷题题解</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>数组</tag>
        <tag>刷题题解</tag>
        <tag>双指针</tag>
        <tag>排序</tag>
      </tags>
  </entry>
  <entry>
    <title>接雨水</title>
    <url>/%E5%88%B7%E9%A2%98%E9%A2%98%E8%A7%A3/%E6%8E%A5%E9%9B%A8%E6%B0%B4/</url>
    <content><![CDATA[<h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>给定 n 个非负整数表示每个宽度为 1 的柱子的高度图，计算按此排列的柱子，下雨之后能接多少雨水。</p>
<p>示例 1：</p>
<p><img src="https://assets.leetcode-cn.com/aliyun-lc-upload/uploads/2018/10/22/rainwatertrap.png" alt="力扣图片"></p>
<span id="more"></span>

<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">输入：height = [0,1,0,2,1,0,1,3,2,1,2,1]</span><br><span class="line">输出：6</span><br><span class="line">解释：上面是由数组 [0,1,0,2,1,0,1,3,2,1,2,1] 表示的高度图，在这种情况下，可以接 6 个单位的雨水（蓝色部分表示雨水）。</span><br></pre></td></tr></table></figure>



<blockquote>
<p>来源：力扣（LeetCode）<br>链接：<a href="https://leetcode.cn/problems/trapping-rain-water">https://leetcode.cn/problems/trapping-rain-water</a></p>
</blockquote>
<h3 id="我的题解"><a href="#我的题解" class="headerlink" title="我的题解"></a>我的题解</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">trap</span><span class="params">(<span class="type">int</span>[] height)</span> &#123;</span><br><span class="line">        <span class="type">int</span> len=height.length;</span><br><span class="line">        <span class="type">int</span> i=<span class="number">0</span>,j=len-<span class="number">1</span>,k=<span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> sum=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(i&lt;j)</span><br><span class="line">        &#123;</span><br><span class="line"></span><br><span class="line">            <span class="keyword">if</span>(height[i]&gt;=k&amp;&amp;height[j]&gt;=k)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">for</span>(<span class="type">int</span> x=i+<span class="number">1</span>;x&lt;j;x++)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">if</span>(height[x]&lt;k)</span><br><span class="line">                    &#123;</span><br><span class="line">                        sum++;</span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;</span><br><span class="line">                k++;</span><br><span class="line">                i=<span class="number">0</span>;</span><br><span class="line">                j=len-<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(height[i]&gt;=k)</span><br><span class="line">            &#123;</span><br><span class="line">                j--;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span> <span class="keyword">if</span>(height[j]&gt;=k)</span><br><span class="line">            &#123;</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                j--;</span><br><span class="line">                i++;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>本题我的做法主要思想还是双指针，分别将双指针放在数组的最左边和最右边，观察图形可以一层一层的来看，先找到两端第一个大于等于1的方块，则在第一层这两个方块之间低于1的部分可以储存一份水，然后再看第二层（让k变成2），找到两端第一个大于等于2的方块，则在第二层这两个方块之间低于2的部分可以储存一份水(只记第二层的水，因为第一层已经记录了)。最后以此类推，直到两端找不到同时大于某个高度的数为止。</p>
<h3 id="运行结果"><a href="#运行结果" class="headerlink" title="运行结果"></a>运行结果</h3><p>执行用时：2739 ms, 在所有 Java 提交中击败了5.01%的用户</p>
<p>内存消耗：43.6 MB, 在所有 Java 提交中击败了5.02%的用户</p>
<p>通过测试用例：322 &#x2F; 322</p>
<h3 id="大神题解"><a href="#大神题解" class="headerlink" title="大神题解"></a>大神题解</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">trap</span><span class="params">(<span class="type">int</span>[] walls)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (walls == <span class="literal">null</span> || walls.length &lt;= <span class="number">2</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="comment">// 思路：</span></span><br><span class="line">        <span class="comment">// 单调不增栈，walls元素作为右墙依次入栈</span></span><br><span class="line">        <span class="comment">// 出现入栈元素（右墙）比栈顶大时，说明在右墙左侧形成了低洼处，低洼处出栈并结算该低洼处能接的雨水</span></span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">water</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        Stack&lt;Integer&gt; stack = <span class="keyword">new</span> <span class="title class_">Stack</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> right=<span class="number">0</span>; right&lt;walls.length; right++) &#123;</span><br><span class="line">            <span class="comment">// 栈不为空，且当前元素（右墙）比栈顶（右墙的左侧）大：说明形成低洼处了</span></span><br><span class="line">            <span class="keyword">while</span> (!stack.isEmpty() &amp;&amp; walls[right]&gt;walls[stack.peek()]) &#123;</span><br><span class="line">                <span class="comment">// 低洼处弹出，尝试结算此低洼处能积攒的雨水</span></span><br><span class="line"></span><br><span class="line">                <span class="type">int</span> <span class="variable">bottom</span> <span class="operator">=</span> stack.pop();</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 看看栈里还有没有东西（左墙是否存在）</span></span><br><span class="line">                <span class="comment">// 有右墙+有低洼+没有左墙=白搭</span></span><br><span class="line">                <span class="keyword">if</span> (stack.isEmpty()) &#123;</span><br><span class="line">                    <span class="keyword">break</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 左墙位置以及左墙、右墙、低洼处的高度</span></span><br><span class="line">                <span class="type">int</span> <span class="variable">left</span> <span class="operator">=</span> stack.peek();</span><br><span class="line">                <span class="type">int</span> <span class="variable">leftHeight</span> <span class="operator">=</span> walls[left];</span><br><span class="line">                <span class="type">int</span> <span class="variable">rightHeight</span> <span class="operator">=</span> walls[right];</span><br><span class="line">                <span class="type">int</span> <span class="variable">bottomHeight</span> <span class="operator">=</span> walls[bottom];</span><br><span class="line"></span><br><span class="line">                <span class="comment">// 能积攒的水=(右墙位置-左墙位置-1) * (min(右墙高度, 左墙高度)-低洼处高度)</span></span><br><span class="line">                water += (right-left-<span class="number">1</span>) * (Math.min(leftHeight, rightHeight)-bottomHeight);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 上面的pop循环结束后再push，保证stack是单调不增</span></span><br><span class="line">            stack.push(right);</span><br><span class="line"></span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> water;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><a href="https://leetcode.cn/problems/trapping-rain-water/solution/trapping-rain-water-by-ikaruga/">https://leetcode.cn/problems/trapping-rain-water/solution/trapping-rain-water-by-ikaruga/</a></p>
<p>引用自此评论区</p>
</blockquote>
<p>该方法运用了栈的思想，先找到左边比右边矮的地方,于是此时栈的顶部就是凹陷地方，right就是右墙，再把栈顶元素取出，如果栈剩下的为空，则没有左墙直接跳出，如果有，假如凹陷的地方取出栈后，此时的栈左墙是和凹陷的地方一样高的（不可能比凹陷的地方矮，程序试从左到右找凹陷的），则由于<code>water += (right-left-1) * (Math.min(leftHeight, rightHeight)-bottomHeight);</code>此时的水深度仍然算出来记录为零，由于while循环的存在，此时凹陷处会向左移动（栈顶元素取出了凹陷向左移动），直到找出左墙比凹陷高，此时就可以算出凹陷的水的格数了。但这种做法时间效率没有比我的做法效率提升多少，下面还有一种方法效率最好。</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">trap</span><span class="params">(<span class="type">int</span>[] height)</span> &#123;</span><br><span class="line">        <span class="comment">// int left=0,right=height.length-1;</span></span><br><span class="line">        <span class="comment">// int maxL=height[left],maxR=height[right];</span></span><br><span class="line">        <span class="comment">// int res=0;</span></span><br><span class="line">        <span class="comment">// while(left&lt;right)&#123;</span></span><br><span class="line">        <span class="comment">//     maxL=Math.max(maxL,height[left]);</span></span><br><span class="line">        <span class="comment">//     maxR=Math.max(maxR,height[right]);</span></span><br><span class="line">        <span class="comment">//     res+=maxR&gt;maxL?maxL-height[left++]:maxR-height[right--];</span></span><br><span class="line">        <span class="comment">// &#125;</span></span><br><span class="line">        <span class="comment">// return res;</span></span><br><span class="line">        <span class="type">int</span> sum=<span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> index=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;height.length;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(height[i]&gt;height[index])&#123;</span><br><span class="line">                index=i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> left=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;index;i++)&#123;</span><br><span class="line">            <span class="keyword">if</span>(height[i]&lt;height[left])&#123;</span><br><span class="line">                sum+=height[left]-height[i];</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(height[i]&gt;=height[left])&#123;</span><br><span class="line">                left=i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> right=height.length-<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=height.length-<span class="number">2</span>;i&gt;index;i--)&#123;</span><br><span class="line">            <span class="keyword">if</span>(height[i]&lt;height[right])&#123;</span><br><span class="line">                sum+=height[right]-height[i];</span><br><span class="line">            &#125;<span class="keyword">else</span> <span class="keyword">if</span>(height[i]&gt;=height[right])&#123;</span><br><span class="line">                right=i;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> sum;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>来自提交答案时官方的标准解答</p>
</blockquote>
<p>此方法是先找出图像的最高点，然后由此分成左右两个部分，这样每一列水的格数就取决于两边短板的高度了，小于短板高度就可以存储雨水，最后加起来，此算法我觉得很简单，效率也表现出来了最优。</p>
]]></content>
      <categories>
        <category>计算机学习</category>
        <category>数据结构与算法</category>
        <category>刷题题解</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>数组</tag>
        <tag>刷题题解</tag>
        <tag>双指针</tag>
        <tag>栈</tag>
        <tag>动态规划</tag>
        <tag>单调栈</tag>
      </tags>
  </entry>
  <entry>
    <title>两数之和</title>
    <url>/%E5%88%B7%E9%A2%98%E9%A2%98%E8%A7%A3/%E4%B8%A4%E6%95%B0%E4%B9%8B%E5%92%8C/</url>
    <content><![CDATA[<h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>给定一个整数数组 <code>nums</code> 和一个整数目标值 <code>target</code>，请你在该数组中找出 <strong>和为目标值</strong> <em><code>target</code></em> 的那 <strong>两个</strong> 整数，并返回它们的数组下标<span id="more"></span></p>
<p>示例：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">输入：nums = [2,7,11,15], target = 9</span><br><span class="line">输出：[0,1]</span><br><span class="line">解释：因为 nums[0] + nums[1] == 9 ，返回 [0, 1] 。</span><br></pre></td></tr></table></figure>

<blockquote>
<p>来源：力扣（LeetCode）<br>链接：<a href="https://leetcode.cn/problems/two-sum">https://leetcode.cn/problems/two-sum</a><br>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p>
</blockquote>
<h3 id="我的题解"><a href="#我的题解" class="headerlink" title="我的题解"></a>我的题解</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] twoSum(<span class="type">int</span>[] nums, <span class="type">int</span> target) &#123;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;nums.length;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=i+<span class="number">1</span>;j&lt;nums.length;j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">if</span>(nums[i]+nums[j]==target)</span><br><span class="line">                &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">int</span>[]&#123;i,j&#125;;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>本题我的方法是直接暴力，直接两个数按顺序组合起来看是否等于target，等于就返回结果。</p>
<h4 id="运行结果"><a href="#运行结果" class="headerlink" title="运行结果"></a>运行结果</h4><p>执行用时：55 ms, 在所有 Java 提交中击败了25.59%的用户</p>
<p>内存消耗：41.8 MB, 在所有 Java 提交中击败了26.16%的用户</p>
<p>通过测试用例：57 &#x2F; 57</p>
<h3 id="大神题解"><a href="#大神题解" class="headerlink" title="大神题解"></a>大神题解</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span>[] twoSum(<span class="type">int</span>[] nums, <span class="type">int</span> target) &#123;</span><br><span class="line">        Map&lt;Integer, Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i&lt; nums.length; i++) &#123;</span><br><span class="line">            <span class="keyword">if</span>(map.containsKey(target - nums[i])) &#123;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">int</span>[] &#123;map.get(target-nums[i]),i&#125;;</span><br><span class="line">            &#125;</span><br><span class="line">            map.put(nums[i], i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">IllegalArgumentException</span>(<span class="string">&quot;No two sum solution&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>作者：guanpengchn<br>链接：<a href="https://leetcode.cn/problems/two-sum/solution/jie-suan-fa-1-liang-shu-zhi-he-by-guanpengchn/">https://leetcode.cn/problems/two-sum/solution/jie-suan-fa-1-liang-shu-zhi-he-by-guanpengchn/</a><br>来源：力扣（LeetCode）<br>著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。</p>
</blockquote>
<p>我的理解为创立一个空哈希表，往里面不断放数，放数的同时存入数的下标，一旦检测到target减去即将要放入的数的结果在哈希表时，此时这两个数就是目标结果，调用get获得目标下标，输出当前待存入数下标即为结果。这样大大减少了运算时间。</p>
]]></content>
      <categories>
        <category>计算机学习</category>
        <category>数据结构与算法</category>
        <category>刷题题解</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>数组</tag>
        <tag>哈希表</tag>
        <tag>刷题题解</tag>
      </tags>
  </entry>
  <entry>
    <title>字母异位词分组</title>
    <url>/%E5%88%B7%E9%A2%98%E9%A2%98%E8%A7%A3/%E5%AD%97%E6%AF%8D%E5%BC%82%E4%BD%8D%E8%AF%8D%E5%88%86%E7%BB%84/</url>
    <content><![CDATA[<h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>给你一个字符串数组，请你将 字母异位词 组合在一起。可以按任意顺序返回结果列表。</p>
<p>字母异位词 是由重新排列源单词的字母得到的一个新单词，所有源单词中的字母通常恰好只用一次。<span id="more"></span></p>
<p>示例 1:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">输入: strs = [&quot;eat&quot;, &quot;tea&quot;, &quot;tan&quot;, &quot;ate&quot;, &quot;nat&quot;, &quot;bat&quot;]</span><br><span class="line">输出: [[&quot;bat&quot;],[&quot;nat&quot;,&quot;tan&quot;],[&quot;ate&quot;,&quot;eat&quot;,&quot;tea&quot;]]</span><br></pre></td></tr></table></figure>

<blockquote>
<p>来源：力扣（LeetCode）<br>链接：<a href="https://leetcode.cn/problems/group-anagrams">https://leetcode.cn/problems/group-anagrams</a><br>著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。</p>
</blockquote>
<h3 id="我的题解"><a href="#我的题解" class="headerlink" title="我的题解"></a>我的题解</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.ArrayList;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;List&lt;String&gt;&gt; <span class="title function_">groupAnagrams</span><span class="params">(String[] strs)</span> &#123;</span><br><span class="line">        List&lt;List&lt;String&gt;&gt; result =<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">        List&lt;String&gt; src=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(String str : strs)</span><br><span class="line">        &#123;</span><br><span class="line">            src.add(str);</span><br><span class="line">        &#125;</span><br><span class="line">       <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;src.size();i++)</span><br><span class="line">       &#123;</span><br><span class="line">           <span class="type">char</span>[] ch1=src.get(i).toCharArray();</span><br><span class="line">           Arrays.sort(ch1);</span><br><span class="line">           List&lt;String&gt; list=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">           <span class="keyword">for</span>(<span class="type">int</span> j=i+<span class="number">1</span>;j&lt;src.size();j++)</span><br><span class="line">           &#123;</span><br><span class="line">               <span class="type">char</span>[] ch2=src.get(j).toCharArray();</span><br><span class="line">               Arrays.sort(ch2);</span><br><span class="line">               <span class="keyword">if</span>(Arrays.equals(ch1,ch2)) &#123;</span><br><span class="line">                   list.add(src.get(j));</span><br><span class="line">                   src.remove(j);</span><br><span class="line">                   j--;</span><br><span class="line">               &#125;</span><br><span class="line">           &#125;</span><br><span class="line">           list.add(src.get(i));</span><br><span class="line">           src.remove(i);</span><br><span class="line">           i--;</span><br><span class="line">           result.add(list);</span><br><span class="line">       &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>先说结论由于我的此题设计的算法复杂度过高，测试后面时出现大数据就超时了，不正确。我的具体思路就是将每个字符串转换成字符数组，然后再将字符数组排序，如果两个字符数组相等，则将它们放在同一个数组表里面，放进去以后将原来的字符串数组中的对应元素删除，由于此时删除元素后每一个元素的下标要变，故记得进行i–和j–。记得一组字符组排序相同的元素存完了后要新new一个来存储新的一组排序后字符数组相同的元素，不要调用clear清除原来的数组表，因为表add存储的是数组表list的地址,而clean清除的是地址里的元素，如果使用clear而不新new的话原来存在表add的·元素会都变成空。</p>
<h3 id="大神题解"><a href="#大神题解" class="headerlink" title="大神题解"></a>大神题解</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">        <span class="keyword">public</span> List&lt;List&lt;String&gt;&gt; <span class="title function_">groupAnagrams</span><span class="params">(String[] strs)</span> &#123;</span><br><span class="line">            List&lt;List&lt;String&gt;&gt; lists = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">            Map&lt;String, List&lt;String&gt;&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">            <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>; i &lt; strs.length; i++) &#123;</span><br><span class="line">                <span class="type">String</span> <span class="variable">change</span> <span class="operator">=</span> change(strs[i]);</span><br><span class="line">                <span class="keyword">if</span> (map.containsKey(change)) &#123;</span><br><span class="line">                    map.get(change).add(strs[i]);</span><br><span class="line">                &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                    List&lt;String&gt; l = <span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;&gt;();</span><br><span class="line">                    l.add(strs[i]);</span><br><span class="line">                    map.put(change, l);</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">for</span> (Map.Entry&lt;String, List&lt;String&gt;&gt; entry : map.entrySet()) &#123;</span><br><span class="line">                lists.add(entry.getValue());</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">return</span> lists;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">public</span> String <span class="title function_">change</span><span class="params">(String s)</span> &#123;</span><br><span class="line">            <span class="type">char</span>[] chars = s.toCharArray();</span><br><span class="line">            Arrays.sort(chars);</span><br><span class="line">            <span class="keyword">return</span> String.valueOf(chars);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>来自：<a href="https://leetcode.cn/problems/group-anagrams/solution/kan-wo-yi-ju-hua-ac-zi-mu-yi-wei-ci-fen-yrnis/%E4%B8%AD%E7%9A%84%E8%AF%84%E8%AE%BA%E5%8C%BA%E3%80%82">https://leetcode.cn/problems/group-anagrams/solution/kan-wo-yi-ju-hua-ac-zi-mu-yi-wei-ci-fen-yrnis/中的评论区。</a></p>
</blockquote>
<p>可以看出大神利用了map来优化算法，map中键值为字符串和表,定义一个将字符串排序的函数，如果键值中有排序后的字符串，则将为排序前的字符串放入值中的表，如果没有，就新建一个键值对，这样永map来识别相同的排序后字符串就大大优化了效率。</p>
]]></content>
      <categories>
        <category>计算机学习</category>
        <category>数据结构与算法</category>
        <category>刷题题解</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>数组</tag>
        <tag>哈希表</tag>
        <tag>刷题题解</tag>
        <tag>排序</tag>
        <tag>字符串</tag>
      </tags>
  </entry>
  <entry>
    <title>找到字符串中所有字母异位词</title>
    <url>/%E5%88%B7%E9%A2%98%E9%A2%98%E8%A7%A3/%E6%89%BE%E5%88%B0%E5%AD%97%E7%AC%A6%E4%B8%B2%E4%B8%AD%E6%89%80%E6%9C%89%E5%AD%97%E6%AF%8D%E5%BC%82%E4%BD%8D%E8%AF%8D/</url>
    <content><![CDATA[<h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>给定两个字符串 s 和 p，找到 s 中所有 p 的 异位词 的子串，返回这些子串的起始索引。不考虑答案输出的顺序。</p>
<p>异位词 指由相同字母重排列形成的字符串（包括相同的字符串）。<span id="more"></span></p>
<p>示例 1:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">输入: s = &quot;cbaebabacd&quot;, p = &quot;abc&quot;</span><br><span class="line">输出: [0,6]</span><br><span class="line">解释:</span><br><span class="line">起始索引等于 0 的子串是 &quot;cba&quot;, 它是 &quot;abc&quot; 的异位词。</span><br><span class="line">起始索引等于 6 的子串是 &quot;bac&quot;, 它是 &quot;abc&quot; 的异位词。</span><br></pre></td></tr></table></figure>

<blockquote>
<p>来源：力扣（LeetCode）<br>链接：<a href="https://leetcode.cn/problems/find-all-anagrams-in-a-string">https://leetcode.cn/problems/find-all-anagrams-in-a-string</a><br>著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。</p>
</blockquote>
<h3 id="我的题解"><a href="#我的题解" class="headerlink" title="我的题解"></a>我的题解</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> List&lt;Integer&gt; <span class="title function_">findAnagrams</span><span class="params">(String s, String p)</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; result=<span class="keyword">new</span> <span class="title class_">ArrayList</span>();</span><br><span class="line">        <span class="type">int</span> pLen=p.length();</span><br><span class="line">        <span class="type">int</span> sLen=s.length();</span><br><span class="line">        String pSort=strSort(p);</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i+pLen&lt;=sLen;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(pSort.equals(strSort(s.substring(i,i+pLen))))</span><br><span class="line">            &#123;</span><br><span class="line">                result.add(i);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">strSort</span><span class="params">(String str)</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="type">char</span>[] ch=str.toCharArray();</span><br><span class="line">        Arrays.sort(ch);</span><br><span class="line">        <span class="keyword">return</span> String.valueOf(ch);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<p>思路为将s的子串和p重新排序输出字符串，然后让s的子串向左滑动，求出满足异位词条件的索引。</p>
<h3 id="大神题解"><a href="#大神题解" class="headerlink" title="大神题解"></a>大神题解</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123; <span class="keyword">public</span> List&lt;Integer&gt; <span class="title function_">findAnagrams</span><span class="params">(String s, String p)</span> &#123; List&lt;Integer&gt; ans=<span class="keyword">new</span> <span class="title class_">ArrayList</span>&lt;Integer&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="type">int</span> sLen=s.length();</span><br><span class="line">    <span class="type">int</span> pLen=p.length();</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span>(sLen&lt;pLen)&#123;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">//建立两个数组存放字符串中字母出现的词频，并以此作为标准比较</span></span><br><span class="line">    <span class="type">int</span> [] scount=<span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">26</span>];</span><br><span class="line">    <span class="type">int</span> [] pcount=<span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">26</span>];</span><br><span class="line"></span><br><span class="line">    <span class="comment">//当滑动窗口的首位在s[0]处时 （相当于放置滑动窗口进入数组）</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;pLen;i++)&#123;</span><br><span class="line">        ++scount[s.charAt(i)-<span class="string">&#x27;a&#x27;</span>]; <span class="comment">//记录s中前pLen个字母的词频</span></span><br><span class="line">        ++pcount[p.charAt(i)-<span class="string">&#x27;a&#x27;</span>]; <span class="comment">//记录要寻找的字符串中每个字母的词频(只用进行一次来确定)</span></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">//判断放置处是否有异位词     (在放置时只需判断一次)</span></span><br><span class="line">    <span class="keyword">if</span>(Arrays.equals(scount,pcount))&#123;</span><br><span class="line">         ans.add(<span class="number">0</span>);</span><br><span class="line">    &#125;   </span><br><span class="line"></span><br><span class="line">    <span class="comment">//开始让窗口进行滑动</span></span><br><span class="line">    <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;sLen-pLen;i++)&#123; <span class="comment">//i是滑动前的首位</span></span><br><span class="line">        --scount[s.charAt(i) -<span class="string">&#x27;a&#x27;</span>];       <span class="comment">//将滑动前首位的词频删去</span></span><br><span class="line">        ++scount[s.charAt(i+pLen) -<span class="string">&#x27;a&#x27;</span>];  <span class="comment">//增加滑动后最后一位的词频（以此达到滑动的效果）</span></span><br><span class="line"></span><br><span class="line">        <span class="comment">//判断滑动后处，是否有异位词</span></span><br><span class="line">        <span class="keyword">if</span>(Arrays.equals(scount,pcount))&#123;</span><br><span class="line">            ans.add(i+<span class="number">1</span>);</span><br><span class="line">        &#125; </span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> ans;</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><a href="https://leetcode.cn/problems/find-all-anagrams-in-a-string/solution/zhao-dao-zi-fu-chuan-zhong-suo-you-zi-mu-xzin/">https://leetcode.cn/problems/find-all-anagrams-in-a-string/solution/zhao-dao-zi-fu-chuan-zhong-suo-you-zi-mu-xzin/</a><br>该网址的评论区。</p>
</blockquote>
<p>思路大致也是滑动窗口，但是比较字符串是不是异位词和我的不一样，该方法比较异位词是将s的子串和p的字母放到了数组中，通过比较p和s的子串的数组中字母的频数一不一样来判断是否是异位词，通过–scount和++scount来控制窗口的滑动。</p>
]]></content>
      <tags>
        <tag>Java</tag>
        <tag>哈希表</tag>
        <tag>刷题题解</tag>
        <tag>字符串</tag>
        <tag>滑动窗口</tag>
      </tags>
  </entry>
  <entry>
    <title>无重复字符的最长子串</title>
    <url>/%E5%88%B7%E9%A2%98%E9%A2%98%E8%A7%A3/%E6%97%A0%E9%87%8D%E5%A4%8D%E5%AD%97%E7%AC%A6%E7%9A%84%E6%9C%80%E9%95%BF%E5%AD%90%E4%B8%B2/</url>
    <content><![CDATA[<h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>给定一个字符串 s ，请你找出其中不含有重复字符的 最长子串 的长度。<span id="more"></span></p>
<p>示例 1:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">输入: s = &quot;abcabcbb&quot;</span><br><span class="line">输出: 3 </span><br><span class="line">解释: 因为无重复字符的最长子串是 &quot;abc&quot;，所以其长度为 3。</span><br></pre></td></tr></table></figure>

<blockquote>
<p>来源：力扣（LeetCode）<br>链接：<a href="https://leetcode.cn/problems/longest-substring-without-repeating-characters">https://leetcode.cn/problems/longest-substring-without-repeating-characters</a><br>著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。</p>
</blockquote>
<h3 id="我的题解"><a href="#我的题解" class="headerlink" title="我的题解"></a>我的题解</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">lengthOfLongestSubstring</span><span class="params">(String s)</span> &#123;</span><br><span class="line">        <span class="type">int</span> max=<span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> cnt=<span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> a=<span class="number">0</span>,b=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;s.length();i++)</span><br><span class="line">        &#123;</span><br><span class="line">            a=i;</span><br><span class="line">            cnt=<span class="number">0</span>;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> k=i;k&lt;s.length();k++)</span><br><span class="line">            &#123;</span><br><span class="line">                b=k;</span><br><span class="line">                <span class="keyword">if</span>(k&gt;i&amp;&amp;s.substring(a,b).contains(s.charAt(k)+<span class="string">&quot;&quot;</span>))</span><br><span class="line">                &#123;</span><br><span class="line">                    cnt=<span class="number">1</span>;</span><br><span class="line">                    a=b;</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">else</span></span><br><span class="line">                &#123;</span><br><span class="line">                    cnt++;</span><br><span class="line">                &#125;</span><br><span class="line">                max=Math.max(max,cnt);</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(max&gt;=s.length()-i)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>问就是直接暴力,不过很显然大数据不行！！！</p>
<h3 id="大神题解"><a href="#大神题解" class="headerlink" title="大神题解"></a>大神题解</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">lengthOfLongestSubstring</span><span class="params">(String s)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> s.length(), ans = <span class="number">0</span>;</span><br><span class="line">        Map&lt;Character, Integer&gt; map = <span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">end</span> <span class="operator">=</span> <span class="number">0</span>, start = <span class="number">0</span>; end &lt; n; end++) &#123;</span><br><span class="line">            <span class="type">char</span> <span class="variable">alpha</span> <span class="operator">=</span> s.charAt(end);</span><br><span class="line">            <span class="keyword">if</span> (map.containsKey(alpha)) &#123;</span><br><span class="line">                start = Math.max(map.get(alpha), start);</span><br><span class="line">            &#125;</span><br><span class="line">            ans = Math.max(ans, end - start + <span class="number">1</span>);</span><br><span class="line">            map.put(s.charAt(end), end + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>作者：guanpengchn<br>链接：<a href="https://leetcode.cn/problems/longest-substring-without-repeating-characters/solution/hua-jie-suan-fa-3-wu-zhong-fu-zi-fu-de-zui-chang-z/">https://leetcode.cn/problems/longest-substring-without-repeating-characters/solution/hua-jie-suan-fa-3-wu-zhong-fu-zi-fu-de-zui-chang-z/</a></p>
</blockquote>
<p>这种解法的主要思想是用hashmap记录串中每个字母出现的最后一个位置，当出现重复的字母时就更新start的值，下次不重复的串的长度就从start开始记录，一开始start记录为零，要小心算法中加一减一的关系。还有一种优化的算法，将哈希表改为数组来存储。代码如下：</p>
<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">lengthOfLongestSubstring</span><span class="params">(String s)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">n</span> <span class="operator">=</span> s.length(), ans = <span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span>[] index = <span class="keyword">new</span> <span class="title class_">int</span>[<span class="number">128</span>];</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>, i = <span class="number">0</span>; j &lt; n; j++) &#123;</span><br><span class="line">            <span class="type">char</span> <span class="variable">c</span> <span class="operator">=</span> s.charAt(j);</span><br><span class="line"></span><br><span class="line">            <span class="comment">//i作为下标，如果是不重复的，那么i一定不会增长</span></span><br><span class="line">            i = Math.max(index[c], i);</span><br><span class="line">            <span class="comment">//然后放进去，下次有重复的对比就好有值</span></span><br><span class="line">            index[c] = j + <span class="number">1</span>;</span><br><span class="line">            <span class="comment">//ans作为长度，每次都比较一下长度被改变，直到遇到重复，不然每次长度加一</span></span><br><span class="line">            ans = Math.max(ans, j - i + <span class="number">1</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>力扣官方推荐答案。</p>
</blockquote>
<p>该算法用数组下标作为key,里面的值存储作为value,进一步提升了程序的效率。</p>
]]></content>
      <categories>
        <category>计算机学习</category>
        <category>数据结构与算法</category>
        <category>刷题题解</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>哈希表</tag>
        <tag>刷题题解</tag>
        <tag>字符串</tag>
        <tag>滑动窗口</tag>
      </tags>
  </entry>
  <entry>
    <title>最大子数组和</title>
    <url>/%E5%88%B7%E9%A2%98%E9%A2%98%E8%A7%A3/%E6%9C%80%E5%A4%A7%E5%AD%90%E6%95%B0%E7%BB%84%E5%92%8C/</url>
    <content><![CDATA[<h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>给你一个整数数组 nums ，请你找出一个具有最大和的连续子数组（子数组最少包含一个元素），返回其最大和。</p>
<p>子数组 是数组中的一个连续部分。</p>
<span id="more"></span>

<p>示例 1：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">输入：nums = [-2,1,-3,4,-1,2,1,-5,4]</span><br><span class="line">输出：6</span><br><span class="line">解释：连续子数组 [4,-1,2,1] 的和最大，为 6 。</span><br></pre></td></tr></table></figure>

<blockquote>
<p>来源：力扣（LeetCode）<br>链接：<a href="https://leetcode.cn/problems/maximum-subarray">https://leetcode.cn/problems/maximum-subarray</a></p>
</blockquote>
<h3 id="我的题解"><a href="#我的题解" class="headerlink" title="我的题解"></a>我的题解</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxSubArray</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="type">int</span>[] sum=<span class="keyword">new</span> <span class="title class_">int</span>[nums.length+<span class="number">1</span>];</span><br><span class="line">        <span class="type">int</span> min=<span class="number">0</span>;</span><br><span class="line">        <span class="type">int</span> result=nums[<span class="number">0</span>];</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">1</span>;i&lt;sum.length;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            sum[i]=sum[i-<span class="number">1</span>]+nums[i-<span class="number">1</span>];</span><br><span class="line">            <span class="keyword">if</span>(sum[i-<span class="number">1</span>]&lt;min)</span><br><span class="line">            &#123;</span><br><span class="line">                min=sum[i-<span class="number">1</span>];</span><br><span class="line">            &#125;</span><br><span class="line">            result=Math.max(result,sum[i]-min);</span><br><span class="line">            </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> result;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>本题我的思想主要是用到了前面的前缀和思想,求连续位置的和就可以用通项公式s[m]-s[n],再加上s[i]自身就行，所以再的第一项添零，到这里要求数组s右边减左边的最大值，可以在向右移动过程中固定最左边的最小值来优化求数组s右边减左边的最大值的算法，否则两层for循环暴力是通过不了的。</p>
<h3 id="大神题解"><a href="#大神题解" class="headerlink" title="大神题解"></a>大神题解</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxSubArray</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">ans</span> <span class="operator">=</span> nums[<span class="number">0</span>];</span><br><span class="line">        <span class="type">int</span> <span class="variable">sum</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> num: nums) &#123;</span><br><span class="line">            <span class="keyword">if</span>(sum &gt; <span class="number">0</span>) &#123;</span><br><span class="line">                sum += num;</span><br><span class="line">            &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                sum = num;</span><br><span class="line">            &#125;</span><br><span class="line">            ans = Math.max(ans, sum);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> ans;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<p>作者：guanpengchn<br>链接：<a href="https://leetcode.cn/problems/maximum-subarray/solution/hua-jie-suan-fa-53-zui-da-zi-xu-he-by-guanpengchn/">https://leetcode.cn/problems/maximum-subarray/solution/hua-jie-suan-fa-53-zui-da-zi-xu-he-by-guanpengchn/</a><br>来源：力扣（LeetCode）</p>
</blockquote>
<p>思路<br>动态规划的是首先对数组进行遍历，当前最大连续子序列和为 sum，结果为 ans<br>如果 sum &gt; 0，则说明 sum 对结果有增益效果，则 sum 保留并加上当前遍历数字<br>如果 sum &lt;&#x3D; 0，则说明 sum 对结果无增益效果，需要舍弃，则 sum 直接更新为当前遍历数字<br>每次比较 sum 和 ans的大小，将最大值置为ans，遍历结束返回结果</p>
<blockquote>
<p>作者：guanpengchn<br>链接：<a href="https://leetcode.cn/problems/maximum-subarray/solution/hua-jie-suan-fa-53-zui-da-zi-xu-he-by-guanpengchn/">https://leetcode.cn/problems/maximum-subarray/solution/hua-jie-suan-fa-53-zui-da-zi-xu-he-by-guanpengchn/</a><br>来源：力扣（LeetCode）</p>
</blockquote>
]]></content>
      <categories>
        <category>计算机学习</category>
        <category>数据结构与算法</category>
        <category>刷题题解</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>数组</tag>
        <tag>动态规划</tag>
        <tag>分治</tag>
      </tags>
  </entry>
  <entry>
    <title>最长连续序列</title>
    <url>/%E5%88%B7%E9%A2%98%E9%A2%98%E8%A7%A3/%E6%9C%80%E9%95%BF%E8%BF%9E%E7%BB%AD%E5%BA%8F%E5%88%97/</url>
    <content><![CDATA[<h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>给定一个未排序的整数数组 nums ，找出数字连续的最长序列（不要求序列元素在原数组中连续）的长度。</p>
<p>请你设计并实现时间复杂度为 O(n) 的算法解决此问题。<span id="more"></span></p>
<p>示例 1：</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">输入：nums = [100,4,200,1,3,2]</span><br><span class="line">输出：4</span><br><span class="line">解释：最长数字连续序列是 [1, 2, 3, 4]。它的长度为 4。</span><br></pre></td></tr></table></figure>

<blockquote>
<p>来源：力扣（LeetCode）<br>链接：<a href="https://leetcode.cn/problems/longest-consecutive-sequence">https://leetcode.cn/problems/longest-consecutive-sequence</a><br>著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。</p>
</blockquote>
<h3 id="我的题解"><a href="#我的题解" class="headerlink" title="我的题解"></a>我的题解</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"><span class="keyword">import</span> java.util.TreeMap;</span><br><span class="line"></span><br><span class="line"><span class="comment">//leetcode submit region begin(Prohibit modification and deletion)</span></span><br><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">longestConsecutive</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        Set&lt;Integer&gt; set=<span class="keyword">new</span> <span class="title class_">TreeSet</span>&lt;&gt;();</span><br><span class="line">        <span class="type">int</span> max=<span class="number">0</span>,j=<span class="number">1</span>;</span><br><span class="line">        <span class="type">int</span> record=<span class="number">0</span>;</span><br><span class="line">        <span class="type">boolean</span> flag=<span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i:nums)</span><br><span class="line">        &#123;</span><br><span class="line">            set.add(i);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i:set)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(flag)</span><br><span class="line">            &#123;</span><br><span class="line">              record=i;</span><br><span class="line">              flag=<span class="literal">false</span>;</span><br><span class="line">              max=<span class="number">1</span>;</span><br><span class="line">              <span class="keyword">continue</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(record+<span class="number">1</span>==i)</span><br><span class="line">            &#123;</span><br><span class="line">                j++;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                j=<span class="number">1</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            <span class="keyword">if</span>(j&gt;max)</span><br><span class="line">            &#123;</span><br><span class="line">                max=j;</span><br><span class="line">            &#125;</span><br><span class="line">            record=i;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>我的解题思路是利用treeset的排序性质和不可重复性质将数组重新组合，然后再根据题目要求找最大连续数字，该思路找最大连续数字时记得要处理好第一个数，第一个数不用跟前一个数比较是否连续，故直接continue，但是要记得将max赋值为1,否则数组只有一个数的情况不能通过，记得每次record都要记录i的值。</p>
<h3 id="运行结果"><a href="#运行结果" class="headerlink" title="运行结果"></a>运行结果</h3><p>执行耗时:52 ms,击败了34.69% 的Java用户</p>
<p>内存消耗:54.4 MB,击败了87.28% 的Java用户</p>
<h3 id="大神题解"><a href="#大神题解" class="headerlink" title="大神题解"></a>大神题解</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">longestConsecutive</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        Set&lt;Integer&gt; num_set = <span class="keyword">new</span> <span class="title class_">HashSet</span>&lt;Integer&gt;();</span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> num : nums) &#123;</span><br><span class="line">            num_set.add(num);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">int</span> <span class="variable">longestStreak</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">for</span> (<span class="type">int</span> num : num_set) &#123;</span><br><span class="line">            <span class="keyword">if</span> (!num_set.contains(num - <span class="number">1</span>)) &#123;</span><br><span class="line">                <span class="type">int</span> <span class="variable">currentNum</span> <span class="operator">=</span> num;</span><br><span class="line">                <span class="type">int</span> <span class="variable">currentStreak</span> <span class="operator">=</span> <span class="number">1</span>;</span><br><span class="line"></span><br><span class="line">                <span class="keyword">while</span> (num_set.contains(currentNum + <span class="number">1</span>)) &#123;</span><br><span class="line">                    currentNum += <span class="number">1</span>;</span><br><span class="line">                    currentStreak += <span class="number">1</span>;</span><br><span class="line">                &#125;</span><br><span class="line"></span><br><span class="line">                longestStreak = Math.max(longestStreak, currentStreak);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> longestStreak;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>作者：LeetCode-Solution<br>链接：<a href="https://leetcode.cn/problems/longest-consecutive-sequence/solution/zui-chang-lian-xu-xu-lie-by-leetcode-solution/">https://leetcode.cn/problems/longest-consecutive-sequence/solution/zui-chang-lian-xu-xu-lie-by-leetcode-solution/</a><br>来源：力扣（LeetCode）</p>
</blockquote>
<p>此题解和我的思路差不多，区别是只是用了HashSet来去重，通过<code>!num_set.contains(num - 1)</code>来找每个连续数字串的初始位置，找到以后计算连续数字串的大小，并找出其中最长的数字串的长度。</p>
]]></content>
      <categories>
        <category>计算机学习</category>
        <category>数据结构与算法</category>
        <category>刷题题解</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>数组</tag>
        <tag>哈希表</tag>
        <tag>并查集</tag>
      </tags>
  </entry>
  <entry>
    <title>盛最多水的容器</title>
    <url>/%E5%88%B7%E9%A2%98%E9%A2%98%E8%A7%A3/%E7%9B%9B%E6%9C%80%E5%A4%9A%E6%B0%B4%E7%9A%84%E5%AE%B9%E5%99%A8/</url>
    <content><![CDATA[<h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>给定一个长度为 n 的整数数组 height 。有 n 条垂线，第 i 条线的两个端点是 (i, 0) 和 (i, height[i]) 。</p>
<p>找出其中的两条线，使得它们与 x 轴共同构成的容器可以容纳最多的水。</p>
<p>返回容器可以储存的最大水量。</p>
<p>说明：你不能倾斜容器。<span id="more"></span></p>
<p>示例 1：</p>
<p><img src="https://aliyun-lc-upload.oss-cn-hangzhou.aliyuncs.com/aliyun-lc-upload/uploads/2018/07/25/question_11.jpg" alt="力扣问题图片"></p>
<p>输入：[1,8,6,2,5,4,8,3,7]<br>输出：49<br>解释：图中垂直线代表输入数组 [1,8,6,2,5,4,8,3,7]。在此情况下，容器能够容纳水（表示为蓝色部分）的最大值为 49。</p>
<blockquote>
<p>来源：力扣（LeetCode）<br>链接：<a href="https://leetcode.cn/problems/container-with-most-water">https://leetcode.cn/problems/container-with-most-water</a><br>著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。</p>
</blockquote>
<h3 id="我的题解"><a href="#我的题解" class="headerlink" title="我的题解"></a>我的题解</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxArea</span><span class="params">(<span class="type">int</span>[] height)</span> &#123;</span><br><span class="line">        <span class="type">int</span> max=<span class="number">0</span>;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;height.length;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">for</span>(<span class="type">int</span> j=i+<span class="number">1</span>;j&lt;height.length;j++)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="type">int</span> wide=Math.min(height[i],height[j]);</span><br><span class="line">                <span class="type">int</span> area=(j-i)*wide;</span><br><span class="line">                <span class="keyword">if</span>(area&gt;max)</span><br><span class="line">                &#123;</span><br><span class="line">                    max=area;</span><br><span class="line">                &#125;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> max;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>问就是直接暴力，但是数据多了还是过不了，接下来还是看大神直接利用最长板向内移动面积一定减小这已特性来优化算法吧。</p>
<h3 id="大神题解"><a href="#大神题解" class="headerlink" title="大神题解"></a>大神题解</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">maxArea</span><span class="params">(<span class="type">int</span>[] height)</span> &#123;</span><br><span class="line">        <span class="type">int</span> <span class="variable">i</span> <span class="operator">=</span> <span class="number">0</span>, j = height.length - <span class="number">1</span>, res = <span class="number">0</span>;</span><br><span class="line">        <span class="keyword">while</span>(i &lt; j) &#123;</span><br><span class="line">            res = height[i] &lt; height[j] ? </span><br><span class="line">                Math.max(res, (j - i) * height[i++]): </span><br><span class="line">                Math.max(res, (j - i) * height[j--]); </span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> res;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>作者：jyd<br>链接：<a href="https://leetcode.cn/problems/container-with-most-water/solution/container-with-most-water-shuang-zhi-zhen-fa-yi-do/">https://leetcode.cn/problems/container-with-most-water/solution/container-with-most-water-shuang-zhi-zhen-fa-yi-do/</a><br>来源：力扣（LeetCode）</p>
</blockquote>
<p><img src="https://pic.leetcode-cn.com/1628780627-VtSmcP-Picture0.png" alt="力扣图片"></p>
<p>由于<br>当向内移动长板时，min(h[i],h[j])一定减小，(j-i)一定减小，故总面积一定减少，这是优化算法的关键<br>当向内移动短板时，min(h[i],h[j])可能增大，(j-i)一定减小，故总面积可能增大。于是有初始化双指针分列水槽左右两端，循环每轮将短板向内移动一格，并更新面积最大值，直到两指针相遇时跳出；即可获得最大面积。</p>
]]></content>
      <categories>
        <category>计算机学习</category>
        <category>数据结构与算法</category>
        <category>刷题题解</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>数组</tag>
        <tag>刷题题解</tag>
        <tag>双指针</tag>
        <tag>贪心</tag>
      </tags>
  </entry>
  <entry>
    <title>移动零</title>
    <url>/%E5%88%B7%E9%A2%98%E9%A2%98%E8%A7%A3/%E7%A7%BB%E5%8A%A8%E9%9B%B6/</url>
    <content><![CDATA[<h3 id="题目描述"><a href="#题目描述" class="headerlink" title="题目描述"></a>题目描述</h3><p>给定一个数组 nums，编写一个函数将所有 0 移动到数组的末尾，同时保持非零元素的相对顺序。</p>
<p>请注意 ，必须在不复制数组的情况下原地对数组进行操作。<span id="more"></span></p>
<p>示例 1:</p>
<figure class="highlight plaintext"><table><tr><td class="code"><pre><span class="line">输入: nums = [0,1,0,3,12]</span><br><span class="line">输出: [1,3,12,0,0]</span><br></pre></td></tr></table></figure>

<blockquote>
<p>来源：力扣（LeetCode）<br>链接：<a href="https://leetcode.cn/problems/move-zeroes">https://leetcode.cn/problems/move-zeroes</a><br>著作权归领扣网络所有。商业转载请联系官方授权，非商业转载请注明出处。</p>
</blockquote>
<h3 id="我的题解"><a href="#我的题解" class="headerlink" title="我的题解"></a>我的题解</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">moveZeroes</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">        List&lt;Integer&gt; list=<span class="keyword">new</span> <span class="title class_">LinkedList</span>&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;nums.length;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            list.add(nums[i]);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">int</span> length=nums.length;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;length;i++)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(list.get(i)==<span class="number">0</span>)</span><br><span class="line">            &#123;</span><br><span class="line">                list.remove(i);</span><br><span class="line">                list.add(<span class="number">0</span>);</span><br><span class="line">                i--;</span><br><span class="line">                length--;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;list.size();i++)</span><br><span class="line">        &#123;</span><br><span class="line">            nums[i]=list.get(i);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>思路为将数组变为双向链表，遍历以后出现零就删除并在末尾添加零，再将双向链表变为数组。不过这种做法虽然简单，但是时间和空间复杂度都不行。</p>
<h3 id="运行结果"><a href="#运行结果" class="headerlink" title="运行结果"></a>运行结果</h3><p>执行用时：828 ms, 在所有 Java 提交中击败了5.05%的用户</p>
<p>内存消耗：44.3 MB, 在所有 Java 提交中击败了5.10%的用户</p>
<p>通过测试用例：74 &#x2F; 74</p>
<h3 id="大神题解"><a href="#大神题解" class="headerlink" title="大神题解"></a>大神题解</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">class</span> <span class="title class_">Solution</span> &#123;</span><br><span class="line">	<span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">moveZeroes</span><span class="params">(<span class="type">int</span>[] nums)</span> &#123;</span><br><span class="line">		<span class="keyword">if</span>(nums==<span class="literal">null</span>) &#123;</span><br><span class="line">			<span class="keyword">return</span>;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//第一次遍历的时候，j指针记录非0的个数，只要是非0的统统都赋给nums[j]</span></span><br><span class="line">		<span class="type">int</span> <span class="variable">j</span> <span class="operator">=</span> <span class="number">0</span>;</span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=<span class="number">0</span>;i&lt;nums.length;++i) &#123;</span><br><span class="line">			<span class="keyword">if</span>(nums[i]!=<span class="number">0</span>) &#123;</span><br><span class="line">				nums[j++] = nums[i];</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">		<span class="comment">//非0元素统计完了，剩下的都是0了</span></span><br><span class="line">		<span class="comment">//所以第二次遍历把末尾的元素都赋为0即可</span></span><br><span class="line">		<span class="keyword">for</span>(<span class="type">int</span> i=j;i&lt;nums.length;++i) &#123;</span><br><span class="line">			nums[i] = <span class="number">0</span>;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;	</span><br></pre></td></tr></table></figure>

<blockquote>
<p>作者：wang_ni_ma<br>链接：<a href="https://leetcode.cn/problems/move-zeroes/solution/dong-hua-yan-shi-283yi-dong-ling-by-wang_ni_ma/">https://leetcode.cn/problems/move-zeroes/solution/dong-hua-yan-shi-283yi-dong-ling-by-wang_ni_ma/</a><br>来源：力扣（LeetCode）</p>
</blockquote>
<p>此题思路为把不是零的数先往前推，用j来控制,当不是零的数放完后j到length的差就是赋值为零的数了，对比我的不用在链表上搜索目标值并删除，也不用链表数组反复转换，大大节省了运行时间。此题还应该多多留意为空的情况。</p>
]]></content>
      <categories>
        <category>计算机学习</category>
        <category>数据结构与算法</category>
        <category>刷题题解</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>数组</tag>
        <tag>刷题题解</tag>
        <tag>双指针</tag>
      </tags>
  </entry>
  <entry>
    <title>HTML简单练习（一）</title>
    <url>/%E5%89%8D%E7%AB%AF%E4%B8%89%E5%89%91%E5%AE%A2/HTML%E7%AE%80%E5%8D%95%E7%BB%83%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<h3 id="HTML练习与注解"><a href="#HTML练习与注解" class="headerlink" title="HTML练习与注解"></a>HTML练习与注解</h3><span id="more"></span>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="comment">&lt;!--下面一行有说明是html5--&gt;</span></span><br><span class="line"><span class="meta">&lt;!doctype <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">         <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;UTF-8&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>HTML基本标签<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--段落标记&lt;p&gt;&lt;/p&gt;--&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--标题字&lt;h数字&gt;&lt;/h数字&gt;数字字体大小,标题居中&lt;center&gt;&lt;/center&gt;--&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--换行&lt;br&gt;--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">center</span>&gt;</span><span class="tag">&lt;<span class="name">h2</span>&gt;</span>滕王阁序<span class="tag">&lt;/<span class="name">h2</span>&gt;</span><span class="tag">&lt;/<span class="name">center</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">p</span>&gt;</span>豫章故郡，洪都新府。星分翼轸，地接衡庐。襟三江而带五湖，控蛮荆而引瓯越。物华天宝，龙光射牛斗之墟；人杰地灵，徐孺下陈蕃之榻。雄州雾列，俊采星驰。台隍枕夷夏之交，宾主尽东南之美。都督阎公之雅望，棨戟遥临；宇文新州之懿范，襜帷暂驻。十旬休假，胜友如云；千里逢迎，高朋满座。腾蛟起凤，孟学士之词宗；紫电青霜，王将军之武库。家君作宰，路出名区；童子何知，躬逢胜饯。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="tag">&lt;<span class="name">p</span>&gt;</span>时维九月，序属三秋。潦水尽而寒潭清，烟光凝而暮山紫。俨骖騑于上路，访风景于崇阿；临帝子之长洲，得天人之旧馆。层峦耸翠，上出重霄；飞阁流丹，下临无地。鹤汀凫渚，穷岛屿之萦回；桂殿兰宫，即冈峦之体势。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="tag">&lt;<span class="name">p</span>&gt;</span>披绣闼，俯雕甍，山原旷其盈视，川泽纡其骇瞩。闾阎扑地，钟鸣鼎食之家；舸舰弥津，青雀黄龙之舳。云销雨霁，彩彻区明。落霞与孤鹜齐飞，秋水共长天一色。渔舟唱晚，响穷彭蠡之滨；雁阵惊寒，声断衡阳之浦。<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="tag">&lt;<span class="name">p</span>&gt;</span>遥襟甫畅，逸兴遄飞。爽籁发而清风生，纤歌凝而白云遏。睢园绿竹，气凌彭泽之樽；邺水朱华，光照临川之笔。四美具，二难并。穷睇眄于中天，极娱游于暇日。天高地迥，觉宇宙之无穷；兴尽悲来，识盈虚之有数。望长安于日下，目吴会于云间。地势极而南溟深，天柱高而北辰远。关山难越，谁悲失路之人？萍水相逢，尽是他乡之客。怀帝阍而不见，奉宣室以何年？<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="tag">&lt;<span class="name">p</span>&gt;</span>嗟乎！时运不齐，命途多舛。冯唐易老，李广难封。屈贾谊于长沙，非无圣主；窜梁鸿于海曲，岂乏明时？所赖君子见机，达人知命。老当益壮，宁移白首之心？穷且益坚，不坠青云之志。酌贪泉而觉爽，处涸辙以犹欢。北海虽赊，扶摇可接；东隅已逝，桑榆非晚。孟尝高洁，空余报国之情；阮籍猖狂，岂效穷途之哭！<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="tag">&lt;<span class="name">p</span>&gt;</span>勃，三尺微命，一介书生。无路请缨，等终军之弱冠；有怀投笔，慕宗悫之长风。舍簪笏于百龄，奉晨昏于万里。非谢家之宝树，接孟氏之芳邻。他日趋庭，叨陪鲤对；今兹捧袂，喜托龙门。杨意不逢，抚凌云而自惜；钟期既遇，奏流水以何惭？<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="tag">&lt;<span class="name">p</span>&gt;</span>呜乎！胜地不常，盛筵难再；兰亭已矣，梓泽丘墟。临别赠言，幸承恩于伟饯；登高作赋，是所望于群公。敢竭鄙怀，恭疏短引；一言均赋，四韵俱成。请洒潘江，各倾陆海云尔：<span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line"></span><br><span class="line">		<span class="tag">&lt;<span class="name">p</span>&gt;</span>滕王高阁临江渚，佩玉鸣鸾罢歌舞。<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">		   画栋朝飞南浦云，珠帘暮卷西山雨。<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">		   闲云潭影日悠悠，物换星移几度秋。<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">		   阁中帝子今何在？槛外长江空自流。<span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;/<span class="name">p</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--横线&lt;hr 颜色color 宽度width&gt;--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">hr</span> <span class="attr">color</span>=<span class="string">&quot;blue&quot;</span> <span class="attr">width</span>=<span class="string">&quot;50%&quot;</span> <span class="attr">align</span>=<span class="string">&quot;left&quot;</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--预留格式&lt;pre&gt;&lt;/pre&gt;--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">pre</span>&gt;</span></span><br><span class="line">			public class test1 &#123;</span><br><span class="line">				public test1() &#123;</span><br><span class="line">				</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;</span><br><span class="line">		<span class="tag">&lt;/<span class="name">pre</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--一些格式--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">del</span>&gt;</span>删除字<span class="tag">&lt;/<span class="name">del</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">ins</span>&gt;</span>插入字<span class="tag">&lt;/<span class="name">ins</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">b</span>&gt;</span>粗体字<span class="tag">&lt;/<span class="name">b</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">i</span>&gt;</span>斜体字<span class="tag">&lt;/<span class="name">i</span>&gt;</span></span><br><span class="line">		10<span class="tag">&lt;<span class="name">sup</span>&gt;</span>2<span class="tag">&lt;/<span class="name">sup</span>&gt;</span></span><br><span class="line">		CO<span class="tag">&lt;<span class="name">sub</span>&gt;</span>2<span class="tag">&lt;/<span class="name">sub</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">font</span> <span class="attr">color</span>=<span class="string">&quot;red&quot;</span> <span class="attr">size</span>=<span class="string">&quot;5&quot;</span>&gt;</span>字体标签<span class="tag">&lt;/<span class="name">font</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--实体符号&amp;开始,;结束语法严格一点--&gt;</span></span><br><span class="line">		b<span class="symbol">&amp;lt;</span>a<span class="symbol">&amp;gt;</span>c<span class="comment">&lt;!--&amp;lt为小于&amp;gt为大于号--&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">		a<span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span><span class="symbol">&amp;nbsp;</span>b<span class="comment">&lt;!--&amp;nbsp;代表空格--&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--html表格,一组tr一行,一组td一列--&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--&gt;border=&quot;1px&quot;设置表格宽度为一像素宽度,wideth,表格占的比例同比例缩放,高度设置height,align对齐方式--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">&quot;1px&quot;</span> <span class="attr">width</span>=<span class="string">&quot;60%&quot;</span> <span class="attr">height</span>=<span class="string">&quot;150px&quot;</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">tr</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">td</span>&gt;</span>1<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">td</span>&gt;</span>2<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">td</span>&gt;</span>3<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">tr</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">td</span>&gt;</span>a<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">td</span>&gt;</span>b<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">td</span>&gt;</span>c<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">tr</span> <span class="attr">align</span>=<span class="string">&quot;center&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">td</span>&gt;</span>11<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">td</span>&gt;</span>12<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">td</span>&gt;</span>13<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">		</span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="效果图"><a href="#效果图" class="headerlink" title="效果图"></a>效果图</h3><p><img src="/./images/html%E7%BB%83%E4%B9%A0.jpg" alt="本地图片"></p>
]]></content>
      <categories>
        <category>计算机学习</category>
        <category>前端三剑客</category>
      </categories>
      <tags>
        <tag>HTML</tag>
      </tags>
  </entry>
  <entry>
    <title>HTML简单练习（二）</title>
    <url>/%E5%89%8D%E7%AB%AF%E4%B8%89%E5%89%91%E5%AE%A2/HTML%E7%AE%80%E5%8D%95%E7%BB%83%E4%B9%A0%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
    <content><![CDATA[<h3 id="HTML练习与注解"><a href="#HTML练习与注解" class="headerlink" title="HTML练习与注解"></a>HTML练习与注解</h3><span id="more"></span>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span><span class="comment">&lt;!--用什么编码写的就写什么--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>我的第二个html<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span> <span class="attr">bgcolor</span>=<span class="string">&quot;red&quot;</span> <span class="attr">background</span>=<span class="string">&quot;https://img95.699pic.com/photo/50086/2210.jpg_wh300.jpg&quot;</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--单元格合并,row删除下面,colpan无所谓--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">table</span> <span class="attr">border</span>=<span class="string">&quot;1px&quot;</span> <span class="attr">width</span>=<span class="string">&quot;60%&quot;</span> <span class="attr">height</span>=<span class="string">&quot;150px&quot;</span>&gt;</span><span class="comment">&lt;!--设置背景色和背景图片--&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--thead,tbody,tfoot的展示--&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">thead</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">th</span>&gt;</span>1<span class="tag">&lt;/<span class="name">th</span>&gt;</span><span class="comment">&lt;!--th自动居中加粗表格中字体--&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">th</span>&gt;</span>2<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">th</span>&gt;</span>3<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">thead</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">tbody</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">td</span> <span class="attr">colspan</span>=<span class="string">&quot;2&quot;</span>&gt;</span>4<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">tbody</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">tfoot</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">td</span> <span class="attr">rowspan</span>=<span class="string">&quot;2&quot;</span>&gt;</span>6<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">		</span><br><span class="line">				<span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">td</span>&gt;</span>7<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">td</span>&gt;</span>8<span class="tag">&lt;/<span class="name">td</span>&gt;</span></span><br><span class="line">					</span><br><span class="line">				<span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">tfoot</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">img</span> <span class="attr">src</span>=<span class="string">&quot;https://img95.699pic.com/photo/40015/8254.jpg_wh300.jpg&quot;</span> <span class="attr">width</span>=<span class="string">&quot;500px&quot;</span>/&gt;</span><span class="comment">&lt;!--</span></span><br><span class="line"><span class="comment">		放置图片--,设置高度图片会失真，title可以设置鼠标悬停信息，alt如果图片找不到就显示后面的文字--&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--超链接</span></span><br><span class="line"><span class="comment">		target属性</span></span><br><span class="line"><span class="comment">		_blank:新窗口</span></span><br><span class="line"><span class="comment">		_self:当前窗口</span></span><br><span class="line"><span class="comment">		_top:顶级窗口</span></span><br><span class="line"><span class="comment">		_parent:父窗口</span></span><br><span class="line"><span class="comment">		--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">&quot;http://baidu.com&quot;</span> <span class="attr">target</span>=<span class="string">&quot;_blank&quot;</span>&gt;</span>百度<span class="tag">&lt;/<span class="name">a</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--无序列表，属性type可以指定字前面的图形样式，比如圆circle--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">li</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">ul</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">li</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">li</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">li</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">li</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">li</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">ul</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--有序列表--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">li</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">ol</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">li</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">li</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">li</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">li</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">li</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">li</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">ol</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--表单(收集信息）表单上method是post不会显示具体提交什么，get会显示具体提交什么，默认get,超链接是get请求--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">&quot;www.baidu.com&quot;</span> <span class="attr">method</span>=<span class="string">&quot;post&quot;</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--画按钮 submit才提交,写button就只是一个按钮--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;&quot;</span> <span class="attr">name</span>=<span class="string">&quot;测试数据&quot;</span>&gt;</span><span class="comment">&lt;!--有name才提交--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;submit&quot;</span> <span class="attr">value</span>=<span class="string">&quot;登录&quot;</span>&gt;</span></span><br><span class="line">		</span><br><span class="line">		<span class="tag">&lt;/<span class="name">form</span>&gt;</span><span class="comment">&lt;!--action用来指定内容提交地址--&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">form</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;你好&quot;</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!--下拉框选择，multiple支持多选,界面按住Ctrl选，size设置展示条数--&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">&quot;value信息&quot;</span> <span class="attr">multiple</span>=<span class="string">&quot;multip1&quot;</span> <span class="attr">size</span>=<span class="string">&quot;2&quot;</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;gz&quot;</span>&gt;</span>高中<span class="tag">&lt;/<span class="name">option</span>&gt;</span><span class="comment">&lt;!--默认选中selected--&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;xx&quot;</span> <span class="attr">selected</span>&gt;</span>小学<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;dx&quot;</span>&gt;</span>大学<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;sx&quot;</span>&gt;</span>硕士<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">&quot;bs&quot;</span>&gt;</span>博士<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">			<span class="comment">&lt;!--文本域--&gt;</span></span><br><span class="line">			简介</span><br><span class="line">			<span class="tag">&lt;<span class="name">textarea</span> <span class="attr">rows</span>=<span class="string">&quot;10&quot;</span>,<span class="attr">cols</span>=<span class="string">&quot;60&quot;</span> <span class="attr">name</span>=<span class="string">&quot;id&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">textarea</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--type属性有radio（相当于单选）可以表示性别等类似需求，需要跟value,传的是value,跟checked默认选中，checkbox相当于多选,也要有value--&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--type=file可以上传文件--&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--type=hidden隐藏域，网页看不到，但是表单提交时会自动提交给服务器--&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--readonly,disabled(放在input中）出现后都改不了数据，但只有readonly的数据能提交，disabled不能--&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--maxlength属性限制文本框内能输入的数据。--&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--id不能重复，方便获取节点，用javascript对节点进行增删改--&gt;</span></span><br><span class="line">		<span class="comment">&lt;!--div,spand都可以称为图层，盒子。此功能方便布局布局--&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>效果图</p>
<p><img src="/images/html%E7%BB%83%E4%B9%A02.jpg" alt="本地图片"></p>
]]></content>
      <categories>
        <category>计算机学习</category>
        <category>前端三剑客</category>
      </categories>
      <tags>
        <tag>HTML</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScript简述（一）</title>
    <url>/%E5%89%8D%E7%AB%AF%E4%B8%89%E5%89%91%E5%AE%A2/JavaScript%E7%AE%80%E8%BF%B0%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<h3 id="JavaScript简述"><a href="#JavaScript简述" class="headerlink" title="JavaScript简述"></a>JavaScript简述</h3><span id="more"></span>

<p>在HTML中嵌套使用JavaScript的三种方式</p>
<p>1.<code>&lt;input type=&quot;button&quot; value=&quot;Hello&quot; onclick=&quot;window.alert(&#39;Hello JS!&#39;) ;window.alert(&#39;Hello !&#39;)&quot;/&gt;</code>属性事件后onclick中直接写</p>
<p><img src="/images/js1.jpg" alt="本地图片"></p>
<p>2.脚本块</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>注意text不要打成test了,页面加载之前会先执行脚本块内的内容。</p>
<p>3.引入外部独立的文件</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span> <span class="attr">src</span>=<span class="string">&quot;文件路径&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>&lt;&#x2F;script&gt;不能省略成&#x2F;&gt;。</p>
]]></content>
      <categories>
        <category>计算机学习</category>
        <category>前端三剑客</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>css简述</title>
    <url>/%E5%89%8D%E7%AB%AF%E4%B8%89%E5%89%91%E5%AE%A2/css%E7%AE%80%E8%BF%B0/</url>
    <content><![CDATA[<h3 id="cs简述"><a href="#cs简述" class="headerlink" title="cs简述"></a>cs简述</h3><span id="more"></span>

<p>嵌套使用css的三种方式</p>
<ol>
<li><p><code>&lt;标签 style=&quot;样式名:样式值;样式名:样式值;...&quot;&gt;&lt;/标签&gt;</code></p>
</li>
<li><p>head 标签中使用style块</p>
<figure class="highlight css"><table><tr><td class="code"><pre><span class="line">&lt;head&gt;</span><br><span class="line">    &lt;style type=&quot;test/css&quot;&gt;</span><br><span class="line">        选择器&#123;</span><br><span class="line">        	样式名:样式值；</span><br><span class="line">        	样式名:样式值;</span><br><span class="line">        	......</span><br><span class="line">        &#125;</span><br><span class="line"> 		选择器&#123;</span><br><span class="line">        	样式名:样式值；</span><br><span class="line">        	样式名:样式值;</span><br><span class="line">        	......</span><br><span class="line">        &#125;</span><br><span class="line">    &lt;/style&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line"><span class="comment">/*css注释</span></span><br><span class="line"><span class="comment">#开头id选择器</span></span><br><span class="line"><span class="comment">标签选择器直接写标签</span></span><br><span class="line"><span class="comment">类选择器.加名字（class属性标记）</span></span><br><span class="line"><span class="comment">*/</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>链入外部样式表文件，写到独立的xxx.css文件中，需要时调用。<br><code>&lt;link type=&quot;text/css&quot; rel=&quot;stylesheet&quot; href=&quot;css文件路径&quot;/&gt;</code></p>
</li>
</ol>
]]></content>
      <categories>
        <category>计算机学习</category>
        <category>前端三剑客</category>
      </categories>
      <tags>
        <tag>css</tag>
      </tags>
  </entry>
  <entry>
    <title>hexo常用操作命令</title>
    <url>/%E5%8D%9A%E5%AE%A2/hexo%E5%B8%B8%E7%94%A8%E6%93%8D%E4%BD%9C%E5%91%BD%E4%BB%A4/</url>
    <content><![CDATA[<p>具体安装hexo方法和详细hexo操作命令见<a href="https://hexo.io/docs/">https://hexo.io/docs/</a>。</p>
<span id="more"></span>

<p>需要注意几乎所有的操作命令都需要在安装hexo时初始化hexo网站的目录下”git bash here”才能执行。</p>
<h3 id="常用操作命令"><a href="#常用操作命令" class="headerlink" title="常用操作命令"></a>常用操作命令</h3><p><code>hexo new 文件路径/文件名（文件名也会作为标题名）</code></p>
<p>此命令为生成一个带有标题和日期等属性的Markdown文件，可以在其中书写博客。如果标题名中有空格需要用””将文件名括起来，文件名中的空格会用-来表示，文件里的标题仍然为空格。文件路径会从在hexo网站目录中的_posts目录下开始生成。</p>
<p><code>hexo generate 或者简写：hexo g</code></p>
<p>将写的Markdown文件生成静态文件（也就是html网页文件）。</p>
<p><code>hexo server 或者简写hexo s</code></p>
<p>将生成的静态文件在本地展示效果，命令发送后可通过网址 <a href="http://localhost:4000/">http://localhost:4000/</a> 查看。</p>
<p><code>hexo deploy 或者hexo d</code></p>
<p>将生成的静态文件部署到联网的网页，注意部署了以后网页更新信息有一定的延迟。</p>
<p><code>ssh -T git@github.com</code></p>
<p>检查是否能连接github</p>
]]></content>
      <categories>
        <category>个人博客</category>
        <category>hexo</category>
      </categories>
      <tags>
        <tag>hexo</tag>
      </tags>
  </entry>
  <entry>
    <title>表单验证</title>
    <url>/%E5%89%8D%E7%AB%AF%E4%B8%89%E5%89%91%E5%AE%A2/%E8%A1%A8%E5%8D%95%E9%AA%8C%E8%AF%81/</url>
    <content><![CDATA[<h3 id="表单验证练习代码"><a href="#表单验证练习代码" class="headerlink" title="表单验证练习代码"></a>表单验证练习代码</h3><span id="more"></span>

<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;!doctype <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>JavaScript<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">style</span>&gt;</span><span class="language-css"></span></span><br><span class="line"><span class="language-css">			<span class="selector-tag">span</span>&#123;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">color</span>:red;</span></span><br><span class="line"><span class="language-css">				<span class="attribute">font-size</span>:<span class="number">12px</span>;</span></span><br><span class="line"><span class="language-css">			&#125;</span></span><br><span class="line"><span class="language-css">		</span><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			<span class="variable language_">window</span>.<span class="property">onload</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">var</span> name=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;username&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">var</span> namespan=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;error1&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">					name.<span class="property">value</span>=<span class="string">&quot;&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">					name.<span class="property">onkeyup</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">						<span class="keyword">var</span> namevalue=name.<span class="property">value</span>;</span></span><br><span class="line"><span class="language-javascript">						namevalue=namevalue.<span class="title function_">trim</span>();</span></span><br><span class="line"><span class="language-javascript">						<span class="keyword">if</span>(namevalue.<span class="property">length</span>==<span class="number">0</span>)</span></span><br><span class="line"><span class="language-javascript">						&#123;</span></span><br><span class="line"><span class="language-javascript">							namespan.<span class="property">innerText</span>=<span class="string">&quot;用户名不能为空&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">						&#125;</span></span><br><span class="line"><span class="language-javascript">						<span class="keyword">else</span></span></span><br><span class="line"><span class="language-javascript">						&#123;</span></span><br><span class="line"><span class="language-javascript">							<span class="keyword">if</span>(name.<span class="property">value</span>.<span class="property">length</span>&lt;<span class="number">6</span>||name.<span class="property">value</span>.<span class="property">length</span>&gt;<span class="number">14</span>)</span></span><br><span class="line"><span class="language-javascript">							&#123;</span></span><br><span class="line"><span class="language-javascript">								namespan.<span class="property">innerText</span>=<span class="string">&quot;用户名应该在6到14位之间&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">							&#125;</span></span><br><span class="line"><span class="language-javascript">							<span class="keyword">else</span></span></span><br><span class="line"><span class="language-javascript">							&#123;</span></span><br><span class="line"><span class="language-javascript">								namespan.<span class="property">innerText</span>=<span class="string">&quot;&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">								<span class="keyword">var</span> regExp=<span class="regexp">/^[A-Za-z0-9_]+$/</span>;</span></span><br><span class="line"><span class="language-javascript">								<span class="keyword">if</span>(!regExp.<span class="title function_">test</span>(namevalue))</span></span><br><span class="line"><span class="language-javascript">								&#123;</span></span><br><span class="line"><span class="language-javascript">									namespan.<span class="property">innerText</span>=<span class="string">&quot;用户名只能由数字字母下划线构成&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">								&#125;</span></span><br><span class="line"><span class="language-javascript">								<span class="keyword">else</span></span></span><br><span class="line"><span class="language-javascript">								&#123;</span></span><br><span class="line"><span class="language-javascript">									namespan.<span class="property">innerText</span>=<span class="string">&quot;&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">								&#125;</span></span><br><span class="line"><span class="language-javascript">							&#125;</span></span><br><span class="line"><span class="language-javascript">						&#125;</span></span><br><span class="line"><span class="language-javascript">					&#125;</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">var</span> pwd2=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;userpwd2&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">var</span> pwd2span=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;error2&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">				pwd2.<span class="property">onblur</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">var</span> pwd=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;userpwd&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">if</span>(pwd2.<span class="property">value</span>!=pwd.<span class="property">value</span>)</span></span><br><span class="line"><span class="language-javascript">					&#123;</span></span><br><span class="line"><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">						pwd2span.<span class="property">innerText</span>=<span class="string">&quot;密码不匹配&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">					&#125;</span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">else</span></span></span><br><span class="line"><span class="language-javascript">					&#123;</span></span><br><span class="line"><span class="language-javascript">						pwd2span.<span class="property">innerText</span>=<span class="string">&quot;&quot;</span>;</span></span><br><span class="line"><span class="language-javascript">					&#125;</span></span><br><span class="line"><span class="language-javascript">				&#125;</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">var</span> sub=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;submit1&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">				<span class="keyword">var</span> form =<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;userform&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">				sub.<span class="property">onclick</span>=<span class="keyword">function</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">var</span> userform=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;userform&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">					pwd2.<span class="title function_">focus</span>();</span></span><br><span class="line"><span class="language-javascript">					pwd2.<span class="title function_">blur</span>();</span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">if</span>(pwd2span.<span class="property">innerText</span>!=<span class="string">&quot;&quot;</span>||namespan.<span class="property">innerText</span>!=<span class="string">&quot;&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">					&#123;</span></span><br><span class="line"><span class="language-javascript">						<span class="title function_">alert</span>(<span class="string">&quot;请输入正确格式&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">					&#125;</span></span><br><span class="line"><span class="language-javascript">					<span class="keyword">else</span></span></span><br><span class="line"><span class="language-javascript">					&#123;</span></span><br><span class="line"><span class="language-javascript">						form.<span class="title function_">submit</span>();</span></span><br><span class="line"><span class="language-javascript">					&#125;</span></span><br><span class="line"><span class="language-javascript">				&#125;</span></span><br><span class="line"><span class="language-javascript">			&#125;</span></span><br><span class="line"><span class="language-javascript">		</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">form</span> <span class="attr">id</span>=<span class="string">&quot;userform&quot;</span> <span class="attr">action</span>=<span class="string">&quot;http://localhost:8080/jd/sava&quot;</span> <span class="attr">method</span>=<span class="string">&quot;get&quot;</span>&gt;</span></span><br><span class="line">			用户名<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">id</span>=<span class="string">&quot;username&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;error1&quot;</span>&gt;</span>用户名不能为空<span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">			密码<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;userpwd&quot;</span> <span class="attr">id</span>=<span class="string">&quot;userpwd&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">			确认密码<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">id</span>=<span class="string">&quot;userpwd2&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;error2&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">			邮箱<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;text&quot;</span> <span class="attr">name</span>=<span class="string">&quot;email&quot;</span> <span class="attr">id</span>=<span class="string">&quot;email&quot;</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span><span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">&quot;error3&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;注册&quot;</span> <span class="attr">id</span>=<span class="string">&quot;submit1&quot;</span>/&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;reset&quot;</span> <span class="attr">value</span>=<span class="string">&quot;重置&quot;</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>注意id名类似的尽量不要起属性名，要不可能在调用方法时报错，比如上面的submit方法。</p>
]]></content>
      <categories>
        <category>计算机学习</category>
        <category>前端三剑客</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
      </tags>
  </entry>
  <entry>
    <title>JavaScript简述（二）</title>
    <url>/%E5%89%8D%E7%AB%AF%E4%B8%89%E5%89%91%E5%AE%A2/JavaScript%E7%AE%80%E8%BF%B0%EF%BC%88%E4%BA%8C%EF%BC%89/</url>
    <content><![CDATA[<h3 id="JavaScript常用事件"><a href="#JavaScript常用事件" class="headerlink" title="JavaScript常用事件"></a>JavaScript常用事件</h3><span id="more"></span>

<ol>
<li>blur失去焦点</li>
<li>change下拉列表选中项改变，或文本框内容改变</li>
<li>click鼠标单击</li>
<li>dblclick鼠标双击</li>
<li>focus获得焦点</li>
<li>keydown键盘按下</li>
<li>load页面加载完毕</li>
<li>mousedown鼠标按下</li>
<li>mouseover鼠标经过</li>
<li>mousemove鼠标移动</li>
<li>mouseout鼠标离开</li>
<li>mouseup鼠标弹起</li>
<li>reset表单重置</li>
<li>select文本被选定</li>
<li>submit提交</li>
</ol>
<p>时间句柄在事件前加on</p>
<p>注册事件的第一种方式，直接在标签中使用事件句柄。如<br><code>&lt;input type=&quot;button&quot; value=&quot;World!&quot; onclick=&quot;window.alert(&#39;haha&#39;)&quot; /&gt;</code></p>
<p>注册事件的第二种方式，是使用纯js代码完成事件的注册</p>
<figure class="highlight html"><table><tr><td class="code"><pre><span class="line"></span><br><span class="line"><span class="meta">&lt;!doctype <span class="keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>JavaScript<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">&quot;button&quot;</span> <span class="attr">value</span>=<span class="string">&quot;Hello&quot;</span> <span class="attr">id</span>=<span class="string">&quot;bt&quot;</span>/&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">&quot;text/javascript&quot;</span>&gt;</span><span class="language-javascript"></span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">function</span> <span class="title function_">displa</span>(<span class="params"></span>)&#123;</span></span><br><span class="line"><span class="language-javascript">				<span class="title function_">alert</span>(<span class="string">&quot;HelloG&quot;</span>)</span></span><br><span class="line"><span class="language-javascript">			&#125;</span></span><br><span class="line"><span class="language-javascript">			<span class="keyword">var</span> bt=<span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&quot;bt&quot;</span>);</span></span><br><span class="line"><span class="language-javascript">			bt.<span class="property">onclick</span>=displa;<span class="comment">//不要写（）,第一种才写，要不加载时就有了,函数名也不要用关键字比如dispay,要不也达不到效果。</span></span></span><br><span class="line"><span class="language-javascript">		</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>window.onload&#x3D;（等加载完页面再执行）。回车键13,esc27。</p>
<h3 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h3><h5 id="常见符号"><a href="#常见符号" class="headerlink" title="常见符号"></a>常见符号</h5><ul>
<li>.匹配除换行符以外的任意字符</li>
<li>\w匹配字母或数字或下划线或汉字（字母大写相反意思）</li>
<li>\s匹配任意的空白符（字母大写相反意思）</li>
<li>\d匹配数字（字母大写相反意思）</li>
<li>\b匹配单词的开始或结束（字母大写相反意思）</li>
<li>^匹配字符串的开始</li>
<li>$匹配字符串的结束</li>
<li>*重复零次或更多次</li>
<li>+重复一次或更多次</li>
<li>?重复零次或一次</li>
<li>{n}重复n次</li>
<li>{n,}重复n次或更多次</li>
<li>{n,m}重复n到m次</li>
<li>[^x]匹配除x以外的字符</li>
<li>[^aeiou]匹配除aeiou以外的字符</li>
</ul>
<h5 id="简单正则表达式"><a href="#简单正则表达式" class="headerlink" title="简单正则表达式"></a>简单正则表达式</h5><p>QQ号:<code>^[1-9][0-9]&#123;4,&#125;$</code></p>
<p>email正则：<code>^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$</code></p>
<h5 id="js创建正则表达式方式"><a href="#js创建正则表达式方式" class="headerlink" title="js创建正则表达式方式"></a>js创建正则表达式方式</h5><ol>
<li><code>var regExp=/正则表达式/</code>参数</li>
<li><code>var regExp=new RegExp(&quot;正则表达式&quot;,参数)</code></li>
</ol>
<p>关于参数（可没有)</p>
<ul>
<li>g:全局匹配</li>
<li>i:忽略大小写</li>
<li>m:多行搜索（前面是正则表达式时不能用，只有是字符串时才能用）</li>
</ul>
<p><code>true/false=正则表达式对象.test(用户填写的字符串)</code></p>
]]></content>
      <categories>
        <category>计算机学习</category>
        <category>前端三剑客</category>
      </categories>
      <tags>
        <tag>JavaScript</tag>
        <tag>正则表达式</tag>
      </tags>
  </entry>
  <entry>
    <title>第一个博客搭建完成</title>
    <url>/%E5%8D%9A%E5%AE%A2/%E7%AC%AC%E4%B8%80%E4%B8%AA%E5%8D%9A%E5%AE%A2%E6%90%AD%E5%BB%BA%E5%AE%8C%E6%88%90/</url>
    <content><![CDATA[<p>人生第一个博客搭建完成，使用的是hexo框架，next主题。效果展示：</p>
<span id="more"></span>

<p><img src="/../images/2022-12-19_134805.jpg" alt="来源：github"></p>
<p>由于才开始博客还有点粗糙，比如搜索功能比较单调：</p>
<p><img src="/../images/2022-12-19_135031.jpg" alt="来源:github"></p>
<p>打赏功能也需要完善，评论功能部署出了问题没有上线，后续会继续优化。</p>
<p><img src="/../images/2022-12-19_135052.jpg" alt="来源：github"></p>
]]></content>
      <categories>
        <category>个人博客</category>
        <category>hexo</category>
        <category>next</category>
      </categories>
      <tags>
        <tag>hexo</tag>
        <tag>next</tag>
        <tag>个人博客</tag>
      </tags>
  </entry>
  <entry>
    <title>Markdown基础</title>
    <url>/%E5%B7%A5%E5%85%B7/Markdown%E5%9F%BA%E7%A1%80/</url>
    <content><![CDATA[<h2 id="什么是Markdown"><a href="#什么是Markdown" class="headerlink" title="什么是Markdown"></a>什么是Markdown</h2><p>Markdown 是一种轻量级标记语言，也可以称为Markdown语法，创始人为约翰·格鲁伯。它允许人们“使用易读易写的纯文本格式编写文档，然后转换成有效的 XHTML 文档”。这种语言吸收了很多在电子邮件中已有的纯文本标记的特性。<span id="more"></span></p>
<h2 id="标题"><a href="#标题" class="headerlink" title="标题"></a>标题</h2><h1 id="一级标题"><a href="#一级标题" class="headerlink" title="# 一级标题"></a># 一级标题</h1><h2 id="二级标题"><a href="#二级标题" class="headerlink" title="## 二级标题"></a>## 二级标题</h2><h3 id="三级标题"><a href="#三级标题" class="headerlink" title="### 三级标题"></a>### 三级标题</h3><h4 id="四级标题"><a href="#四级标题" class="headerlink" title="#### 四级标题"></a>#### 四级标题</h4><h5 id="五级标题"><a href="#五级标题" class="headerlink" title="##### 五级标题"></a>##### 五级标题</h5><h6 id="六级标题"><a href="#六级标题" class="headerlink" title="###### 六级标题"></a>###### 六级标题</h6><p>在#号后面加空格再加要写的内容构成不同类型的标题，一个#号代表一级标题，两个#代表二级标题，以此类推，最多有六级标题。要让文章显示#加空格的情况可以在#前面加转义字符\。</p>
<h2 id="段落"><a href="#段落" class="headerlink" title="段落"></a>段落</h2><p>两个换行符才能表示下一个段落，一个换行符仍然是一个段落。（在转换XHTM文件识别段落的依据）</p>
<h2 id="字体"><a href="#字体" class="headerlink" title="字体"></a>字体</h2><p>两个**加文字加两个**或者两个下划线__加文字加两个下划线__生成粗体。效果：<strong>粗体</strong><br>一个*加文字加一个*或者一个下划线_加文字加一个下划线_生成粗体。效果：<em>斜体</em><br>注：要显示有效果意义的字符时可以在前面加\，下同。三个***或者___同上面格式为粗斜体。</p>
<h2 id="引用"><a href="#引用" class="headerlink" title="引用"></a>引用</h2><p>&gt;加文字可以构成引用格式，效果如下：</p>
<blockquote>
<p>谢谢阅读！</p>
</blockquote>
<h2 id="代码块"><a href="#代码块" class="headerlink" title="代码块"></a>代码块</h2><p>单行代码可以在``中表示出来，如果要在` `中打``，则用两个`加空格加``再加空格再加``来打，如：`` ` ` ``,多行代码可以用三个`加内容加三个`来表示代码块。第一排的三个`后面可以加入java，python等说明来声明代码块中的语言。注意：`是反引号，键盘数字1左边的符号，不是单引号。<br>效果：<br><code>`printf(&quot;Hello world!&quot;);` </code></p>
<h2 id="分隔线"><a href="#分隔线" class="headerlink" title="分隔线"></a>分隔线</h2><p>三个或者以上的_,-和*在一排生成分割线。注意慎用减号，用减号生成分割线需要两个换行符，否者减号会和#一样的功能生成标题，三个减号生成三级标题。<br>效果：</p>
<hr>
<h2 id="超链接"><a href="#超链接" class="headerlink" title="超链接"></a>超链接</h2><p>格式：[网址名称](网址地址 &quot;鼠标放在网址名称上介绍网址的内容&quot;)。注意网址地址和双引号之间有一个空格，直接打网址要跳转用&lt;&gt;<br>效果：</p>
<p><a href="https://xiaoguan777.github.io/" title="小关的博客">个人博客</a><br><a href="https://xiaoguan777.github.io/">https://xiaoguan777.github.io</a></p>
<h2 id="添加媒体"><a href="#添加媒体" class="headerlink" title="添加媒体"></a>添加媒体</h2><p>格式：![图片，视频，音频说明，图片等加载不出来时显示写的说明](媒体路径或者媒体链接地址)。比如b站视频可以点击分享使用嵌入代码，百度图片可以复制图片地址。<br>效果：<img src="https://img2.baidu.com/it/u=1361506290,4036378790&fm=253&fmt=auto&app=138&f=JPEG?w=800&h=500" alt="来源：百度"></p>
<h2 id="HTML"><a href="#HTML" class="headerlink" title="HTML"></a>HTML</h2><p>写html可以直接显示</p>
<h2 id="表格"><a href="#表格" class="headerlink" title="表格"></a>表格</h2><p>格式：</p>
<p>|第一列|第二列|第三列|</p>
<p>效果：</p>
<table>
<thead>
<tr>
<th align="left">第一列</th>
<th align="left">第二列</th>
<th>第三列</th>
</tr>
</thead>
<tbody><tr>
<td align="left">(2,1)</td>
<td align="left">(2,2)</td>
<td>(2,3)</td>
</tr>
</tbody></table>
<h2 id="序号标题"><a href="#序号标题" class="headerlink" title="序号标题"></a>序号标题</h2><ol>
<li>一号</li>
<li>二号</li>
<li>三号</li>
</ol>
<p>按数字加.加tab键就可以回车自动生成12345的序号</p>
<h3 id="列表"><a href="#列表" class="headerlink" title="列表"></a>列表</h3><ul>
<li>该格式用+加上空格实现<ul>
<li>tap键可以使图形右移</li>
</ul>
</li>
</ul>
<h2 id="备注"><a href="#备注" class="headerlink" title="备注"></a>备注</h2><p>next 主题的博客如果要使文章只显示一部分，可以在想要显示的一部分后面加&lt;!–more–&gt;,读者在这里点击阅读全文才能读全文。</p>
]]></content>
      <categories>
        <category>计算机学习</category>
        <category>工具</category>
        <category>写作</category>
        <category>Markdown</category>
        <category>Markdown</category>
      </categories>
      <tags>
        <tag>Markdown</tag>
        <tag>写作</tag>
      </tags>
  </entry>
  <entry>
    <title>MyBatis学习（一）</title>
    <url>/MyBatis/MyBatis%E5%AD%A6%E4%B9%A0%EF%BC%88%E4%B8%80%EF%BC%89/</url>
    <content><![CDATA[<h3 id="入门程序代码"><a href="#入门程序代码" class="headerlink" title="入门程序代码"></a>入门程序代码</h3><span id="more"></span>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.mybatis;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="comment">//正规方式写</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisCompleteTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span>  &#123;</span><br><span class="line">        SqlSession sqlSession=<span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">sqlSessionFactoryBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">resourceAsStream</span>  <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line">            <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> sqlSessionFactoryBuilder.build(resourceAsStream);</span><br><span class="line">            sqlSession = sqlSessionFactory.openSession();</span><br><span class="line">            <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> sqlSession.insert(<span class="string">&quot;insertCar&quot;</span>);</span><br><span class="line">            System.out.println(count);</span><br><span class="line">            sqlSession.commit();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">if</span> (sqlSession != <span class="literal">null</span>) &#123;</span><br><span class="line">                sqlSession.rollback();</span><br><span class="line">            &#125;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (sqlSession != <span class="literal">null</span>) &#123;</span><br><span class="line">                sqlSession.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.mybatis;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.FileInputStream;</span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MyBatisIntroductionTest</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title function_">main</span><span class="params">(String[] args)</span> <span class="keyword">throws</span> IOException &#123;</span><br><span class="line">        <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">sqlSessionFactoryBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line"><span class="comment">//        InputStream resourceAsStream = Resources.getResourceAsStream(&quot;mybatis-config.xml&quot;);还可以 FileInputStream</span></span><br><span class="line"><span class="comment">//        但要使用绝对路径，不推荐，可移植性不好FileInputStream。</span></span><br><span class="line"><span class="comment">//        FileInputStream is = new FileInputStream(&quot;E:\\java\\mybatis\\mybatis-001-introduction\\src\\main\\resources\\mybatis-config.xml&quot;);</span></span><br><span class="line">        <span class="comment">//也可以</span></span><br><span class="line">        <span class="type">InputStream</span> <span class="variable">is</span> <span class="operator">=</span> ClassLoader.getSystemClassLoader().getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line">        <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> sqlSessionFactoryBuilder.build(is);</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> sqlSessionFactory.openSession();</span><br><span class="line"><span class="comment">//        SqlSession sqlSession = sqlSessionFactory.openSession(true);//关闭事务</span></span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> sqlSession.insert(<span class="string">&quot;insertCar&quot;</span>);</span><br><span class="line">        System.out.println(count);</span><br><span class="line">        sqlSession.commit();</span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * MyBatis工具类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SqlSessionUtils</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> SqlSessionFactory sqlSessionFactory;</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">SqlSessionUtils</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">           sqlSessionFactory = <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//    public static SqlSession openSession() throws IOException &#123;</span></span><br><span class="line"><span class="comment">//        SqlSessionFactoryBuilder sqlSessionFactoryBuilder = new SqlSessionFactoryBuilder();</span></span><br><span class="line"><span class="comment">//        SqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.build(Resources.getResourceAsStream(&quot;mybatis-config.xml&quot;));</span></span><br><span class="line"><span class="comment">//        SqlSession sqlSession = sqlSessionFactory.openSession();</span></span><br><span class="line"><span class="comment">//        return sqlSession;</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取会话对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 会话对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SqlSession <span class="title function_">openSession</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sqlSessionFactory.openSession();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;xiaoguan&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertCar&quot;</span>&gt;</span></span><br><span class="line">        insert into t_car(id,car_num,brand,guide_price,produce_time,car_type)</span><br><span class="line">        values(null,&#x27;1003&#x27;,&#x27;丰田霸道&#x27;,30.0,&#x27;2000-10-11&#x27;,&#x27;燃油车&#x27;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span> <span class="attr">debug</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 控制台输出 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;STDOUT&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.encoder.PatternLayoutEncoder&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--格式化输出：%d表示日期，%thread表示线程名，%-5level：级别从左显示5个字符宽度%msg：日志消息，%n是换行符--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 按照每天生成日志文件 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--mybatis log configure--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;com.apache.ibatis&quot;</span> <span class="attr">level</span>=<span class="string">&quot;TRACE&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;java.sql.Connection&quot;</span> <span class="attr">level</span>=<span class="string">&quot;DEBUG&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;java.sql.Statement&quot;</span> <span class="attr">level</span>=<span class="string">&quot;DEBUG&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;java.sql.PreparedStatement&quot;</span> <span class="attr">level</span>=<span class="string">&quot;DEBUG&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 日志输出级别,logback日志级别包括五个：TRACE &lt; DEBUG &lt; INFO &lt; WARN &lt; ERROR --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">&quot;DEBUG&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;STDOUT&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;FILE&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;settings&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--&amp;lt;!&amp;ndash;        &lt;setting name=&quot;logImpl&quot; value=&quot;STDOUT_LOGGING&quot;/&gt;&amp;ndash;&amp;gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--&amp;lt;!&amp;ndash;        &lt;setting name=&quot;logImpl&quot; value=&quot;LOG4J&quot;/&gt;&amp;ndash;&amp;gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--&amp;lt;!&amp;ndash;        &lt;setting name=&quot;logImpl&quot; value=&quot;SLF4J&quot;/&gt;&amp;ndash;&amp;gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;/settings&gt;--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;xxx&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;CarMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--resource可以换成url，可以写绝对路径，很少用。绝对路径前还要加深file:///再加盘符等等，移植性差--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.mybatis.test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.xiaoguan.utils.SqlSessionUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"><span class="keyword">import</span> java.io.InputStream;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CarMapperTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testInsertCarByutil</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtils.openSession();</span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> sqlSession.insert(<span class="string">&quot;insertCar&quot;</span>);</span><br><span class="line">        System.out.println(count);</span><br><span class="line">        sqlSession.commit();</span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testInsertCar</span><span class="params">()</span>&#123;</span><br><span class="line">        SqlSession sqlSession=<span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">SqlSessionFactoryBuilder</span> <span class="variable">sqlSessionFactoryBuilder</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>();</span><br><span class="line">            <span class="type">InputStream</span> <span class="variable">resourceAsStream</span>  <span class="operator">=</span> Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>);</span><br><span class="line">            <span class="type">SqlSessionFactory</span> <span class="variable">sqlSessionFactory</span> <span class="operator">=</span> sqlSessionFactoryBuilder.build(resourceAsStream);</span><br><span class="line">            sqlSession = sqlSessionFactory.openSession();</span><br><span class="line">            <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> sqlSession.insert(<span class="string">&quot;insertCar&quot;</span>);</span><br><span class="line">            System.out.println(count);</span><br><span class="line">            sqlSession.commit();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            <span class="keyword">if</span> (sqlSession != <span class="literal">null</span>) &#123;</span><br><span class="line">                sqlSession.rollback();</span><br><span class="line">            &#125;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">            <span class="keyword">if</span> (sqlSession != <span class="literal">null</span>) &#123;</span><br><span class="line">                sqlSession.close();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="测试代码"><a href="#测试代码" class="headerlink" title="测试代码"></a>测试代码</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 数据业务类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MathService</span> &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">sum</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a+b;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">sub</span><span class="params">(<span class="type">int</span> a,<span class="type">int</span> b)</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> a-b;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan;</span><br><span class="line"><span class="keyword">import</span> org.junit.Assert;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 单元测试类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MathServiceTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSum</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">MathService</span> <span class="variable">mathService</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MathService</span>();</span><br><span class="line">        <span class="type">int</span> <span class="variable">actual</span> <span class="operator">=</span> mathService.sum(<span class="number">1</span>, <span class="number">2</span>);</span><br><span class="line">        <span class="type">int</span> expect=<span class="number">3</span>;</span><br><span class="line">        Assert.assertEquals(expect,actual);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSub</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">MathService</span> <span class="variable">mathService</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MathService</span>();</span><br><span class="line">        <span class="type">int</span> <span class="variable">actual</span> <span class="operator">=</span> mathService.sub(<span class="number">10</span>, <span class="number">5</span>);</span><br><span class="line">        <span class="type">int</span> expect=<span class="number">5</span>;</span><br><span class="line">        Assert.assertEquals(expect,actual);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="MyBatis的CRUD"><a href="#MyBatis的CRUD" class="headerlink" title="MyBatis的CRUD"></a>MyBatis的CRUD</h3><figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.pojo;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.Objects;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 封装汽车相关信息的普通java类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">Car</span> &#123;</span><br><span class="line">    <span class="comment">//建议使用包装类</span></span><br><span class="line">    <span class="keyword">private</span> Long id;</span><br><span class="line">    <span class="keyword">private</span> String carNum;</span><br><span class="line">    <span class="keyword">private</span>  String brand;</span><br><span class="line">    <span class="keyword">private</span> Double guidePrice;</span><br><span class="line">    <span class="keyword">private</span> String produceTime;</span><br><span class="line">    <span class="keyword">private</span> String carType;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Car</span><span class="params">()</span> &#123;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">Car</span><span class="params">(Long id, String carNum, String brand, Double guidePrice, String produceTime, String carType)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">        <span class="built_in">this</span>.carNum = carNum;</span><br><span class="line">        <span class="built_in">this</span>.brand = brand;</span><br><span class="line">        <span class="built_in">this</span>.guidePrice = guidePrice;</span><br><span class="line">        <span class="built_in">this</span>.produceTime = produceTime;</span><br><span class="line">        <span class="built_in">this</span>.carType = carType;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">toString</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">&quot;Car&#123;&quot;</span> +</span><br><span class="line">                <span class="string">&quot;id=&quot;</span> + id +</span><br><span class="line">                <span class="string">&quot;, carNum=&#x27;&quot;</span> + carNum + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, brand=&#x27;&quot;</span> + brand + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, guidePrice=&quot;</span> + guidePrice +</span><br><span class="line">                <span class="string">&quot;, produceTime=&#x27;&quot;</span> + produceTime + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&quot;, carType=&#x27;&quot;</span> + carType + <span class="string">&#x27;\&#x27;&#x27;</span> +</span><br><span class="line">                <span class="string">&#x27;&#125;&#x27;</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">equals</span><span class="params">(Object o)</span> &#123;</span><br><span class="line">        <span class="keyword">if</span> (<span class="built_in">this</span> == o) <span class="keyword">return</span> <span class="literal">true</span>;</span><br><span class="line">        <span class="keyword">if</span> (o == <span class="literal">null</span> || getClass() != o.getClass()) <span class="keyword">return</span> <span class="literal">false</span>;</span><br><span class="line">        <span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> (Car) o;</span><br><span class="line">        <span class="keyword">return</span> Objects.equals(getId(), car.getId()) &amp;&amp; Objects.equals(getCarNum(), car.getCarNum()) &amp;&amp; Objects.equals(getBrand(), car.getBrand()) &amp;&amp; Objects.equals(getGuidePrice(), car.getGuidePrice()) &amp;&amp; Objects.equals(getProduceTime(), car.getProduceTime()) &amp;&amp; Objects.equals(getCarType(), car.getCarType());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="type">int</span> <span class="title function_">hashCode</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> Objects.hash(getId(), getCarNum(), getBrand(), getGuidePrice(), getProduceTime(), getCarType());</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Long <span class="title function_">getId</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setId</span><span class="params">(Long id)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.id = id;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getCarNum</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> carNum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCarNum</span><span class="params">(String carNum)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.carNum = carNum;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getBrand</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> brand;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setBrand</span><span class="params">(String brand)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.brand = brand;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> Double <span class="title function_">getGuidePrice</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> guidePrice;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setGuidePrice</span><span class="params">(Double guidePrice)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.guidePrice = guidePrice;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getProduceTime</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> produceTime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setProduceTime</span><span class="params">(String produceTime)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.produceTime = produceTime;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> String <span class="title function_">getCarType</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> carType;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">setCarType</span><span class="params">(String carType)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.carType = carType;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.utils;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.io.Resources;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactory;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSessionFactoryBuilder;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.io.IOException;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * MyBatis工具类</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">SqlSessionUtils</span> &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> SqlSessionFactory sqlSessionFactory;</span><br><span class="line">    <span class="keyword">private</span> <span class="title function_">SqlSessionUtils</span><span class="params">()</span> &#123;&#125;</span><br><span class="line">    <span class="keyword">static</span> &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">           sqlSessionFactory = <span class="keyword">new</span> <span class="title class_">SqlSessionFactoryBuilder</span>().build(Resources.getResourceAsStream(<span class="string">&quot;mybatis-config.xml&quot;</span>));</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"><span class="comment">//    public static SqlSession openSession() throws IOException &#123;</span></span><br><span class="line"><span class="comment">//        SqlSessionFactoryBuilder sqlSessionFactoryBuilder = new SqlSessionFactoryBuilder();</span></span><br><span class="line"><span class="comment">//        SqlSessionFactory sqlSessionFactory = sqlSessionFactoryBuilder.build(Resources.getResourceAsStream(&quot;mybatis-config.xml&quot;));</span></span><br><span class="line"><span class="comment">//        SqlSession sqlSession = sqlSessionFactory.openSession();</span></span><br><span class="line"><span class="comment">//        return sqlSession;</span></span><br><span class="line"><span class="comment">//    &#125;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 获取会话对象</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> 会话对象</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> SqlSession <span class="title function_">openSession</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="keyword">return</span> sqlSessionFactory.openSession();</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">mapper</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mapper</span> <span class="attr">namespace</span>=<span class="string">&quot;xiaoguan&quot;</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">insert</span> <span class="attr">id</span>=<span class="string">&quot;insertCar&quot;</span>&gt;</span></span><br><span class="line">        insert into t_car(id,car_num,brand,guide_price,produce_time,car_type)</span><br><span class="line">        values(null,#&#123;carNum&#125;,#&#123;brand&#125;,#&#123;guidePrice&#125;,#&#123;produceTime&#125;,#&#123;carType&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">insert</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">delete</span> <span class="attr">id</span>=<span class="string">&quot;deleteById&quot;</span>&gt;</span></span><br><span class="line">        delete from t_car where id= #&#123;这里必须写&#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">delete</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">update</span> <span class="attr">id</span>=<span class="string">&quot;updateCar&quot;</span>&gt;</span></span><br><span class="line">        update t_car set car_num=#&#123;carNum&#125;,brand=#&#123;brand&#125;,guide_price=#&#123;guidePrice&#125;,produce_time=#&#123;produceTime&#125;,car_type=#&#123;carType&#125; where id=#&#123;id&#125;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">update</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectById&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.xiaoguan.pojo.Car&quot;</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--        select * from t_car where id=#&#123;id&#125;--&gt;</span></span><br><span class="line">    select</span><br><span class="line">        id,</span><br><span class="line">        car_num as carNum,</span><br><span class="line">        brand,</span><br><span class="line">        guide_price as guidePrice,</span><br><span class="line">        produce_time as produceTime,</span><br><span class="line">        car_type as carType</span><br><span class="line">    from</span><br><span class="line">        t_car</span><br><span class="line">    where</span><br><span class="line">        id=#&#123;id&#125;;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">select</span> <span class="attr">id</span>=<span class="string">&quot;selectAll&quot;</span> <span class="attr">resultType</span>=<span class="string">&quot;com.xiaoguan.pojo.Car&quot;</span>&gt;</span></span><br><span class="line">        select</span><br><span class="line">            id,</span><br><span class="line">            car_num as carNum,</span><br><span class="line">            brand,</span><br><span class="line">            guide_price as guidePrice,</span><br><span class="line">            produce_time as produceTime,</span><br><span class="line">            car_type as carType</span><br><span class="line">        from</span><br><span class="line">            t_car</span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mapper</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span>?&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span> <span class="attr">debug</span>=<span class="string">&quot;false&quot;</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 控制台输出 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">appender</span> <span class="attr">name</span>=<span class="string">&quot;STDOUT&quot;</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.core.ConsoleAppender&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">encoder</span> <span class="attr">class</span>=<span class="string">&quot;ch.qos.logback.classic.encoder.PatternLayoutEncoder&quot;</span>&gt;</span></span><br><span class="line">            <span class="comment">&lt;!--格式化输出：%d表示日期，%thread表示线程名，%-5level：级别从左显示5个字符宽度%msg：日志消息，%n是换行符--&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">pattern</span>&gt;</span>%d&#123;yyyy-MM-dd HH:mm:ss.SSS&#125; [%thread] %-5level %logger&#123;50&#125; - %msg%n<span class="tag">&lt;/<span class="name">pattern</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">encoder</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">appender</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 按照每天生成日志文件 --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!--mybatis log configure--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;com.apache.ibatis&quot;</span> <span class="attr">level</span>=<span class="string">&quot;TRACE&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;java.sql.Connection&quot;</span> <span class="attr">level</span>=<span class="string">&quot;DEBUG&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;java.sql.Statement&quot;</span> <span class="attr">level</span>=<span class="string">&quot;DEBUG&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">logger</span> <span class="attr">name</span>=<span class="string">&quot;java.sql.PreparedStatement&quot;</span> <span class="attr">level</span>=<span class="string">&quot;DEBUG&quot;</span>/&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- 日志输出级别,logback日志级别包括五个：TRACE &lt; DEBUG &lt; INFO &lt; WARN &lt; ERROR --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">root</span> <span class="attr">level</span>=<span class="string">&quot;DEBUG&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;STDOUT&quot;</span>/&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">appender-ref</span> <span class="attr">ref</span>=<span class="string">&quot;FILE&quot;</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">root</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight xml"><table><tr><td class="code"><pre><span class="line"><span class="meta">&lt;?xml version=<span class="string">&quot;1.0&quot;</span> encoding=<span class="string">&quot;UTF-8&quot;</span> ?&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE <span class="keyword">configuration</span></span></span><br><span class="line"><span class="meta">        <span class="keyword">PUBLIC</span> <span class="string">&quot;-//mybatis.org//DTD Config 3.0//EN&quot;</span></span></span><br><span class="line"><span class="meta">        <span class="string">&quot;http://mybatis.org/dtd/mybatis-3-config.dtd&quot;</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;settings&gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--&amp;lt;!&amp;ndash;        &lt;setting name=&quot;logImpl&quot; value=&quot;STDOUT_LOGGING&quot;/&gt;&amp;ndash;&amp;gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--&amp;lt;!&amp;ndash;        &lt;setting name=&quot;logImpl&quot; value=&quot;LOG4J&quot;/&gt;&amp;ndash;&amp;gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--&amp;lt;!&amp;ndash;        &lt;setting name=&quot;logImpl&quot; value=&quot;SLF4J&quot;/&gt;&amp;ndash;&amp;gt;--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--    &lt;/settings&gt;--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">environments</span> <span class="attr">default</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">environment</span> <span class="attr">id</span>=<span class="string">&quot;development&quot;</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">transactionManager</span> <span class="attr">type</span>=<span class="string">&quot;JDBC&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">dataSource</span> <span class="attr">type</span>=<span class="string">&quot;POOLED&quot;</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;driver&quot;</span> <span class="attr">value</span>=<span class="string">&quot;com.mysql.cj.jdbc.Driver&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;url&quot;</span> <span class="attr">value</span>=<span class="string">&quot;jdbc:mysql://localhost:3306/mybatis&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;username&quot;</span> <span class="attr">value</span>=<span class="string">&quot;root&quot;</span>/&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">&quot;password&quot;</span> <span class="attr">value</span>=<span class="string">&quot;xxx&quot;</span>/&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">dataSource</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">environment</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">environments</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mappers</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">mapper</span> <span class="attr">resource</span>=<span class="string">&quot;CarMapper.xml&quot;</span>/&gt;</span></span><br><span class="line">        <span class="comment">&lt;!--resource可以换成url，可以写绝对路径，很少用。绝对路径前还要加深file:///再加盘符等等，移植性差--&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mappers</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="code"><pre><span class="line"><span class="keyword">package</span> com.xiaoguan.mybatis;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> com.xiaoguan.pojo.Car;</span><br><span class="line"><span class="keyword">import</span> com.xiaoguan.utils.SqlSessionUtils;</span><br><span class="line"><span class="keyword">import</span> org.apache.ibatis.session.SqlSession;</span><br><span class="line"><span class="keyword">import</span> org.junit.Test;</span><br><span class="line"></span><br><span class="line"><span class="keyword">import</span> java.util.HashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.List;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CarMapperTest</span> &#123;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectAll</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtils.openSession();</span><br><span class="line">        List&lt;Object&gt; cars = sqlSession.selectList(<span class="string">&quot;selectAll&quot;</span>);</span><br><span class="line">        cars.forEach(car -&gt; System.out.println(car));</span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testSelectCarById</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtils.openSession();</span><br><span class="line">        <span class="type">Object</span> <span class="variable">car</span> <span class="operator">=</span> sqlSession.selectOne(<span class="string">&quot;selectById&quot;</span>, <span class="number">1</span>);</span><br><span class="line">        System.out.println(car);</span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testUpdateCarById</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtils.openSession();</span><br><span class="line">        <span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>(<span class="number">4L</span>, <span class="string">&quot;999&quot;</span>, <span class="string">&quot;凯美瑞&quot;</span>, <span class="number">66.0</span>, <span class="string">&quot;2000-2-12&quot;</span>, <span class="string">&quot;燃油车&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> sqlSession.update(<span class="string">&quot;updateCar&quot;</span>, car);</span><br><span class="line">        System.out.println(count);</span><br><span class="line">        sqlSession.commit();</span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testDeleteCarById</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtils.openSession();</span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> sqlSession.delete(<span class="string">&quot;deleteById&quot;</span>, <span class="number">14</span>);</span><br><span class="line">        System.out.println(count);</span><br><span class="line">        sqlSession.commit();</span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testInsertCarByPojo</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtils.openSession();</span><br><span class="line">        <span class="type">Car</span> <span class="variable">car</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Car</span>(<span class="literal">null</span>, <span class="string">&quot;3333&quot;</span>, <span class="string">&quot;比亚迪秦&quot;</span>, <span class="number">30.0</span>, <span class="string">&quot;2020-11-11&quot;</span>, <span class="string">&quot;新能源&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> sqlSession.insert(<span class="string">&quot;insertCar&quot;</span>, car);</span><br><span class="line">        System.out.println(count);</span><br><span class="line">        sqlSession.commit();</span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">testInsertCar</span><span class="params">()</span>&#123;</span><br><span class="line">        <span class="type">SqlSession</span> <span class="variable">sqlSession</span> <span class="operator">=</span> SqlSessionUtils.openSession();</span><br><span class="line">        Map&lt;String ,Object&gt; map=<span class="keyword">new</span> <span class="title class_">HashMap</span>&lt;&gt;();</span><br><span class="line">        map.put(<span class="string">&quot;k1&quot;</span>,<span class="string">&quot;1111&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;k2&quot;</span>,<span class="string">&quot;比亚迪汉&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;k3&quot;</span>,<span class="number">10.0</span>);</span><br><span class="line">        map.put(<span class="string">&quot;k4&quot;</span>,<span class="string">&quot;2020-11-11&quot;</span>);</span><br><span class="line">        map.put(<span class="string">&quot;k5&quot;</span>,<span class="string">&quot;电车&quot;</span>);</span><br><span class="line">        <span class="type">int</span> <span class="variable">count</span> <span class="operator">=</span> sqlSession.insert(<span class="string">&quot;insertCar&quot;</span>,map);</span><br><span class="line">        System.out.println(count);</span><br><span class="line">        sqlSession.commit();</span><br><span class="line">        sqlSession.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>计算机学习</category>
        <category>框架</category>
        <category>MyBatis</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>MyBatis</tag>
      </tags>
  </entry>
  <entry>
    <title>EL和JSTL改造简单oa项目</title>
    <url>/JavaWeb/EL%E5%92%8CJSTL%E6%94%B9%E9%80%A0%E7%AE%80%E5%8D%95oa%E9%A1%B9%E7%9B%AE/</url>
    <content><![CDATA[<h3 id="用EL和JSTL改造简单oa项目代码"><a href="#用EL和JSTL改造简单oa项目代码" class="headerlink" title="用EL和JSTL改造简单oa项目代码"></a>用EL和JSTL改造简单oa项目代码</h3><span id="more"></span>

<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;ch&quot;</span>&gt;</span><br><span class="line">    &lt;head&gt;</span><br><span class="line">        &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">        &lt;title&gt;新增部门&lt;/title&gt;</span><br><span class="line">    &lt;/head&gt;</span><br><span class="line">    &lt;body&gt;</span><br><span class="line">        &lt;h1&gt;新增部门&lt;/h1&gt;</span><br><span class="line">        &lt;hr&gt;</span><br><span class="line">        &lt;form action=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/add&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">            部门编号&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;deptno&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">            部门名称&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;dname&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">            部门位置&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;loc&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">            &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;保存&quot;</span>&gt;</span><br><span class="line">        &lt;/form&gt;</span><br><span class="line">    &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;ch&quot;</span>&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">      &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">      &lt;title&gt;部门详情&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">        &lt;h1&gt;部门详情&lt;/h1&gt;</span><br><span class="line">        &lt;hr&gt;</span><br><span class="line">        部门编号&lt;input type=<span class="string">&quot;text&quot;</span> value=<span class="string">&quot;$&#123;dept.deptno&#125;&quot;</span> readonly/&gt;&lt;br&gt;</span><br><span class="line">        部门名称&lt;input type=<span class="string">&quot;text&quot;</span> value=<span class="string">&quot;$&#123;dept.dname&#125;&quot;</span> readonly/&gt;&lt;br&gt;</span><br><span class="line">        部门位置&lt;input type=<span class="string">&quot;text&quot;</span> value=<span class="string">&quot;$&#123;dept.loc&#125;&quot;</span> readonly/&gt;&lt;br&gt;</span><br><span class="line">        &lt;input type=<span class="string">&quot;button&quot;</span> value=<span class="string">&quot;后退&quot;</span> onclick=<span class="string">&quot;window.history.back()&quot;</span>&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;ch&quot;</span>&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">      &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">      &lt;title&gt;修改部门&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">      &lt;h1&gt;修改部门&lt;/h1&gt;</span><br><span class="line">      &lt;hr&gt;</span><br><span class="line">      &lt;form action=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/modify&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">          部门编号&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;deptno&quot;</span> value=<span class="string">&quot;$&#123;dept.deptno&#125;&quot;</span> readonly/&gt;&lt;br&gt;</span><br><span class="line">          部门名称&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;dname&quot;</span> value=<span class="string">&quot;$&#123;dept.dname&#125;&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">          部门位置&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;loc&quot;</span> value=<span class="string">&quot;$&#123;dept.loc&#125;&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">          &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;修改&quot;</span>&gt;</span><br><span class="line">      &lt;/form&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;ch&quot;</span>&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">      &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">      &lt;title&gt;操作或登录失败&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">    &lt;h1&gt;&lt;a href=<span class="string">&quot;javascript:void(0)&quot;</span> onclick=<span class="string">&quot;document.location.href=&#x27;$&#123;pageContext.request.contextPath&#125;/welcome&#x27;&quot;</span>&gt;操作或登录失败请返回起始页&lt;/a&gt;&lt;/h1&gt;</span><br><span class="line"></span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;ch&quot;</span>&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">      &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">      &lt;title&gt;欢迎使用OA系统&lt;/title&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">        &lt;%--&lt;a href=<span class="string">&quot;&lt;%=request.getContextPath()%&gt;/list&quot;</span>&gt;点击进入部门列表&lt;/a&gt;&lt;br&gt;--%&gt;</span><br><span class="line">        &lt;h1&gt;用户登录&lt;/h1&gt;</span><br><span class="line">        &lt;hr&gt;</span><br><span class="line">        &lt;form action=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/login&quot;</span> method=<span class="string">&quot;post&quot;</span>&gt;</span><br><span class="line">            用户名:&lt;input type=<span class="string">&quot;text&quot;</span> name=<span class="string">&quot;userName&quot;</span>/&gt;&lt;br&gt;</span><br><span class="line">            密码:&lt;input type=<span class="string">&quot;password&quot;</span> name=<span class="string">&quot;userPassword&quot;</span>&gt;&lt;br&gt;</span><br><span class="line">            &lt;input type=<span class="string">&quot;checkbox&quot;</span> name=<span class="string">&quot;flag&quot;</span> value=<span class="string">&quot;1&quot;</span>&gt;十天内免登录&lt;br&gt;</span><br><span class="line">            &lt;input type=<span class="string">&quot;submit&quot;</span> value=<span class="string">&quot;登录&quot;</span>&gt;</span><br><span class="line">        &lt;/form&gt;</span><br><span class="line"></span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight jsp"><table><tr><td class="code"><pre><span class="line">&lt;%@ page contentType=<span class="string">&quot;text/html;charset=UTF-8&quot;</span> language=<span class="string">&quot;java&quot;</span> %&gt;</span><br><span class="line">&lt;%<span class="meta">@taglib</span> prefix=<span class="string">&quot;c&quot;</span> uri=<span class="string">&quot;http://java.sun.com/jsp/jstl/core&quot;</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html&gt;</span><br><span class="line">&lt;html lang=<span class="string">&quot;ch&quot;</span>&gt;</span><br><span class="line">  &lt;head&gt;</span><br><span class="line">      &lt;meta charset=<span class="string">&quot;UTF-8&quot;</span>&gt;</span><br><span class="line">      &lt;title&gt;部门列表&lt;/title&gt;</span><br><span class="line">      &lt;script&gt;</span><br><span class="line">          function <span class="title function_">del</span><span class="params">(deptno)</span>&#123;</span><br><span class="line">              <span class="keyword">if</span>(window.confirm(<span class="string">&#x27;请确认是否删除！&#x27;</span>))&#123;</span><br><span class="line">                 document.location.href=<span class="string">&#x27;$&#123;pageContext.request.contextPath&#125;/delete?deptno=&#x27;</span>+deptno;</span><br><span class="line">              &#125;</span><br><span class="line">          &#125;</span><br><span class="line">      &lt;/script&gt;</span><br><span class="line">  &lt;/head&gt;</span><br><span class="line">  &lt;body&gt;</span><br><span class="line">       &lt;h3&gt;欢迎$&#123;userName&#125;&lt;/h3&gt;&lt;br&gt;</span><br><span class="line">       &lt;a href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/logout&quot;</span>&gt;[退出系统]&lt;/a&gt;</span><br><span class="line">       &lt;a href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/freeLogin&quot;</span>&gt;[退出免登陆状态]&lt;/a&gt;</span><br><span class="line">       &lt;h1 align=<span class="string">&quot;center&quot;</span>&gt;部门列表&lt;/h1&gt;</span><br><span class="line">       &lt;hr&gt;</span><br><span class="line">        &lt;table border=<span class="string">&quot;1px&quot;</span> align=<span class="string">&quot;center&quot;</span> width=<span class="string">&quot;50%&quot;</span>&gt;</span><br><span class="line">            &lt;tr&gt;</span><br><span class="line">                &lt;th&gt;序号&lt;/th&gt;</span><br><span class="line">                &lt;th&gt;部门编号&lt;/th&gt;</span><br><span class="line">                &lt;th&gt;部门名称&lt;/th&gt;</span><br><span class="line">                &lt;th&gt;操作&lt;/th&gt;</span><br><span class="line">            &lt;/tr&gt;</span><br><span class="line">            &lt;c:forEach items=<span class="string">&quot;$&#123;deptList&#125;&quot;</span> varStatus=<span class="string">&quot;varStatus&quot;</span> <span class="keyword">var</span>=<span class="string">&quot;dept&quot;</span>&gt;</span><br><span class="line">                &lt;tr&gt;</span><br><span class="line">                    &lt;td&gt;$&#123;varStatus.count&#125;&lt;/td&gt;</span><br><span class="line">                    &lt;td&gt;$&#123;dept.deptno&#125;&lt;/td&gt;</span><br><span class="line">                    &lt;td&gt;$&#123;dept.dname&#125;&lt;/td&gt;</span><br><span class="line">                    &lt;td&gt;</span><br><span class="line">                        &lt;a href=<span class="string">&quot;javascript:void(0)&quot;</span> onclick=<span class="string">&quot;del($&#123;dept.deptno&#125;)&quot;</span>&gt;删除&lt;/a&gt;</span><br><span class="line">                        &lt;a href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/detail?f=m&amp;deptno=$&#123;dept.deptno&#125;&quot;</span>&gt;修改&lt;/a&gt;</span><br><span class="line">                        &lt;a href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/detail?f=d&amp;deptno=$&#123;dept.deptno&#125;&quot;</span>&gt;详情&lt;/a&gt;</span><br><span class="line">                    &lt;/td&gt;</span><br><span class="line">                &lt;/tr&gt;</span><br><span class="line">            &lt;/c:forEach&gt;</span><br><span class="line">        &lt;/table&gt;</span><br><span class="line">        &lt;hr&gt;</span><br><span class="line">        &lt;a href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/add.jsp&quot;</span>&gt;新增部门&lt;/a&gt;&lt;br&gt;</span><br><span class="line">        &lt;a href=<span class="string">&quot;$&#123;pageContext.request.contextPath&#125;/index.jsp&quot;</span>&gt;回到起始页&lt;/a&gt;</span><br><span class="line">  &lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure>

]]></content>
      <categories>
        <category>计算机学习</category>
        <category>Java</category>
        <category>JavaWeb</category>
      </categories>
      <tags>
        <tag>Java</tag>
        <tag>JavaWeb</tag>
        <tag>JSTL</tag>
        <tag>EL</tag>
      </tags>
  </entry>
</search>
